#region Local Var
	var uLocal_0 = 0;
	var uLocal_1 = 0;
	int iLocal_2 = 0;
	int iLocal_3 = 0;
	int iLocal_4 = 0;
	int iLocal_5 = 0;
	int iLocal_6 = 0;
	int iLocal_7 = 0;
	int iLocal_8 = 0;
	int iLocal_9 = 0;
	int iLocal_10 = 0;
	int iLocal_11 = 0;
	var uLocal_12 = 0;
	var uLocal_13 = 0;
	float fLocal_14 = 0f;
	var uLocal_15 = 0;
	var uLocal_16 = 0;
	var uLocal_17 = 0;
	var uLocal_18 = 0;
	char* sLocal_19 = NULL;
	float fLocal_20 = 0f;
	var uLocal_21 = 0;
	var uLocal_22 = 0;
	var uLocal_23 = 0;
	float fLocal_24 = 0f;
	float fLocal_25 = 0f;
	var uLocal_26 = 0;
	int iLocal_27 = 0;
	var uLocal_28 = 0;
	var uLocal_29 = 0;
	float fLocal_30 = 0f;
	float fLocal_31 = 0f;
	float fLocal_32 = 0f;
	var uLocal_33 = 0;
	var uLocal_34 = 0;
	var uLocal_35 = 0;
	var uLocal_36 = 0;
	var uLocal_37 = 0;
	int iLocal_38 = 0;
	int iLocal_39 = 0;
	int iLocal_40 = 0;
	int iLocal_41 = 0;
	var uLocal_42 = 0;
	var uLocal_43 = 0;
	var uLocal_44 = 0;
	var uLocal_45 = 0;
	var uLocal_46 = 0;
	var uLocal_47 = 0;
	var uLocal_48 = 0;
	int iLocal_49 = 0;
	int iLocal_50 = 0;
	var uLocal_51 = 4;
	var uLocal_52 = 0;
	var uLocal_53 = 0;
	var uLocal_54 = 0;
	var uLocal_55 = 0;
	var uLocal_56 = 0;
	var uLocal_57 = 0;
	var uLocal_58 = 0;
	var uLocal_59 = 4;
	var uLocal_60 = 0;
	var uLocal_61 = 0;
	var uLocal_62 = 0;
	var uLocal_63 = 0;
	var uLocal_64 = 4;
	var uLocal_65 = 0;
	var uLocal_66 = 0;
	var uLocal_67 = 0;
	var uLocal_68 = 0;
	var uLocal_69 = 4;
	var uLocal_70 = 0;
	var uLocal_71 = 0;
	var uLocal_72 = 0;
	var uLocal_73 = 0;
	var uLocal_74 = 0;
	var uLocal_75 = 4;
	var uLocal_76 = 0;
	var uLocal_77 = 0;
	var uLocal_78 = 0;
	var uLocal_79 = 0;
	var uLocal_80 = 4;
	var uLocal_81 = 0;
	var uLocal_82 = 0;
	var uLocal_83 = 0;
	var uLocal_84 = 0;
	var uLocal_85 = 4;
	var uLocal_86 = 0;
	var uLocal_87 = 0;
	var uLocal_88 = 0;
	var uLocal_89 = 0;
	var uLocal_90 = 0;
	var uLocal_91 = 0;
	var uLocal_92 = 0;
	var uLocal_93 = 0;
	var uLocal_94 = 0;
	var uLocal_95 = 16;
	var uLocal_96 = 0;
	var uLocal_97 = 0;
	var uLocal_98 = 0;
	var uLocal_99 = 0;
	var uLocal_100 = 0;
	var uLocal_101 = 0;
	var uLocal_102 = 0;
	var uLocal_103 = 0;
	var uLocal_104 = 0;
	var uLocal_105 = 0;
	var uLocal_106 = 0;
	var uLocal_107 = 0;
	var uLocal_108 = 0;
	var uLocal_109 = 0;
	var uLocal_110 = 0;
	var uLocal_111 = 0;
	var uLocal_112 = 0;
	var uLocal_113 = 0;
	var uLocal_114 = 0;
	var uLocal_115 = 0;
	var uLocal_116 = 0;
	var uLocal_117 = 0;
	var uLocal_118 = 0;
	var uLocal_119 = 0;
	var uLocal_120 = 0;
	var uLocal_121 = 0;
	var uLocal_122 = 0;
	var uLocal_123 = 0;
	var uLocal_124 = 0;
	var uLocal_125 = 0;
	var uLocal_126 = 0;
	var uLocal_127 = 0;
	var uLocal_128 = 0;
	var uLocal_129 = 0;
	var uLocal_130 = 0;
	var uLocal_131 = 0;
	var uLocal_132 = 0;
	var uLocal_133 = 0;
	var uLocal_134 = 0;
	var uLocal_135 = 0;
	var uLocal_136 = 0;
	var uLocal_137 = 0;
	var uLocal_138 = 0;
	var uLocal_139 = 0;
	var uLocal_140 = 0;
	var uLocal_141 = 0;
	var uLocal_142 = 0;
	var uLocal_143 = 0;
	var uLocal_144 = 0;
	var uLocal_145 = 0;
	var uLocal_146 = 0;
	var uLocal_147 = 0;
	var uLocal_148 = 0;
	var uLocal_149 = 0;
	var uLocal_150 = 0;
	var uLocal_151 = 0;
	var uLocal_152 = 0;
	var uLocal_153 = 0;
	var uLocal_154 = 0;
	var uLocal_155 = 0;
	var uLocal_156 = 0;
	var uLocal_157 = 0;
	var uLocal_158 = 0;
	var uLocal_159 = 0;
	var uLocal_160 = 0;
	var uLocal_161 = 0;
	var uLocal_162 = 0;
	var uLocal_163 = 0;
	var uLocal_164 = 0;
	var uLocal_165 = 0;
	var uLocal_166 = 0;
	var uLocal_167 = 0;
	var uLocal_168 = 0;
	var uLocal_169 = 0;
	var uLocal_170 = 0;
	var uLocal_171 = 0;
	var uLocal_172 = 0;
	var uLocal_173 = 0;
	var uLocal_174 = 0;
	var uLocal_175 = 0;
	var uLocal_176 = 0;
	var uLocal_177 = 0;
	var uLocal_178 = 0;
	var uLocal_179 = 0;
	var uLocal_180 = 0;
	var uLocal_181 = 0;
	var uLocal_182 = 0;
	var uLocal_183 = 0;
	var uLocal_184 = 0;
	var uLocal_185 = 0;
	var uLocal_186 = 0;
	var uLocal_187 = 0;
	var uLocal_188 = 0;
	var uLocal_189 = 0;
	var uLocal_190 = 0;
	var uLocal_191 = 0;
	var uLocal_192 = 0;
	var uLocal_193 = 0;
	var uLocal_194 = 0;
	var uLocal_195 = 0;
	var uLocal_196 = 0;
	var uLocal_197 = 0;
	var uLocal_198 = 0;
	var uLocal_199 = 0;
	var uLocal_200 = 0;
	var uLocal_201 = 0;
	var uLocal_202 = 0;
	var uLocal_203 = 0;
	var uLocal_204 = 0;
	var uLocal_205 = 0;
	var uLocal_206 = 0;
	var uLocal_207 = 0;
	var uLocal_208 = 0;
	var uLocal_209 = 0;
	var uLocal_210 = 0;
	var uLocal_211 = 0;
	var uLocal_212 = 0;
	var uLocal_213 = 0;
	var uLocal_214 = 0;
	var uLocal_215 = 0;
	var uLocal_216 = 0;
	var uLocal_217 = 0;
	var uLocal_218 = 0;
	var uLocal_219 = 0;
	var uLocal_220 = 0;
	var uLocal_221 = 0;
	var uLocal_222 = 0;
	var uLocal_223 = 0;
	var uLocal_224 = 0;
	var uLocal_225 = 0;
	var uLocal_226 = 0;
	var uLocal_227 = 0;
	var uLocal_228 = 0;
	var uLocal_229 = 0;
	var uLocal_230 = 0;
	var uLocal_231 = 0;
	var uLocal_232 = 0;
	var uLocal_233 = 0;
	var uLocal_234 = 0;
	var uLocal_235 = 0;
	var uLocal_236 = 0;
	var uLocal_237 = 0;
	var uLocal_238 = 0;
	var uLocal_239 = 0;
	var uLocal_240 = 0;
	var uLocal_241 = 0;
	var uLocal_242 = 0;
	var uLocal_243 = 0;
	var uLocal_244 = 0;
	var uLocal_245 = 0;
	var uLocal_246 = 0;
	var uLocal_247 = 0;
	var uLocal_248 = 0;
	var uLocal_249 = 0;
	var uLocal_250 = 0;
	var uLocal_251 = 0;
	var uLocal_252 = 0;
	var uLocal_253 = 0;
	var uLocal_254 = 0;
	var uLocal_255 = 0;
	var uLocal_256 = 0;
	var uLocal_257 = 0;
	var uLocal_258 = 0;
	var uLocal_259 = 0;
	int iLocal_260 = 0;
	struct<14> Local_261 = { 0, 3, 0, 0, 0, 0, 0, 1092616192, 1101004800, 0, 0, 0, 0, 0 } ;
	var uLocal_275 = 0;
	var uLocal_276 = 0;
	var uLocal_277 = 0;
	var uLocal_278 = 3;
	var uLocal_279 = 0;
	var uLocal_280 = 0;
	var uLocal_281 = 0;
	var uLocal_282 = 0;
	var uLocal_283 = 0;
	var uLocal_284 = 0;
	var uLocal_285 = 0;
	int iLocal_286 = 0;
	int iLocal_287 = 0;
	int iLocal_288 = 0;
	int iLocal_289 = 0;
	int iLocal_290 = 0;
	int iLocal_291 = 0;
	int iLocal_292 = 0;
	var uLocal_293 = 0;
	var uLocal_294 = 0;
	var uLocal_295 = 0;
	var uLocal_296 = 0;
	var uLocal_297 = 0;
	var uLocal_298 = 0;
	var uLocal_299 = 0;
	var uLocal_300 = 21;
	var uLocal_301 = 6;
	var uLocal_302 = 0;
	var uLocal_303 = 0;
	var uLocal_304 = 0;
	int iLocal_305 = 0;
	float fLocal_306 = 0f;
	var uLocal_307 = 0;
	var uLocal_308 = 0;
	var uLocal_309[9] = { 0, 0, 0, 0, 0, 0, 0, 0, 0 };
	int iLocal_319[9] = { 0, 0, 0, 0, 0, 0, 0, 0, 0 };
	struct<3> Local_329[9];
	struct<3> Local_357 = { 0, 0, 0 } ;
	int iLocal_360 = 0;
	int iLocal_361 = 0;
	var uLocal_362 = 0;
	var uLocal_363 = 0;
	var uLocal_364 = 0;
	int iLocal_365 = 0;
	int iLocal_366 = 0;
	int iLocal_367 = 0;
	int iLocal_368 = 0;
	int iLocal_369 = 0;
	int iLocal_370 = 0;
	var uLocal_371 = 0;
	int iLocal_372 = 0;
	int iLocal_373 = 0;
	int iLocal_374 = 0;
	int iLocal_375 = 0;
	int iLocal_376 = 0;
	struct<3> Local_377 = { 0, 0, 0 } ;
	struct<3> Local_380 = { 0, 0, 0 } ;
	var uLocal_383 = 0;
	var uLocal_384 = 0;
	float fLocal_385 = 0f;
	int iLocal_386 = 0;
	int iLocal_387 = 0;
	int iLocal_388 = 0;
	struct<20> Local_389 = { 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 } ;
	var uLocal_409 = 0;
	var uLocal_410 = 0;
	var uLocal_411 = 0;
	var uLocal_412 = 0;
	var uLocal_413 = 0;
	var uLocal_414 = 0;
	var uLocal_415 = 0;
	var uLocal_416 = 0;
	var uLocal_417 = 0;
	var uLocal_418 = 0;
	var uLocal_419 = 0;
	var uLocal_420 = 0;
	var uLocal_421 = 0;
	var uLocal_422 = 0;
	int iLocal_423 = 0;
	struct<3> Local_424 = { 0, 0, 0 } ;
	struct<3> Local_427 = { 0, 0, 0 } ;
	int iLocal_430 = 0;
	struct<3> Local_431 = { 0, 0, 0 } ;
	struct<3> Local_434 = { 0, 0, 0 } ;
	struct<3> Local_437 = { 0, 0, 0 } ;
	struct<3> Local_440 = { 0, 0, 0 } ;
	struct<3> Local_443 = { 0, 0, 0 } ;
	struct<3> Local_446 = { 0, 0, 0 } ;
	struct<3> Local_449 = { 0, 0, 0 } ;
	struct<3> Local_452 = { 0, 0, 0 } ;
	struct<3> Local_455 = { 0, 0, 0 } ;
	struct<3> Local_458 = { 0, 0, 0 } ;
	struct<3> Local_461 = { 0, 0, 0 } ;
	float fLocal_464 = 0f;
	int iLocal_465 = 0;
	int iLocal_466 = 0;
	int iLocal_467 = 0;
	var uLocal_468[9] = { 0, 0, 0, 0, 0, 0, 0, 0, 0 };
	struct<3> Local_478 = { 0, 0, 0 } ;
	struct<3> Local_481 = { 0, 0, 0 } ;
	struct<3> Local_484 = { 0, 0, 0 } ;
	int iLocal_487 = 0;
	int iLocal_488 = 0;
	struct<3> Local_489 = { 0, 0, 0 } ;
	int iLocal_492 = 0;
	var uLocal_493 = 0;
	int iLocal_494 = 0;
	int iLocal_495 = 0;
	int iLocal_496 = 0;
	int iLocal_497 = 0;
	bool bLocal_498 = 0;
	struct<3> Local_499 = { 0, 0, 0 } ;
#endregion

void __EntryFunction__()//Position - 0x0
{
	iLocal_2 = 1;
	iLocal_3 = 134;
	iLocal_4 = 134;
	iLocal_5 = 1;
	iLocal_6 = 1;
	iLocal_7 = 1;
	iLocal_8 = 134;
	iLocal_9 = 1;
	iLocal_10 = 12;
	iLocal_11 = 12;
	fLocal_14 = 0.001f;
	sLocal_19 = "NULL";
	fLocal_20 = 0f;
	fLocal_24 = -0.0375f;
	fLocal_25 = 0.17f;
	iLocal_27 = 3;
	fLocal_30 = 80f;
	fLocal_31 = 140f;
	fLocal_32 = 180f;
	iLocal_38 = 1;
	iLocal_39 = 65;
	iLocal_40 = 49;
	iLocal_41 = 64;
	uLocal_45 = HUD::GET_STANDARD_BLIP_ENUM_ID();
	uLocal_46 = HUD::GET_WAYPOINT_BLIP_ENUM_ID();
	iLocal_286 = 1;
	Local_357 = { 2767.21f, 2824.786f, 36.591f };
	iLocal_369 = 1;
	iLocal_370 = 1;
	iLocal_386 = 15000;
	iLocal_430 = AUDIO::GET_SOUND_ID();
	Local_443 = { 0f, -5.8f, -2.85f };
	Local_446 = { 0f, -7.6f, -1.25f };
	Local_449 = { 0f, 0f, 0f };
	Local_452 = { 0f, -7.6f, -1.75f };
	Local_455 = { -3f, 0f, 180f };
	Local_458 = { 0f, 0f, 0f };
	Local_484 = { 0f, -0.52f, -0.65f };
	Local_489 = { 1759.603f, 3270.775f, 41.268f };
	if (PLAYER::HAS_FORCE_CLEANUP_OCCURRED(3))
	{
		GlobalFunc_10632();
		func_665();
		SCRIPT::TERMINATE_THIS_THREAD();
	}
	MISC::SET_MISSION_FLAG(1);
	while (true)
	{
		RECORDING::_0x208784099002BC30("M_SDTRCK", 0);
		switch (iLocal_286)
		{
			case 0:
				func_635();
				break;
			
			case 1:
				func_605();
				break;
			
			case 2:
				func_595();
				break;
			
			case 3:
				func_585();
				break;
			
			case 4:
				func_308();
				break;
			
			case 5:
				func_217();
				break;
			
			case 6:
				func_46();
				break;
			
			case 7:
				func_26();
				break;
			
			default:
				break;
		}
		if (func_22())
		{
			if (PLAYER::IS_PLAYER_CONTROL_ON(PLAYER::PLAYER_ID()))
			{
				func_1();
			}
		}
		SYSTEM::WAIT(0);
	}
	Local_449 = { Local_449 };
}

void func_1()//Position - 0x1DA
{
	GlobalFunc_4935();
	AUDIO::TRIGGER_MUSIC_EVENT("FHPRD_FAIL");
	if (!ENTITY::IS_ENTITY_DEAD(iLocal_49))
	{
		if (PED::IS_PED_IN_VEHICLE(PLAYER::PLAYER_PED_ID(), iLocal_49, 0))
		{
			GlobalFunc_5129(1722.484f, 3254.085f, 40.1525f, 281.7393f);
		}
	}
	GlobalFunc_10616(0);
	while (!GlobalFunc_145())
	{
		SYSTEM::WAIT(0);
	}
	if (PLAYER::IS_PLAYER_PLAYING(PLAYER::PLAYER_ID()))
	{
		PLAYER::SPECIAL_ABILITY_DEACTIVATE(PLAYER::PLAYER_ID());
	}
	if (ENTITY::DOES_ENTITY_EXIST(iLocal_50))
	{
		VEHICLE::DELETE_MISSION_TRAIN(&iLocal_50);
	}
	func_665();
	SCRIPT::TERMINATE_THIS_THREAD();
}





















int func_22()//Position - 0x1303
{
	switch (iLocal_286)
	{
		case 0:
			break;
		
		case 2:
			if (GlobalFunc_713(PLAYER::PLAYER_PED_ID(), 2628.908f, 2947.625f, 39.428f, 1) > 270f)
			{
				GlobalFunc_509("BSPD_ABANDON");
				return 1;
			}
			break;
		
		case 5:
		case 6:
			if (ENTITY::DOES_ENTITY_EXIST(iLocal_49))
			{
				if (!VEHICLE::IS_VEHICLE_DRIVEABLE(iLocal_49, 0))
				{
					GlobalFunc_509("FAILHELI");
					return 1;
				}
				else if (SYSTEM::VMAG(ENTITY::GET_ENTITY_VELOCITY(iLocal_49)) < 0.5f)
				{
					Local_499 = { ENTITY::GET_ENTITY_ROTATION(iLocal_49, 2) };
					if ((Local_499.f_1 > 80f && Local_499.f_1 < 280f) || (Local_499.x > 80f && Local_499.x < 280f))
					{
						GlobalFunc_509("FAILHELI");
						return 1;
					}
				}
			}
			if (ENTITY::DOES_ENTITY_EXIST(iLocal_50))
			{
				if (ENTITY::IS_ENTITY_DEAD(iLocal_50) || ENTITY::IS_ENTITY_IN_WATER(iLocal_50))
				{
					GlobalFunc_509("FAILTRAIN");
					return 1;
				}
			}
			if (func_23())
			{
				if (PED::IS_PED_INJURED(uLocal_51[2]))
				{
					GlobalFunc_509("CMN_TDIED");
					return 1;
				}
			}
			else if (PED::IS_PED_INJURED(uLocal_51[uLocal_51.f_5]))
			{
				GlobalFunc_509("CMN_MDIED");
				return 1;
			}
			if (ENTITY::DOES_ENTITY_EXIST(iLocal_288))
			{
				if (ENTITY::IS_ENTITY_DEAD(iLocal_288))
				{
					GlobalFunc_509("BSPD_TRUCKDEAD");
					return 1;
				}
			}
			if (ENTITY::DOES_ENTITY_EXIST(iLocal_287))
			{
				if (PED::IS_PED_INJURED(iLocal_287))
				{
					GlobalFunc_509("BSPD_CREWDEAD");
					return 1;
				}
			}
			if (ENTITY::DOES_ENTITY_EXIST(iLocal_290))
			{
				if (PED::IS_PED_INJURED(iLocal_290))
				{
					GlobalFunc_509("BSPD_CREWDEAD");
					return 1;
				}
			}
			if (ENTITY::DOES_ENTITY_EXIST(iLocal_291))
			{
				if (ENTITY::IS_ENTITY_DEAD(iLocal_291))
				{
					GlobalFunc_509("BSPD_TRUCKDEAD");
					return 1;
				}
			}
			if (ENTITY::DOES_ENTITY_EXIST(iLocal_289))
			{
				if (ENTITY::IS_ENTITY_DEAD(iLocal_289))
				{
					GlobalFunc_509("BSPD_TRUCKDEAD");
					return 1;
				}
			}
			if (ENTITY::DOES_ENTITY_EXIST(iLocal_292))
			{
				if (ENTITY::IS_ENTITY_DEAD(iLocal_292))
				{
					GlobalFunc_509("BSPD_TRUCKDEAD");
					return 1;
				}
			}
			break;
	}
	if (PLAYER::GET_PLAYER_WANTED_LEVEL(PLAYER::PLAYER_ID()) > 0)
	{
		SYSTEM::WAIT(2000);
		GlobalFunc_509("FAILGUARD");
		return 1;
	}
	return 0;
}

int func_23()//Position - 0x1527
{
	if (GlobalFunc_8315() == 0 || GlobalFunc_8315() == 1)
	{
		return 1;
	}
	return 0;
}



void func_26()//Position - 0x15C1
{
	func_45();
	GlobalFunc_571(0, 899);
	func_29(0, 0, 2000, 1);
	GlobalFunc_5103(0, 0);
	HUD::CLEAR_PRINTS();
	func_665();
	SCRIPT::TERMINATE_THIS_THREAD();
}



void func_29(bool bParam0, bool bParam1, int iParam2, int iParam3)//Position - 0x1705
{
	CAM::SET_WIDESCREEN_BORDERS(bParam0, 0);
	if (iParam3 == 1)
	{
		PLAYER::SET_PLAYER_CONTROL(PLAYER::PLAYER_ID(), !bParam0, 64);
	}
	else
	{
		PLAYER::SET_PLAYER_CONTROL(PLAYER::PLAYER_ID(), !bParam0, 0);
	}
	if (bParam1)
	{
		CAM::RENDER_SCRIPT_CAMS(bParam0, bParam1, iParam2, 1, 0, 0);
	}
	else
	{
		CAM::RENDER_SCRIPT_CAMS(bParam0, bParam1, iParam2, 1, 0, 0);
	}
	HUD::CLEAR_HELP(1);
	HUD::CLEAR_PRINTS();
	GlobalFunc_8316(bParam0, 1, 1, 0);
	GlobalFunc_7632(bParam0);
	HUD::DISPLAY_HUD(!bParam0);
	HUD::DISPLAY_RADAR(!bParam0);
}
















void func_45()//Position - 0x1C18
{
	if ((CAM::IS_SCREEN_FADED_OUT() || CAM::IS_SCREEN_FADING_OUT()) || !CAM::IS_SCREEN_FADING_IN())
	{
		CAM::DO_SCREEN_FADE_IN(500);
	}
}

void func_46()//Position - 0x1C43
{
	int iVar0;
	int iVar1;
	bool bVar2;
	
	if (!ENTITY::IS_ENTITY_DEAD(iLocal_50))
	{
		fLocal_306 = MISC::GET_DISTANCE_BETWEEN_COORDS(Local_357, ENTITY::GET_ENTITY_COORDS(iLocal_50, 1), 1);
		if (fLocal_306 < 1.5f)
		{
			VEHICLE::SET_TRAIN_CRUISE_SPEED(iLocal_50, 0f);
			VEHICLE::SET_TRAIN_SPEED(iLocal_50, 0f);
			func_216();
		}
		else
		{
			func_214();
		}
	}
	func_212();
	switch (iLocal_260)
	{
		case 0:
		case 1:
		case 2:
			if (!ENTITY::IS_ENTITY_DEAD(uLocal_309[0]) && !HUD::DOES_BLIP_EXIST(uLocal_307))
			{
				if (ENTITY::DOES_ENTITY_EXIST(uLocal_51[uLocal_51.f_5]) || ENTITY::DOES_ENTITY_EXIST(uLocal_51[2]))
				{
					if (func_23())
					{
						if (!PED::IS_PED_INJURED(uLocal_51[2]))
						{
							TASK::CLEAR_PED_TASKS_IMMEDIATELY(uLocal_51[2]);
							ENTITY::SET_ENTITY_COORDS(uLocal_51[2], 2757.761f, 2805.086f, 40.619f, 1, 0, 0, 1);
							ENTITY::SET_ENTITY_HEADING(uLocal_51[2], 24.132f);
							TASK::TASK_LOOK_AT_ENTITY(uLocal_51[2], iLocal_49, -1, 2048, 2);
							uLocal_51.f_5 = 2;
						}
					}
					else if (!PED::IS_PED_INJURED(uLocal_51[uLocal_51.f_5]))
					{
						TASK::CLEAR_PED_TASKS_IMMEDIATELY(uLocal_51[uLocal_51.f_5]);
						ENTITY::SET_ENTITY_COORDS(uLocal_51[uLocal_51.f_5], 2757.761f, 2805.086f, 40.619f, 1, 0, 0, 1);
						ENTITY::SET_ENTITY_HEADING(uLocal_51[uLocal_51.f_5], 24.132f);
						TASK::TASK_LOOK_AT_ENTITY(uLocal_51[uLocal_51.f_5], iLocal_49, -1, 2048, 2);
					}
				}
				if (func_211())
				{
					GlobalFunc_173(&uLocal_95, 0, PLAYER::PLAYER_PED_ID(), "MICHAEL", 0, 1);
					GlobalFunc_173(&uLocal_95, 2, 0, "TREVOR", 0, 1);
				}
				else if (func_209())
				{
					GlobalFunc_173(&uLocal_95, 2, PLAYER::PLAYER_PED_ID(), "TREVOR", 0, 1);
					GlobalFunc_173(&uLocal_95, 0, 0, "MICHAEL", 0, 1);
				}
				GlobalFunc_Checkpoint3(3, "STAGE_FLY_AWAY_WITH_CARRIAGE", 0, 0, 0, 1);
				RECORDING::_0x293220DA1B46CEBC(3f, 10f, 4);
				func_136(6);
				func_45();
				uLocal_307 = GlobalFunc_6783(uLocal_309[0], 0, 0);
			}
			if (iLocal_260 == 0 && !GlobalFunc_5172(&Local_261, 1))
			{
				if (func_130("BSPRP_MUNHK", "BSPRP_MUNHKF", "BSPRP_MUNKHT"))
				{
					iLocal_260 = 1;
				}
			}
			if (iLocal_260 == 1 && !ENTITY::IS_ENTITY_DEAD(uLocal_309[0]))
			{
				if (!GlobalFunc_5172(&Local_261, 2))
				{
					GlobalFunc_164("GETENGINE", 7500, 1);
					GlobalFunc_703(&uLocal_362);
					iLocal_260 = 2;
				}
			}
			if (((iLocal_260 == 2 && !GlobalFunc_5172(&Local_261, 1)) && !ENTITY::IS_ENTITY_DEAD(uLocal_51[uLocal_51.f_5])) && GlobalFunc_713(PLAYER::PLAYER_PED_ID(), ENTITY::GET_ENTITY_COORDS(uLocal_51[uLocal_51.f_5], 1), 1) < 200f)
			{
				iLocal_260 = 3;
			}
			break;
		
		case 3:
			if (func_126(6) && AUDIO::REQUEST_AMBIENT_AUDIO_BANK("BIG_SCORE_PREP_D", 0))
			{
				if (!ENTITY::IS_ENTITY_DEAD(uLocal_309[0]))
				{
					iLocal_487 = AUDIO::GET_SOUND_ID();
					AUDIO::PLAY_SOUND_FROM_ENTITY(iLocal_487, "ELECTRO_MAGNET_DRONE_MASTER", uLocal_309[0], 0, 0, 0);
				}
				iLocal_494 = 0;
				iLocal_495 = 0;
				iLocal_488 = 0;
				SYSTEM::SETTIMERA(0);
				iLocal_260++;
			}
			break;
		
		case 4:
			if (!PED::IS_PED_IN_VEHICLE(PLAYER::PLAYER_PED_ID(), iLocal_49, 0))
			{
				GlobalFunc_703(&uLocal_307);
				GlobalFunc_703(&uLocal_362);
				if (!HUD::DOES_BLIP_EXIST(uLocal_308))
				{
					if (!AUDIO::HAS_SOUND_FINISHED(iLocal_487))
					{
						AUDIO::STOP_SOUND(iLocal_487);
					}
					uLocal_308 = GlobalFunc_6783(iLocal_49, 0, 0);
					HUD::CLEAR_PRINTS();
					if (iLocal_494 == 0)
					{
						GlobalFunc_164("BSD_GETINCHOP", 7500, 1);
						iLocal_494 = 1;
					}
				}
			}
			else
			{
				GlobalFunc_703(&uLocal_308);
				if (!ENTITY::IS_ENTITY_DEAD(uLocal_309[0]))
				{
					if (!HUD::DOES_BLIP_EXIST(uLocal_307))
					{
						if (AUDIO::HAS_SOUND_FINISHED(iLocal_487))
						{
							AUDIO::PLAY_SOUND_FROM_ENTITY(iLocal_487, "ELECTRO_MAGNET_DRONE_MASTER", uLocal_309[0], 0, 0, 0);
						}
						uLocal_307 = GlobalFunc_6783(uLocal_309[0], 0, 0);
						HUD::CLEAR_PRINTS();
						if (iLocal_495 == 0)
						{
							GlobalFunc_164("GETENGINE", 7500, 1);
							iLocal_495 = 1;
						}
					}
				}
			}
			func_125(uLocal_309[0]);
			if (ENTITY::IS_ENTITY_AT_ENTITY(iLocal_49, uLocal_309[0], 6.25f, 6.25f, 6.75f, 0, 1, 0) && GlobalFunc_1575(ENTITY::GET_ENTITY_HEADING(iLocal_49), ENTITY::GET_ENTITY_HEADING(uLocal_309[0]), 30f))
			{
				if (iLocal_488 == 0)
				{
					GlobalFunc_159("MAGNETON", -1);
					iLocal_488 = 1;
				}
				if (PAD::IS_CONTROL_JUST_PRESSED(0, 103))
				{
					RECORDING::_0x293220DA1B46CEBC(4f, 8f, 4);
					iLocal_289 = VEHICLE::CREATE_VEHICLE(joaat("freighttrailer"), 1776.717f, 3252.036f, 40.9069f, 268.4944f, 1, 1);
					ENTITY::SET_ENTITY_INVINCIBLE(iLocal_289, 1);
					iLocal_288 = VEHICLE::CREATE_VEHICLE(joaat("phantom"), ENTITY::GET_OFFSET_FROM_ENTITY_IN_WORLD_COORDS(iLocal_289, 0f, 11f, -1.2f), (ENTITY::GET_ENTITY_HEADING(iLocal_289) + 5f), 1, 1);
					ENTITY::SET_ENTITY_COORDS_NO_OFFSET(iLocal_288, ENTITY::GET_OFFSET_FROM_ENTITY_IN_WORLD_COORDS(iLocal_289, 0f, 11f, -1.2f), 0, 0, 1);
					VEHICLE::SET_VEHICLE_DOORS_LOCKED(iLocal_288, 2);
					VEHICLE::SET_VEHICLE_IS_CONSIDERED_BY_PLAYER(iLocal_288, 0);
					ENTITY::SET_ENTITY_PROOFS(iLocal_288, 0, 0, 0, 1, 0, 0, 0, 0);
					ENTITY::SET_ENTITY_PROOFS(iLocal_289, 0, 0, 0, 1, 0, 0, 0, 0);
					iLocal_287 = func_111(4, 0, 1776.717f, 3252.036f, 40.9069f, 0f, 0, 1);
					PED::SET_PED_INTO_VEHICLE(iLocal_287, iLocal_288, -1);
					PED::SET_BLOCKING_OF_NON_TEMPORARY_EVENTS(iLocal_287, 1);
					VEHICLE::ATTACH_VEHICLE_TO_TRAILER(iLocal_288, iLocal_289, 1065353216);
					VEHICLE::SET_RANDOM_TRAINS(0);
					Local_431 = { ENTITY::GET_OFFSET_FROM_ENTITY_GIVEN_WORLD_COORDS(iLocal_49, ENTITY::GET_ENTITY_COORDS(uLocal_309[0], 1)) };
					Local_434 = { ENTITY::GET_ENTITY_ROTATION(uLocal_309[0], 2) - ENTITY::GET_ENTITY_ROTATION(iLocal_49, 2) };
					ENTITY::ATTACH_ENTITY_TO_ENTITY(uLocal_309[0], iLocal_49, 0, Local_431, Local_434, 1, 0, 1, 0, 2, 1);
					ENTITY::DETACH_ENTITY(iLocal_49, 1, 1);
					HUD::REMOVE_BLIP(&uLocal_307);
					PAD::SET_PAD_SHAKE(0, 250, 125);
					iLocal_488 = 1;
					iLocal_465 = 0;
					Local_261.f_5 = GlobalFunc_5104(Local_489, 0);
					AUDIO::TRIGGER_MUSIC_EVENT("FHPRD_TRAIN");
					VEHICLE::_SET_HELICOPTER_ROLL_PITCH_YAW_MULT(iLocal_49, 0.5f);
					AUDIO::STOP_SOUND(iLocal_487);
					AUDIO::PLAY_SOUND_FROM_ENTITY(-1, "TRAIN_PICK_UP_MASTER", iLocal_49, 0, 0, 0);
					func_109(1);
					func_108(0);
					ENTITY::FREEZE_ENTITY_POSITION(uLocal_309[0], 0);
					ENTITY::SET_ENTITY_COLLISION(uLocal_309[0], 0, 0);
					ENTITY::SET_ENTITY_NO_COLLISION_ENTITY(iLocal_49, uLocal_309[1], 1);
					SYSTEM::SETTIMERA(0);
					iLocal_260++;
				}
			}
			else if (HUD::IS_HELP_MESSAGE_BEING_DISPLAYED() && !ENTITY::IS_ENTITY_AT_ENTITY(iLocal_49, uLocal_309[0], 6.4f, 6.4f, 9f, 0, 1, 0))
			{
				iLocal_488 = 0;
				HUD::CLEAR_HELP(1);
			}
			break;
		
		case 5:
		case 6:
		case 7:
			if (iLocal_260 == 5 && SYSTEM::TIMERA() > 2000)
			{
				iLocal_260 = 6;
			}
			if (iLocal_260 == 6)
			{
				if (!GlobalFunc_5172(&Local_261, 1))
				{
					if (func_130("BSPRP_PICKUP", "BSPRP_PICKF", "BSPRP_PICKT"))
					{
						iLocal_260 = 7;
					}
				}
			}
			Local_437 = { GlobalFunc_721(Local_431, Local_443, fLocal_464) };
			Local_440 = { GlobalFunc_721(Local_434, 0f, 0f, 0f, fLocal_464) };
			if (fLocal_464 < 1f)
			{
				fLocal_464 = (fLocal_464 + (2f * SYSTEM::TIMESTEP()));
			}
			else
			{
				if (iLocal_465 == 0)
				{
					AUDIO::PLAY_SOUND_FROM_ENTITY(-1, "TRAIN_PICK_UP_IMPACT_MASTER", uLocal_309[0], 0, 0, 0);
					iLocal_465 = 1;
				}
				fLocal_464 = 1f;
			}
			ENTITY::ATTACH_ENTITY_TO_ENTITY(uLocal_309[0], iLocal_49, 0, Local_437, Local_440, 1, 0, 1, 0, 2, 1);
			if (ENTITY::IS_ENTITY_IN_ANGLED_AREA(iLocal_49, 1784.349f, 3178.339f, 37.75751f, 1703.871f, 3326.289f, 90.46593f, 174.75f, 0, 1, 0))
			{
				if (iLocal_496 == 0)
				{
					if (!ENTITY::IS_ENTITY_DEAD(iLocal_289))
					{
						ENTITY::FREEZE_ENTITY_POSITION(iLocal_289, 1);
					}
					if (!ENTITY::IS_ENTITY_DEAD(iLocal_288))
					{
						ENTITY::FREEZE_ENTITY_POSITION(iLocal_288, 1);
					}
					GlobalFunc_7139(&Local_261, 0);
					uLocal_493 = GlobalFunc_6783(iLocal_289, 0, 0);
					GlobalFunc_164("TAKEENGINE2", 7500, 1);
					iLocal_496 = 1;
				}
				if ((ENTITY::IS_ENTITY_IN_ANGLED_AREA(uLocal_309[0], 1765.117f, 3250.88f, 40.71886f, 1788.482f, 3251.8f, 50.44458f, 7.75f, 0, 1, 0) && !ENTITY::IS_ENTITY_DEAD(iLocal_289)) && SYSTEM::VMAG(ENTITY::GET_ENTITY_VELOCITY(iLocal_49)) < 3f)
				{
					if (GlobalFunc_1575(ENTITY::GET_ENTITY_HEADING(iLocal_49), ENTITY::GET_ENTITY_HEADING(iLocal_289), 20f) || GlobalFunc_1575(ENTITY::GET_ENTITY_HEADING(iLocal_49), (ENTITY::GET_ENTITY_HEADING(iLocal_289) - 180f), 20f))
					{
						GlobalFunc_7139(&Local_261, 0);
						if (iLocal_488)
						{
							GlobalFunc_159("MAGNETOFF", -1);
							if (HUD::IS_MESSAGE_BEING_DISPLAYED())
							{
								HUD::CLEAR_PRINTS();
							}
							iLocal_488 = 0;
						}
						if (PAD::IS_CONTROL_JUST_PRESSED(0, 103))
						{
							VEHICLE::_SET_HELICOPTER_ROLL_PITCH_YAW_MULT(iLocal_49, 1f);
							ENTITY::DETACH_ENTITY(uLocal_309[0], 0, 1);
							ENTITY::SET_ENTITY_COLLISION(uLocal_309[0], 0, 0);
							ENTITY::DETACH_ENTITY(iLocal_49, 1, 1);
							SYSTEM::SETTIMERA(0);
							func_108(0);
							func_109(0);
							func_105(0);
							GlobalFunc_7139(&Local_261, 0);
							iLocal_465 = 0;
							fLocal_464 = 0f;
							Local_431 = { ENTITY::GET_OFFSET_FROM_ENTITY_GIVEN_WORLD_COORDS(iLocal_289, ENTITY::GET_ENTITY_COORDS(uLocal_309[0], 1)) };
							Local_434 = { ENTITY::GET_ENTITY_ROTATION(uLocal_309[0], 2) - ENTITY::GET_ENTITY_ROTATION(iLocal_289, 2) };
							Local_478 = { ENTITY::GET_ENTITY_ROTATION(uLocal_309[0], 2) };
							Local_481 = { ENTITY::GET_ENTITY_ROTATION(iLocal_289, 2) };
							if ((Local_478.f_2 - Local_481.f_2) > 90f && (Local_478.f_2 - Local_481.f_2) < 270f)
							{
								Local_461.f_2 = 180f;
							}
							else
							{
								Local_461.f_2 = 0f;
							}
							if (HUD::IS_HELP_MESSAGE_BEING_DISPLAYED())
							{
								HUD::CLEAR_HELP(1);
							}
							if (HUD::DOES_BLIP_EXIST(uLocal_493))
							{
								HUD::REMOVE_BLIP(&uLocal_493);
							}
							AUDIO::TRIGGER_MUSIC_EVENT("FHPRD_STOP");
							HUD::CLEAR_HELP(1);
							iLocal_260++;
						}
					}
					else if (HUD::IS_HELP_MESSAGE_BEING_DISPLAYED())
					{
						HUD::CLEAR_HELP(1);
						iLocal_488 = 1;
					}
				}
				else if (HUD::IS_HELP_MESSAGE_BEING_DISPLAYED())
				{
					HUD::CLEAR_HELP(1);
					iLocal_488 = 1;
				}
			}
			else
			{
				if (iLocal_496 == 1)
				{
					HUD::CLEAR_PRINTS();
					iLocal_496 = 0;
					if (HUD::DOES_BLIP_EXIST(uLocal_493))
					{
						HUD::REMOVE_BLIP(&uLocal_493);
					}
					MISC::SET_BIT(&(Local_261.f_13), 2);
				}
				iLocal_488 = 1;
				if (iLocal_496 == 0)
				{
					GlobalFunc_9197(&Local_261, Local_489, 0.1f, 0.1f, 3f, 0, iLocal_49, "TAKEENGINE", "BSD_GETINCHOP", "BSD_GETINCHOP", 0, 0, 1, -1);
				}
				else
				{
					GlobalFunc_7139(&Local_261, 0);
				}
			}
			break;
		
		case 8:
			func_59(2.75f);
			if (SYSTEM::TIMERA() > 0)
			{
				func_109(0);
				ENTITY::SET_ENTITY_COLLISION(uLocal_309[0], 1, 0);
				iVar0 = 0;
				while (iVar0 <= 8)
				{
					if (ENTITY::GET_ENTITY_MODEL(uLocal_309[iVar0]) == joaat("freightcar"))
					{
						uLocal_468[iVar0] = GlobalFunc_6783(uLocal_309[iVar0], 0, 0);
					}
					iVar0++;
				}
				GlobalFunc_7139(&Local_261, 0);
				SYSTEM::SETTIMERA(0);
				iLocal_260++;
			}
			break;
		
		case 9:
			func_59(2.75f);
			if (func_48("BSPRP_COMINM", "", "BSPRP_COMINB"))
			{
				iLocal_260++;
			}
			break;
		
		case 10:
			func_59(2.75f);
			if (SYSTEM::TIMERA() > 2000 && !GlobalFunc_5172(&Local_261, 1))
			{
				GlobalFunc_164("GETCARRIAGE", 7500, 1);
				iLocal_487 = 0;
				Local_461.f_2 = 0f;
				iLocal_260++;
			}
			break;
		
		case 11:
			if (!PED::IS_PED_INJURED(iLocal_287) && !ENTITY::IS_ENTITY_DEAD(iLocal_288))
			{
				if (GlobalFunc_156(PLAYER::PLAYER_PED_ID(), iLocal_287, 1) > 25f)
				{
					if (TASK::GET_SCRIPT_TASK_STATUS(iLocal_287, 567490903) != 1)
					{
						if (!ENTITY::IS_ENTITY_DEAD(iLocal_288))
						{
							ENTITY::FREEZE_ENTITY_POSITION(iLocal_289, 0);
							ENTITY::FREEZE_ENTITY_POSITION(iLocal_288, 0);
							PED::SET_PED_KEEP_TASK(iLocal_287, 1);
							VEHICLE::_SET_VEHICLE_HANDLING_HASH_FOR_AI(iLocal_288, 15000);
							TASK::TASK_VEHICLE_DRIVE_TO_COORD_LONGRANGE(iLocal_287, iLocal_288, 2598.556f, 1639.353f, 27.0148f, 15f, 786469, 5f);
						}
					}
				}
			}
			bVar2 = false;
			iVar0 = 0;
			while (iVar0 <= 8)
			{
				if (ENTITY::GET_ENTITY_MODEL(uLocal_309[iVar0]) == joaat("freightcar"))
				{
					if (GlobalFunc_1575(ENTITY::GET_ENTITY_HEADING(iLocal_49), ENTITY::GET_ENTITY_HEADING(uLocal_309[iVar0]), 22f))
					{
						iLocal_497 = 1;
					}
					else
					{
						iLocal_497 = 0;
					}
					if (GlobalFunc_1575((ENTITY::GET_ENTITY_HEADING(iLocal_49) + 180f), ENTITY::GET_ENTITY_HEADING(uLocal_309[iVar0]), 22f))
					{
						bLocal_498 = true;
					}
					else
					{
						bLocal_498 = false;
					}
					if (ENTITY::IS_ENTITY_AT_ENTITY(iLocal_49, uLocal_309[iVar0], 6.1f, 6.1f, 8f, 0, 1, 0) && (bLocal_498 || iLocal_497))
					{
						bVar2 = true;
						if (iLocal_488 == 0)
						{
							GlobalFunc_159("MAGNETON", -1);
							iLocal_488 = 1;
						}
						func_125(uLocal_309[iVar0]);
						if (iLocal_319[iVar0] == 0)
						{
							iLocal_319[iVar0] = AUDIO::GET_SOUND_ID();
							AUDIO::PLAY_SOUND_FROM_ENTITY(iLocal_319[iVar0], "ELECTRO_MAGNET_DRONE_MASTER", uLocal_309[iVar0], 0, 0, 0);
						}
						if (PAD::IS_CONTROL_JUST_PRESSED(0, 103))
						{
							if (bLocal_498)
							{
								Local_446 = { Local_452 };
								Local_449 = { Local_455 };
							}
							else
							{
								Local_446 = { Local_446 };
								Local_449 = { Local_449 };
							}
							Local_431 = { ENTITY::GET_OFFSET_FROM_ENTITY_GIVEN_WORLD_COORDS(iLocal_49, ENTITY::GET_ENTITY_COORDS(uLocal_309[iVar0], 1)) };
							Local_434 = { ENTITY::GET_ENTITY_ROTATION(iLocal_49, 2) - ENTITY::GET_ENTITY_ROTATION(uLocal_309[iVar0], 2) };
							Local_437 = { GlobalFunc_721(Local_431, Local_446, 0f) };
							Local_440 = { GlobalFunc_721(Local_434, Local_449, 0f) };
							ENTITY::FREEZE_ENTITY_POSITION(uLocal_309[iVar0], 0);
							ENTITY::ATTACH_ENTITY_TO_ENTITY(uLocal_309[iVar0], iLocal_49, 0, Local_437, Local_440, 1, 0, 1, 0, 2, 1);
							func_105(1);
							func_109(0);
							func_108(1);
							if (iVar0 < 8)
							{
								ENTITY::SET_ENTITY_NO_COLLISION_ENTITY(uLocal_309[iVar0 + 1], iLocal_49, 1);
							}
							if (iVar0 >= 1)
							{
								ENTITY::SET_ENTITY_NO_COLLISION_ENTITY(uLocal_309[(iVar0 - 1)], iLocal_49, 1);
							}
							ENTITY::SET_ENTITY_COLLISION(uLocal_309[iVar0], 0, 0);
							iLocal_465 = 0;
							iLocal_496 = 0;
							iVar1 = 0;
							while (iVar1 <= 8)
							{
								HUD::REMOVE_BLIP(&(uLocal_468[iVar1]));
								iVar1++;
							}
							Local_261.f_5 = GlobalFunc_5104(Local_489, 0);
							VEHICLE::_SET_HELICOPTER_ROLL_PITCH_YAW_MULT(iLocal_49, 0.5f);
							AUDIO::STOP_SOUND(iLocal_319[iVar0]);
							AUDIO::PLAY_SOUND_FROM_ENTITY(-1, "TRAIN_PICK_UP_MASTER", iLocal_49, 0, 0, 0);
							iLocal_492 = iVar0;
							iLocal_292 = VEHICLE::CREATE_VEHICLE(joaat("freighttrailer"), 1784.267f, 3280.558f, 40.856f, 265.7362f, 1, 1);
							ENTITY::SET_ENTITY_PROOFS(iLocal_292, 0, 0, 0, 1, 0, 0, 0, 0);
							iLocal_291 = VEHICLE::CREATE_VEHICLE(joaat("phantom"), ENTITY::GET_OFFSET_FROM_ENTITY_IN_WORLD_COORDS(iLocal_292, 0f, 11f, -1.2f), (ENTITY::GET_ENTITY_HEADING(iLocal_292) + 5f), 1, 1);
							ENTITY::SET_ENTITY_COORDS_NO_OFFSET(iLocal_291, ENTITY::GET_OFFSET_FROM_ENTITY_IN_WORLD_COORDS(iLocal_292, 0f, 11f, -1.2f), 0, 0, 1);
							VEHICLE::SET_VEHICLE_ON_GROUND_PROPERLY(iLocal_291);
							ENTITY::SET_ENTITY_PROOFS(iLocal_291, 0, 0, 0, 1, 0, 0, 0, 0);
							iLocal_290 = func_111(4, 1, 1776.717f, 3252.036f, 40.9069f, 0f, 0, 1);
							PED::SET_PED_INTO_VEHICLE(iLocal_290, iLocal_291, -1);
							PED::SET_BLOCKING_OF_NON_TEMPORARY_EVENTS(iLocal_290, 1);
							VEHICLE::SET_VEHICLE_DOORS_LOCKED(iLocal_291, 2);
							VEHICLE::SET_VEHICLE_IS_CONSIDERED_BY_PLAYER(iLocal_291, 0);
							VEHICLE::ATTACH_VEHICLE_TO_TRAILER(iLocal_291, iLocal_292, 1065353216);
							fLocal_464 = 0f;
							iLocal_260++;
						}
					}
					else
					{
						iLocal_319[iVar0] = 0;
						AUDIO::STOP_SOUND(iLocal_319[iVar0]);
					}
				}
				iVar0++;
			}
			if (((((((((!ENTITY::IS_ENTITY_AT_ENTITY(iLocal_49, uLocal_309[0], 6.1f, 6.1f, 8f, 0, 1, 0) && !ENTITY::IS_ENTITY_AT_ENTITY(iLocal_49, uLocal_309[1], 6.1f, 6.1f, 8f, 0, 1, 0)) && !ENTITY::IS_ENTITY_AT_ENTITY(iLocal_49, uLocal_309[2], 6.1f, 6.1f, 8f, 0, 1, 0)) && !ENTITY::IS_ENTITY_AT_ENTITY(iLocal_49, uLocal_309[3], 6.1f, 6.1f, 8f, 0, 1, 0)) && !ENTITY::IS_ENTITY_AT_ENTITY(iLocal_49, uLocal_309[4], 6.1f, 6.1f, 8f, 0, 1, 0)) && !ENTITY::IS_ENTITY_AT_ENTITY(iLocal_49, uLocal_309[5], 6.1f, 6.1f, 8f, 0, 1, 0)) && !ENTITY::IS_ENTITY_AT_ENTITY(iLocal_49, uLocal_309[6], 6.1f, 6.1f, 8f, 0, 1, 0)) && !ENTITY::IS_ENTITY_AT_ENTITY(iLocal_49, uLocal_309[7], 6.1f, 6.1f, 8f, 0, 1, 0)) && !ENTITY::IS_ENTITY_AT_ENTITY(iLocal_49, uLocal_309[8], 6.1f, 6.1f, 8f, 0, 1, 0)) || !bVar2)
			{
				if (iLocal_488 == 1)
				{
					if (HUD::IS_HELP_MESSAGE_BEING_DISPLAYED())
					{
						HUD::CLEAR_HELP(1);
						iLocal_488 = 0;
					}
				}
			}
			break;
		
		case 12:
		case 13:
		case 14:
			if (iLocal_260 == 12)
			{
				if (func_130("BSPRP_FLATGO", "BSPRP_FLATGO", "BSPRP_FLATM"))
				{
					iLocal_260 = 13;
				}
			}
			if (iLocal_260 == 13)
			{
				if (!GlobalFunc_5172(&Local_261, 2))
				{
					GlobalFunc_164("TAKEFLATBED", 7500, 1);
					iLocal_260 = 14;
				}
			}
			Local_437 = { GlobalFunc_721(Local_431, Local_446, fLocal_464) };
			Local_440 = { GlobalFunc_721(Local_434, Local_449, fLocal_464) };
			if (fLocal_464 < 1f)
			{
				fLocal_464 = (fLocal_464 + (2.5f * SYSTEM::TIMESTEP()));
			}
			else
			{
				if (iLocal_465 == 0)
				{
					AUDIO::PLAY_SOUND_FROM_ENTITY(-1, "TRAIN_PICK_UP_IMPACT_MASTER", iLocal_49, 0, 0, 0);
					RECORDING::_0x293220DA1B46CEBC(3.5f, 4f, 4);
					iLocal_465 = 1;
				}
				fLocal_464 = 1f;
			}
			ENTITY::ATTACH_ENTITY_TO_ENTITY(uLocal_309[iLocal_492], iLocal_49, 0, Local_437, Local_440, 1, 0, 1, 0, 2, 1);
			if (ENTITY::IS_ENTITY_IN_ANGLED_AREA(iLocal_49, 1784.349f, 3178.339f, 37.75751f, 1703.871f, 3326.289f, 90.46593f, 174.75f, 0, 1, 0))
			{
				if (iLocal_496 == 0)
				{
					GlobalFunc_7139(&Local_261, 0);
					uLocal_493 = GlobalFunc_6783(iLocal_292, 0, 0);
					if (!ENTITY::IS_ENTITY_DEAD(iLocal_292))
					{
						ENTITY::FREEZE_ENTITY_POSITION(iLocal_292, 1);
					}
					if (!ENTITY::IS_ENTITY_DEAD(iLocal_291))
					{
						ENTITY::FREEZE_ENTITY_POSITION(iLocal_291, 1);
					}
					iLocal_496 = 1;
				}
				if ((ENTITY::IS_ENTITY_IN_ANGLED_AREA(uLocal_309[iLocal_492], 1773.062f, 3279.321f, 40.5005f, 1795.292f, 3279.466f, 50.55474f, 7.75f, 0, 1, 0) && !ENTITY::IS_ENTITY_DEAD(iLocal_292)) && (GlobalFunc_1575(ENTITY::GET_ENTITY_HEADING(iLocal_49), ENTITY::GET_ENTITY_HEADING(iLocal_292), 20f) || GlobalFunc_1575(ENTITY::GET_ENTITY_HEADING(iLocal_49), (ENTITY::GET_ENTITY_HEADING(iLocal_292) - 180f), 20f)))
				{
					GlobalFunc_7139(&Local_261, 0);
					if (iLocal_488)
					{
						GlobalFunc_159("MAGNETOFF", -1);
						if (HUD::IS_MESSAGE_BEING_DISPLAYED())
						{
							HUD::CLEAR_PRINTS();
						}
						iLocal_488 = 0;
					}
					if (PAD::IS_CONTROL_JUST_PRESSED(0, 103))
					{
						RECORDING::_0x293220DA1B46CEBC(4f, 8f, 4);
						VEHICLE::_SET_HELICOPTER_ROLL_PITCH_YAW_MULT(iLocal_49, 1f);
						ENTITY::DETACH_ENTITY(uLocal_309[iLocal_492], 0, 1);
						ENTITY::DETACH_ENTITY(iLocal_49, 1, 1);
						GlobalFunc_7139(&Local_261, 0);
						func_108(0);
						SYSTEM::SETTIMERA(0);
						AUDIO::TRIGGER_MUSIC_EVENT("FHPRD_STOP");
						iLocal_465 = 0;
						fLocal_464 = 0f;
						Local_431 = { ENTITY::GET_OFFSET_FROM_ENTITY_GIVEN_WORLD_COORDS(iLocal_292, ENTITY::GET_ENTITY_COORDS(uLocal_309[iLocal_492], 1)) };
						Local_434 = { ENTITY::GET_ENTITY_ROTATION(uLocal_309[iLocal_492], 2) - ENTITY::GET_ENTITY_ROTATION(iLocal_292, 2) };
						Local_478 = { ENTITY::GET_ENTITY_ROTATION(uLocal_309[iLocal_492], 2) };
						Local_481 = { ENTITY::GET_ENTITY_ROTATION(iLocal_292, 2) };
						if ((Local_478.f_2 - Local_481.f_2) > 90f && (Local_478.f_2 - Local_481.f_2) < 270f)
						{
							Local_461.f_2 = 180f;
						}
						else
						{
							Local_461.f_2 = 0f;
						}
						iLocal_260 = 15;
					}
				}
				else if (HUD::IS_HELP_MESSAGE_BEING_DISPLAYED())
				{
					HUD::CLEAR_HELP(1);
					iLocal_488 = 1;
				}
			}
			else
			{
				if (HUD::IS_HELP_MESSAGE_BEING_DISPLAYED())
				{
					HUD::CLEAR_HELP(1);
					iLocal_488 = 1;
				}
				if (iLocal_496 == 1)
				{
					HUD::CLEAR_PRINTS();
					iLocal_496 = 0;
					if (HUD::DOES_BLIP_EXIST(uLocal_493))
					{
						HUD::REMOVE_BLIP(&uLocal_493);
					}
					MISC::SET_BIT(&(Local_261.f_13), 2);
				}
				iLocal_488 = 1;
				if (iLocal_496 == 0)
				{
					GlobalFunc_9197(&Local_261, Local_489, 0.1f, 0.1f, 3f, 0, iLocal_49, "TAKEFLATBED", "BSD_GETINCHOP", "BSD_GETINCHOP", 0, 0, 1, -1);
				}
				else
				{
					GlobalFunc_7139(&Local_261, 0);
				}
			}
			break;
		
		case 15:
			Local_437 = { GlobalFunc_721(Local_431, Local_484, fLocal_464) };
			Local_440 = { GlobalFunc_721(Local_434, Local_461, fLocal_464) };
			if (fLocal_464 < 1f)
			{
				fLocal_464 = (fLocal_464 + (1.75f * SYSTEM::TIMESTEP()));
			}
			else
			{
				if (iLocal_465 == 0)
				{
					AUDIO::PLAY_SOUND_FROM_ENTITY(-1, "TRAIN_PICK_UP_IMPACT_MASTER", uLocal_309[iLocal_492], 0, 0, 0);
					func_109(0);
					func_108(0);
					SYSTEM::SETTIMERA(0);
					ENTITY::SET_ENTITY_COLLISION(uLocal_309[iLocal_492], 1, 0);
					HUD::REMOVE_BLIP(&uLocal_493);
					iLocal_465 = 1;
				}
				fLocal_464 = 1f;
			}
			if (!ENTITY::IS_ENTITY_DEAD(uLocal_309[iLocal_492]) && !ENTITY::IS_ENTITY_DEAD(iLocal_292))
			{
				ENTITY::ATTACH_ENTITY_TO_ENTITY(uLocal_309[iLocal_492], iLocal_292, 0, Local_437, Local_440, 1, 0, 1, 0, 2, 1);
			}
			if ((!PED::IS_PED_INJURED(iLocal_290) && !ENTITY::IS_ENTITY_DEAD(iLocal_291)) && iLocal_465 == 1)
			{
				if (GlobalFunc_156(PLAYER::PLAYER_PED_ID(), iLocal_290, 1) > 15f || SYSTEM::TIMERA() > 15000)
				{
					if (TASK::GET_SCRIPT_TASK_STATUS(iLocal_290, 567490903) != 1)
					{
						ENTITY::FREEZE_ENTITY_POSITION(iLocal_292, 0);
						ENTITY::FREEZE_ENTITY_POSITION(iLocal_291, 0);
						VEHICLE::_SET_VEHICLE_HANDLING_HASH_FOR_AI(iLocal_291, 15000);
						TASK::TASK_VEHICLE_DRIVE_TO_COORD_LONGRANGE(iLocal_290, iLocal_291, 2598.556f, 1639.353f, 27.0148f, 15f, 786469, 5f);
						PED::SET_PED_KEEP_TASK(iLocal_290, 1);
						AUDIO::TRIGGER_MUSIC_EVENT("FHPRD_END");
						if (AUDIO::IS_AUDIO_SCENE_ACTIVE("BS_P_D_FLY_CHOPPER"))
						{
							AUDIO::STOP_AUDIO_SCENE("BS_P_D_FLY_CHOPPER");
						}
						iLocal_260 = 0;
						iLocal_286 = 7;
					}
				}
			}
			break;
	}
}


int func_48(char* sParam0, char* sParam1, char* sParam2)//Position - 0x31D3
{
	if (func_211())
	{
		return GlobalFunc_10618(&uLocal_95, "BSPRP", sParam0, 9, 0, 0, 0);
	}
	else if (func_49())
	{
		return GlobalFunc_10618(&uLocal_95, "BSPRP", sParam1, 9, 0, 0, 0);
	}
	else if (func_209())
	{
		return GlobalFunc_10618(&uLocal_95, "BSPRP", sParam2, 9, 0, 0, 0);
	}
	return 0;
}

bool func_49()//Position - 0x3233
{
	return GlobalFunc_8315() == 1;
}










void func_59(float fParam0)//Position - 0x3843
{
	Local_437 = { GlobalFunc_721(Local_431, Local_458, fLocal_464) };
	Local_440 = { GlobalFunc_721(Local_434, Local_461, fLocal_464) };
	if (fLocal_464 < 1f)
	{
		fLocal_464 = (fLocal_464 + (fParam0 * SYSTEM::TIMESTEP()));
	}
	else
	{
		if (iLocal_465 == 0)
		{
			AUDIO::PLAY_SOUND_FROM_ENTITY(-1, "TRAIN_PICK_UP_IMPACT_MASTER", iLocal_49, 0, 0, 0);
			RECORDING::_0x293220DA1B46CEBC(3.5f, 4f, 4);
			iLocal_465 = 1;
		}
		fLocal_464 = 1f;
	}
	if (!ENTITY::IS_ENTITY_DEAD(uLocal_309[0]) && !ENTITY::IS_ENTITY_DEAD(iLocal_289))
	{
		ENTITY::ATTACH_ENTITY_TO_ENTITY(uLocal_309[0], iLocal_289, 0, Local_437, Local_440, 1, 0, 1, 0, 2, 1);
	}
}














































void func_105(bool bParam0)//Position - 0x63AE
{
	VEHICLE::SET_VEHICLE_EXTRA(iLocal_49, 10, !bParam0);
}



void func_108(bool bParam0)//Position - 0x63ED
{
	VEHICLE::SET_VEHICLE_EXTRA(iLocal_49, 12, !bParam0);
}

void func_109(bool bParam0)//Position - 0x6400
{
	VEHICLE::SET_VEHICLE_EXTRA(iLocal_49, 11, !bParam0);
}


int func_111(int iParam0, int iParam1, struct<3> Param2, float fParam5, int iParam6, bool bParam7)//Position - 0x643F
{
	int iVar0;
	
	if (iParam0 < 0)
	{
		return 0;
	}
	if (iParam0 >= 5)
	{
		return 0;
	}
	iVar0 = GlobalFunc_5133(iParam0, iParam1);
	if ((iVar0 == 0 || iVar0 == 15) || iVar0 == 14)
	{
		return 0;
	}
	return GlobalFunc_7715(iVar0, Param2, fParam5, iParam6, bParam7);
}














void func_125(var uParam0)//Position - 0x7136
{
	switch (iLocal_466)
	{
		case 0:
			if ((MISC::GET_GAME_TIMER() - iLocal_467) > 7000)
			{
				if (ENTITY::IS_ENTITY_TOUCHING_ENTITY(iLocal_49, uParam0))
				{
					iLocal_466++;
				}
			}
			break;
		
		case 1:
			if (func_130("BSPRP_FLATBE", "BSPRP_FLATBF", "BSPRP_FLATBT"))
			{
				iLocal_467 = MISC::GET_GAME_TIMER();
				iLocal_466 = 0;
			}
			break;
	}
}

int func_126(int iParam0)//Position - 0x7197
{
	switch (iParam0)
	{
		case 2:
			if (((STREAMING::HAS_MODEL_LOADED(joaat("s_m_y_construct_01")) && STREAMING::HAS_ANIM_DICT_LOADED("missbigscoreprep")) && STREAMING::HAS_MODEL_LOADED(joaat("prop_ld_rail_01"))) && STREAMING::HAS_MODEL_LOADED(joaat("prop_ld_rail_02")))
			{
				return 1;
			}
			break;
		
		case 3:
			if ((((((((STREAMING::HAS_MODEL_LOADED(joaat("s_m_y_construct_01")) && STREAMING::HAS_MODEL_LOADED(joaat("freight"))) && STREAMING::HAS_MODEL_LOADED(joaat("freightcont1"))) && STREAMING::HAS_MODEL_LOADED(joaat("freightcont2"))) && STREAMING::HAS_MODEL_LOADED(joaat("freightgrain"))) && STREAMING::HAS_MODEL_LOADED(joaat("tankercar"))) && STREAMING::HAS_MODEL_LOADED(joaat("freightcar"))) && AUDIO::REQUEST_AMBIENT_AUDIO_BANK("BIG_SCORE_PREP_D", 0)) && STREAMING::HAS_ANIM_DICT_LOADED("missbigscoreprepd"))
			{
				return 1;
			}
			break;
		
		case 4:
			if ((((((((STREAMING::HAS_MODEL_LOADED(joaat("s_m_y_construct_01")) && STREAMING::HAS_MODEL_LOADED(joaat("skylift"))) && VEHICLE::HAS_VEHICLE_RECORDING_BEEN_LOADED(1, "BSPrepheli")) && STREAMING::HAS_MODEL_LOADED(joaat("freight"))) && STREAMING::HAS_MODEL_LOADED(joaat("freightcont1"))) && STREAMING::HAS_MODEL_LOADED(joaat("freightcont2"))) && STREAMING::HAS_MODEL_LOADED(joaat("freightgrain"))) && STREAMING::HAS_MODEL_LOADED(joaat("tankercar"))) && STREAMING::HAS_MODEL_LOADED(joaat("freightcar")))
			{
				return 1;
			}
			break;
		
		case 5:
			if ((((((((STREAMING::HAS_MODEL_LOADED(joaat("s_m_y_construct_01")) && STREAMING::HAS_MODEL_LOADED(joaat("skylift"))) && VEHICLE::HAS_VEHICLE_RECORDING_BEEN_LOADED(1, "BSPrepheli")) && STREAMING::HAS_MODEL_LOADED(joaat("freight"))) && STREAMING::HAS_MODEL_LOADED(joaat("freightcont1"))) && STREAMING::HAS_MODEL_LOADED(joaat("freightcont2"))) && STREAMING::HAS_MODEL_LOADED(joaat("freightgrain"))) && STREAMING::HAS_MODEL_LOADED(joaat("tankercar"))) && STREAMING::HAS_MODEL_LOADED(joaat("freightcar")))
			{
				return 1;
			}
			break;
		
		case 6:
			if ((((((((((STREAMING::HAS_MODEL_LOADED(joaat("s_m_y_construct_01")) && STREAMING::HAS_MODEL_LOADED(joaat("skylift"))) && STREAMING::HAS_MODEL_LOADED(joaat("freight"))) && STREAMING::HAS_MODEL_LOADED(joaat("freightcont1"))) && STREAMING::HAS_MODEL_LOADED(joaat("freightcont2"))) && STREAMING::HAS_MODEL_LOADED(joaat("freightgrain"))) && STREAMING::HAS_MODEL_LOADED(joaat("tankercar"))) && STREAMING::HAS_MODEL_LOADED(joaat("freightcar"))) && STREAMING::HAS_MODEL_LOADED(joaat("freighttrailer"))) && STREAMING::HAS_MODEL_LOADED(joaat("phantom"))) && GlobalFunc_3038(GlobalFunc_5133(4, 0)))
			{
				return 1;
			}
			break;
	}
	return 0;
}




int func_130(char* sParam0, char* sParam1, char* sParam2)//Position - 0x746F
{
	if (uLocal_51.f_5 == 0)
	{
		return GlobalFunc_10618(&uLocal_95, "BSPRP", sParam0, 9, 0, 0, 0);
	}
	else if (uLocal_51.f_5 == 1)
	{
		return GlobalFunc_10618(&uLocal_95, "BSPRP", sParam1, 9, 0, 0, 0);
	}
	else if (uLocal_51.f_5 == 2)
	{
		return GlobalFunc_10618(&uLocal_95, "BSPRP", sParam2, 9, 0, 0, 0);
	}
	return 0;
}






void func_136(int iParam0)//Position - 0x7599
{
	switch (iParam0)
	{
		case 2:
			STREAMING::REQUEST_MODEL(joaat("s_m_y_construct_01"));
			STREAMING::REQUEST_ANIM_DICT("missbigscoreprep");
			STREAMING::REQUEST_MODEL(joaat("prop_ld_rail_01"));
			STREAMING::REQUEST_MODEL(joaat("prop_ld_rail_02"));
			break;
		
		case 3:
			STREAMING::REQUEST_MODEL(joaat("s_m_y_construct_01"));
			STREAMING::REQUEST_MODEL(joaat("freight"));
			STREAMING::REQUEST_MODEL(joaat("freightcont1"));
			STREAMING::REQUEST_MODEL(joaat("freightcont2"));
			STREAMING::REQUEST_MODEL(joaat("freightgrain"));
			STREAMING::REQUEST_MODEL(joaat("tankercar"));
			STREAMING::REQUEST_MODEL(joaat("freightcar"));
			STREAMING::REQUEST_ANIM_DICT("missbigscoreprepd");
			AUDIO::REQUEST_AMBIENT_AUDIO_BANK("BIG_SCORE_PREP_D", 0);
			break;
		
		case 4:
			STREAMING::REQUEST_MODEL(joaat("s_m_y_construct_01"));
			VEHICLE::REQUEST_VEHICLE_RECORDING(1, "BSPrepheli");
			STREAMING::REQUEST_MODEL(joaat("skylift"));
			STREAMING::REQUEST_MODEL(joaat("freight"));
			STREAMING::REQUEST_MODEL(joaat("freightcont1"));
			STREAMING::REQUEST_MODEL(joaat("freightcont2"));
			STREAMING::REQUEST_MODEL(joaat("freightgrain"));
			STREAMING::REQUEST_MODEL(joaat("tankercar"));
			STREAMING::REQUEST_MODEL(joaat("freightcar"));
			break;
		
		case 5:
			STREAMING::REQUEST_MODEL(joaat("s_m_y_construct_01"));
			STREAMING::REQUEST_MODEL(joaat("skylift"));
			VEHICLE::REQUEST_VEHICLE_RECORDING(1, "BSPrepheli");
			STREAMING::REQUEST_MODEL(joaat("freight"));
			STREAMING::REQUEST_MODEL(joaat("freightcont1"));
			STREAMING::REQUEST_MODEL(joaat("freightcont2"));
			STREAMING::REQUEST_MODEL(joaat("freightgrain"));
			STREAMING::REQUEST_MODEL(joaat("tankercar"));
			STREAMING::REQUEST_MODEL(joaat("freightcar"));
			break;
		
		case 6:
			STREAMING::REQUEST_MODEL(joaat("s_m_y_construct_01"));
			STREAMING::REQUEST_MODEL(joaat("skylift"));
			STREAMING::REQUEST_MODEL(joaat("freight"));
			STREAMING::REQUEST_MODEL(joaat("freightcont1"));
			STREAMING::REQUEST_MODEL(joaat("freightcont2"));
			STREAMING::REQUEST_MODEL(joaat("freightgrain"));
			STREAMING::REQUEST_MODEL(joaat("tankercar"));
			STREAMING::REQUEST_MODEL(joaat("freightcar"));
			STREAMING::REQUEST_MODEL(joaat("freighttrailer"));
			STREAMING::REQUEST_MODEL(joaat("phantom"));
			GlobalFunc_3039(GlobalFunc_5133(4, 0));
			break;
	}
}









































































bool func_209()//Position - 0xE70C
{
	return GlobalFunc_8315() == 2;
}


bool func_211()//Position - 0xE7B5
{
	return GlobalFunc_8315() == 0;
}

void func_212()//Position - 0xE7C3
{
	switch (iLocal_423)
	{
		case 0:
			if (AUDIO::REQUEST_SCRIPT_AUDIO_BANK("BIG_SCORE_PREP_D_01", 0))
			{
				iLocal_423++;
			}
			break;
		
		case 1:
			if (!ENTITY::IS_ENTITY_DEAD(iLocal_49) && func_213())
			{
				Local_424 = { ENTITY::GET_ENTITY_ROTATION(iLocal_49, 2) };
				if (SYSTEM::VDIST(Local_427, Local_424) > 25.5f && AUDIO::HAS_SOUND_FINISHED(iLocal_430))
				{
					AUDIO::PLAY_SOUND_FROM_ENTITY(iLocal_430, "HELI_TURNING_MASTER", iLocal_49, 0, 0, 0);
					Local_427 = { Local_424 };
				}
			}
			break;
	}
}

int func_213()//Position - 0xE855
{
	int iVar0;
	
	iVar0 = 0;
	while (iVar0 <= 8)
	{
		if (!ENTITY::IS_ENTITY_DEAD(uLocal_309[iVar0]))
		{
			if (ENTITY::IS_ENTITY_ATTACHED_TO_ENTITY(uLocal_309[iVar0], iLocal_49) || ENTITY::IS_ENTITY_ATTACHED_TO_ENTITY(iLocal_49, uLocal_309[iVar0]))
			{
				return 1;
			}
		}
		iVar0++;
	}
	return 0;
}

void func_214()//Position - 0xE8A7
{
	if (!ENTITY::IS_ENTITY_DEAD(iLocal_50))
	{
		if (fLocal_306 < 60f)
		{
			if (MISC::IS_PC_VERSION())
			{
				if (!ENTITY::IS_ENTITY_ON_SCREEN(iLocal_50))
				{
					VEHICLE::SET_TRAIN_CRUISE_SPEED(iLocal_50, 30f);
					VEHICLE::SET_TRAIN_SPEED(iLocal_50, 30f);
				}
				else
				{
					VEHICLE::SET_TRAIN_CRUISE_SPEED(iLocal_50, GlobalFunc_551(30f, 0f, (1f / fLocal_306)));
					VEHICLE::SET_TRAIN_SPEED(iLocal_50, GlobalFunc_551(30f, 0f, (1f / fLocal_306)));
					if (fLocal_306 < 3f)
					{
						VEHICLE::SET_TRAIN_CRUISE_SPEED(iLocal_50, 0f);
						VEHICLE::SET_TRAIN_SPEED(iLocal_50, 0f);
					}
				}
			}
			else if (!ENTITY::IS_ENTITY_ON_SCREEN(iLocal_50))
			{
				VEHICLE::SET_TRAIN_CRUISE_SPEED(iLocal_50, 30f);
				VEHICLE::SET_TRAIN_SPEED(iLocal_50, 30f);
			}
			else
			{
				VEHICLE::SET_TRAIN_CRUISE_SPEED(iLocal_50, (0.33f * fLocal_306));
				VEHICLE::SET_TRAIN_SPEED(iLocal_50, (0.33f * fLocal_306));
			}
		}
	}
}


void func_216()//Position - 0xE988
{
	if (!ENTITY::IS_ENTITY_DEAD(iLocal_50))
	{
		Local_329[0 /*3*/] = { ENTITY::GET_ENTITY_COORDS(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 0), 1) };
		uLocal_309[0] = VEHICLE::CREATE_VEHICLE(joaat("freight"), Local_329[0 /*3*/], 0f, 1, 1);
		ENTITY::SET_ENTITY_COORDS_NO_OFFSET(uLocal_309[0], Local_329[0 /*3*/], 0, 0, 1);
		ENTITY::SET_ENTITY_ROTATION(uLocal_309[0], ENTITY::GET_ENTITY_ROTATION(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 0), 2), 2, 1);
		Local_329[1 /*3*/] = { ENTITY::GET_ENTITY_COORDS(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 1), 1) };
		uLocal_309[1] = VEHICLE::CREATE_VEHICLE(joaat("freightcar"), Local_329[1 /*3*/], 0f, 1, 1);
		ENTITY::SET_ENTITY_COORDS_NO_OFFSET(uLocal_309[1], Local_329[1 /*3*/], 0, 0, 1);
		ENTITY::SET_ENTITY_ROTATION(uLocal_309[1], ENTITY::GET_ENTITY_ROTATION(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 1), 2), 2, 1);
		Local_329[2 /*3*/] = { ENTITY::GET_ENTITY_COORDS(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 2), 1) };
		uLocal_309[2] = VEHICLE::CREATE_VEHICLE(joaat("freightcar"), Local_329[2 /*3*/], 0f, 1, 1);
		ENTITY::SET_ENTITY_COORDS_NO_OFFSET(uLocal_309[2], Local_329[2 /*3*/], 0, 0, 1);
		ENTITY::SET_ENTITY_ROTATION(uLocal_309[2], ENTITY::GET_ENTITY_ROTATION(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 2), 2), 2, 1);
		Local_329[3 /*3*/] = { ENTITY::GET_ENTITY_COORDS(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 3), 1) };
		uLocal_309[3] = VEHICLE::CREATE_VEHICLE(joaat("freightcar"), Local_329[3 /*3*/], 0f, 1, 1);
		ENTITY::SET_ENTITY_COORDS_NO_OFFSET(uLocal_309[3], Local_329[3 /*3*/], 0, 0, 1);
		ENTITY::SET_ENTITY_ROTATION(uLocal_309[3], ENTITY::GET_ENTITY_ROTATION(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 3), 2), 2, 1);
		Local_329[4 /*3*/] = { ENTITY::GET_ENTITY_COORDS(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 4), 1) };
		uLocal_309[4] = VEHICLE::CREATE_VEHICLE(joaat("freightcont2"), Local_329[4 /*3*/], 0f, 1, 1);
		ENTITY::SET_ENTITY_COORDS_NO_OFFSET(uLocal_309[4], Local_329[4 /*3*/], 0, 0, 1);
		ENTITY::SET_ENTITY_ROTATION(uLocal_309[4], ENTITY::GET_ENTITY_ROTATION(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 4), 2), 2, 1);
		Local_329[5 /*3*/] = { ENTITY::GET_ENTITY_COORDS(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 5), 1) };
		uLocal_309[5] = VEHICLE::CREATE_VEHICLE(joaat("freightcont2"), Local_329[5 /*3*/], 0f, 1, 1);
		ENTITY::SET_ENTITY_COORDS_NO_OFFSET(uLocal_309[5], Local_329[5 /*3*/], 0, 0, 1);
		ENTITY::SET_ENTITY_ROTATION(uLocal_309[5], ENTITY::GET_ENTITY_ROTATION(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 5), 2), 2, 1);
		Local_329[6 /*3*/] = { ENTITY::GET_ENTITY_COORDS(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 6), 1) };
		uLocal_309[6] = VEHICLE::CREATE_VEHICLE(joaat("freightcont2"), Local_329[6 /*3*/], 0f, 1, 1);
		ENTITY::SET_ENTITY_COORDS_NO_OFFSET(uLocal_309[6], Local_329[6 /*3*/], 0, 0, 1);
		ENTITY::SET_ENTITY_ROTATION(uLocal_309[6], ENTITY::GET_ENTITY_ROTATION(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 6), 2), 2, 1);
		Local_329[7 /*3*/] = { ENTITY::GET_ENTITY_COORDS(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 7), 1) };
		uLocal_309[7] = VEHICLE::CREATE_VEHICLE(joaat("freightcar"), Local_329[7 /*3*/], 0f, 1, 1);
		ENTITY::SET_ENTITY_COORDS_NO_OFFSET(uLocal_309[7], Local_329[7 /*3*/], 0, 0, 1);
		ENTITY::SET_ENTITY_ROTATION(uLocal_309[7], ENTITY::GET_ENTITY_ROTATION(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 7), 2), 2, 1);
		Local_329[8 /*3*/] = { ENTITY::GET_ENTITY_COORDS(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 8), 1) };
		uLocal_309[8] = VEHICLE::CREATE_VEHICLE(joaat("freightcar"), Local_329[8 /*3*/], 0f, 1, 1);
		ENTITY::SET_ENTITY_COORDS_NO_OFFSET(uLocal_309[8], Local_329[8 /*3*/], 0, 0, 1);
		ENTITY::SET_ENTITY_ROTATION(uLocal_309[8], ENTITY::GET_ENTITY_ROTATION(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 8), 2), 2, 1);
		VEHICLE::DELETE_MISSION_TRAIN(&iLocal_50);
	}
	ENTITY::FREEZE_ENTITY_POSITION(uLocal_309[0], 1);
	ENTITY::FREEZE_ENTITY_POSITION(uLocal_309[1], 1);
	ENTITY::FREEZE_ENTITY_POSITION(uLocal_309[2], 1);
	ENTITY::FREEZE_ENTITY_POSITION(uLocal_309[3], 1);
	ENTITY::FREEZE_ENTITY_POSITION(uLocal_309[4], 1);
	ENTITY::FREEZE_ENTITY_POSITION(uLocal_309[5], 1);
	ENTITY::FREEZE_ENTITY_POSITION(uLocal_309[6], 1);
	ENTITY::FREEZE_ENTITY_POSITION(uLocal_309[7], 1);
	ENTITY::FREEZE_ENTITY_POSITION(uLocal_309[8], 1);
}

void func_217()//Position - 0xED3F
{
	switch (iLocal_260)
	{
		case 0:
			GlobalFunc_Checkpoint3(2, "STAGE_WAIT_FOR_TRAIN_TO_STOP_IN_SIDING", 0, 0, 0, 1);
			if (func_211())
			{
				Global_Mission_Fail_State.f_12[0] = 0;
			}
			else if (func_49())
			{
				Global_Mission_Fail_State.f_12[0] = 1;
			}
			else if (func_209())
			{
				Global_Mission_Fail_State.f_12[0] = 2;
			}
			if (!AUDIO::IS_AUDIO_SCENE_ACTIVE("BS_P_D_STEALTH"))
			{
				AUDIO::START_AUDIO_SCENE("BS_P_D_STEALTH");
			}
			if (func_23())
			{
				GlobalFunc_729(&uLocal_51, 2, 0);
				GlobalFunc_2518(&uLocal_51, 2, 1);
			}
			else
			{
				GlobalFunc_729(&uLocal_51, 0, 0);
				GlobalFunc_2518(&uLocal_51, 0, 1);
			}
			RECORDING::_0x293220DA1B46CEBC(0f, 10f, 4);
			iLocal_260++;
			break;
		
		case 1:
			if (func_48("BSPRP_STOPM", "BSPRP_STOPF", "BSPRP_STOPT"))
			{
				iLocal_260++;
			}
			break;
		
		case 2:
			if (!GlobalFunc_5172(&Local_261, 1))
			{
				if (func_23())
				{
					GlobalFunc_164("BSPD_SW_T", 7500, 1);
				}
				else
				{
					GlobalFunc_164("BSPD_SW_M", 7500, 1);
				}
				iLocal_260++;
			}
			break;
		
		case 3:
			GlobalFunc_10061(&uLocal_51, 1, 1);
			func_291();
			if (func_23())
			{
				if (GlobalFunc_751(&uLocal_51, 2) || GlobalFunc_156(PLAYER::PLAYER_PED_ID(), uLocal_51[2], 1) < 200f)
				{
					GlobalFunc_9134(&uLocal_51, 2);
					Local_389.f_12 = uLocal_51[2];
					HUD::CLEAR_PRINTS();
					iLocal_260++;
				}
			}
			else if (GlobalFunc_751(&uLocal_51, 0) || GlobalFunc_156(PLAYER::PLAYER_PED_ID(), uLocal_51[uLocal_51.f_5], 1) < 200f)
			{
				GlobalFunc_9134(&uLocal_51, uLocal_51.f_5);
				Local_389.f_12 = uLocal_51[uLocal_51.f_5];
				HUD::CLEAR_PRINTS();
				iLocal_260++;
			}
			break;
		
		case 4:
			if (func_267(&Local_389, 0, 1148829696, 1148829696))
			{
				if (Local_389.f_18)
				{
					if (!Local_389.f_19)
					{
						if (func_218(&uLocal_51, 1, 0, 0))
						{
							if (!ENTITY::IS_ENTITY_DEAD(iLocal_49))
							{
								ENTITY::FREEZE_ENTITY_POSITION(iLocal_49, 0);
							}
							Local_389.f_19 = 1;
						}
					}
				}
			}
			else
			{
				iLocal_260++;
			}
			break;
		
		case 5:
			func_45();
			func_136(5);
			iLocal_260++;
			break;
		
		case 6:
			if (func_126(5))
			{
				func_45();
				if (func_23())
				{
					GlobalFunc_9134(&uLocal_51, 2);
				}
				else
				{
					GlobalFunc_9134(&uLocal_51, 0);
				}
				if (AUDIO::IS_AUDIO_SCENE_ACTIVE("BS_P_D_STEALTH"))
				{
					AUDIO::STOP_AUDIO_SCENE("BS_P_D_STEALTH");
				}
				if (!AUDIO::IS_AUDIO_SCENE_ACTIVE("BS_P_D_FLY_CHOPPER"))
				{
					AUDIO::START_AUDIO_SCENE("BS_P_D_FLY_CHOPPER");
				}
				iLocal_260 = 0;
				iLocal_286 = 6;
			}
			break;
	}
	if (!ENTITY::IS_ENTITY_DEAD(iLocal_50))
	{
		fLocal_306 = MISC::GET_DISTANCE_BETWEEN_COORDS(Local_357, ENTITY::GET_ENTITY_COORDS(iLocal_50, 1), 1);
		if (fLocal_306 < 1.5f)
		{
			VEHICLE::SET_TRAIN_CRUISE_SPEED(iLocal_50, 0f);
			VEHICLE::SET_TRAIN_SPEED(iLocal_50, 0f);
			func_216();
		}
		else
		{
			func_214();
		}
	}
}

int func_218(var uParam0, bool bParam1, bool bParam2, int iParam3)//Position - 0xF01C
{
	int iVar0;
	int iVar1;
	int iVar2;
	float fVar3;
	int iVar4;
	int iVar5;
	char cVar6[64];
	int iVar22;
	var uVar23;
	char* sVar24;
	
	if (!uParam0->f_39)
	{
		if (uParam0->f_7 == 4)
		{
			return 1;
		}
	}
	if ((!PED::IS_PED_INJURED((*uParam0)[uParam0->f_7]) && !PED::IS_PED_INJURED(PLAYER::PLAYER_PED_ID())) && (*uParam0)[uParam0->f_7] != PLAYER::PLAYER_PED_ID())
	{
		if (!bParam2)
		{
			if ((PED::IS_PED_RAGDOLL(PLAYER::PLAYER_PED_ID()) && !FIRE::IS_ENTITY_ON_FIRE(PLAYER::PLAYER_PED_ID())) && !PED::IS_PED_GETTING_INTO_A_VEHICLE(PLAYER::PLAYER_PED_ID()))
			{
				TASK::CLEAR_PED_TASKS_IMMEDIATELY(PLAYER::PLAYER_PED_ID());
			}
			else
			{
				TASK::CLEAR_PED_TASKS(PLAYER::PLAYER_PED_ID());
			}
			if ((PED::IS_PED_RAGDOLL((*uParam0)[uParam0->f_7]) && !FIRE::IS_ENTITY_ON_FIRE((*uParam0)[uParam0->f_7])) && !PED::IS_PED_GETTING_INTO_A_VEHICLE((*uParam0)[uParam0->f_7]))
			{
				TASK::CLEAR_PED_TASKS_IMMEDIATELY((*uParam0)[uParam0->f_7]);
			}
			else
			{
				TASK::CLEAR_PED_TASKS((*uParam0)[uParam0->f_7]);
			}
		}
		iVar0 = PLAYER::PLAYER_PED_ID();
		iVar1 = GlobalFunc_8315();
		if (!uParam0->f_23)
		{
			GlobalFunc_9136(iVar0, 0);
		}
		GlobalFunc_5127(iVar1, &iVar0);
		PED::SET_PED_CONFIG_FLAG(iVar0, 32, 1);
		PED::SET_PED_CONFIG_FLAG(iVar0, 250, 1);
		iVar2 = GlobalFunc_584(uParam0->f_7);
		GlobalFunc_9136((*uParam0)[uParam0->f_7], 0);
		fVar3 = (((SYSTEM::TO_FLOAT(ENTITY::GET_ENTITY_HEALTH((*uParam0)[uParam0->f_7])) - 100f) / (SYSTEM::TO_FLOAT(PED::GET_PED_MAX_HEALTH((*uParam0)[uParam0->f_7])) - 100f)) * 100f);
		switch (GlobalFunc_6674(PLAYER::PLAYER_PED_ID()))
		{
			case 0:
				if (GRAPHICS::ANIMPOSTFX_IS_RUNNING("BulletTime"))
				{
					GRAPHICS::ANIMPOSTFX_STOP("BulletTime");
				}
				if (GRAPHICS::ANIMPOSTFX_IS_RUNNING("BulletTimeOut"))
				{
					GRAPHICS::ANIMPOSTFX_STOP("BulletTimeOut");
				}
				break;
			
			case 1:
				if (GRAPHICS::ANIMPOSTFX_IS_RUNNING("DrivingFocus"))
				{
					GRAPHICS::ANIMPOSTFX_STOP("DrivingFocus");
				}
				if (GRAPHICS::ANIMPOSTFX_IS_RUNNING("DrivingFocusOut"))
				{
					GRAPHICS::ANIMPOSTFX_STOP("DrivingFocusOut");
				}
				break;
			
			case 2:
				if (GRAPHICS::ANIMPOSTFX_IS_RUNNING("REDMIST"))
				{
					GRAPHICS::ANIMPOSTFX_STOP("REDMIST");
				}
				if (GRAPHICS::ANIMPOSTFX_IS_RUNNING("REDMISTOut"))
				{
					GRAPHICS::ANIMPOSTFX_STOP("REDMISTOut");
				}
				break;
		}
		if (GlobalFunc_42(GlobalFunc_8315()))
		{
			if (PLAYER::IS_SPECIAL_ABILITY_ACTIVE(PLAYER::PLAYER_ID()))
			{
				PLAYER::SPECIAL_ABILITY_DEACTIVATE_FAST(PLAYER::PLAYER_ID());
			}
		}
		PLAYER::CHANGE_PLAYER_PED(PLAYER::PLAYER_ID(), (*uParam0)[uParam0->f_7], bParam2, 0);
		HUD::HIDE_HUD_COMPONENT_THIS_FRAME(3);
		HUD::HIDE_HUD_COMPONENT_THIS_FRAME(13);
		if (iParam3 & 1 != 0)
		{
			PED::SET_PED_CONFIG_FLAG(PLAYER::PLAYER_PED_ID(), 210, 0);
		}
		if (GlobalFunc_6687(0) || GlobalFunc_6687(3))
		{
			if (Global_17098.f_13)
			{
				iVar4 = 0;
				while (iVar4 < 7)
				{
					if (MISC::IS_BIT_SET(Global_Running_Missions[iVar4 /*5*/].f_1, 2))
					{
						iVar5 = Global_Running_Missions[iVar4 /*5*/];
						StringCopy(&cVar6, "MISS_SWITCH_", 64);
						StringConCat(&cVar6, &(Global_81155[Global_68514.f_109[iVar5 /*4*/] /*34*/]), 64);
						STATS::STAT_INCREMENT(MISC::GET_HASH_KEY(&cVar6), 1f);
					}
					iVar4++;
				}
			}
		}
		Global_17098.f_13 = 0;
		uParam0->f_5 = GlobalFunc_237(iVar1);
		if (uParam0->f_5 == 4)
		{
			uParam0->f_5 = 3;
		}
		(*uParam0)[uParam0->f_5] = iVar0;
		(*uParam0)[uParam0->f_7] = 0;
		uParam0->f_6 = GlobalFunc_237(iVar2);
		uParam0->f_7 = 4;
		iVar22 = PLAYER::PLAYER_PED_ID();
		ENTITY::SET_ENTITY_VISIBLE(PLAYER::PLAYER_PED_ID(), 1);
		GlobalFunc_7709(iVar22);
		PED::_0xE861D0B05C7662B8(iVar22, 0, 0);
		if (fVar3 < 25f && !PED::IS_PED_SWIMMING_UNDER_WATER(PLAYER::PLAYER_PED_ID()))
		{
			ENTITY::SET_ENTITY_HEALTH(PLAYER::PLAYER_PED_ID(), SYSTEM::ROUND((((25f / 100f) * (SYSTEM::TO_FLOAT(PED::GET_PED_MAX_HEALTH(PLAYER::PLAYER_PED_ID())) - 100f)) + 100f)));
		}
		if (bParam1)
		{
			if (ENTITY::DOES_ENTITY_EXIST(iVar0))
			{
				ENTITY::SET_ENTITY_VISIBLE(iVar0, 1);
				GlobalFunc_7709(iVar0);
				PED::_0xE861D0B05C7662B8(iVar0, 0, 0);
				PED::SET_PED_STEALTH_MOVEMENT(iVar0, 0, 0);
			}
		}
		else if (ENTITY::DOES_ENTITY_EXIST(iVar0))
		{
			sVar24 = ENTITY::GET_ENTITY_SCRIPT(iVar0, &uVar23);
			if (!MISC::IS_STRING_NULL(sVar24))
			{
				if (!MISC::ARE_STRINGS_EQUAL(sVar24, SCRIPT::GET_THIS_SCRIPT_NAME()))
				{
					ENTITY::SET_ENTITY_AS_MISSION_ENTITY(iVar0, 0, 1);
				}
				PED::DELETE_PED(&iVar0);
			}
		}
		Global_87649 = 1;
		GlobalFunc_5126(PLAYER::PLAYER_PED_ID());
		GlobalFunc_8376();
		GlobalFunc_582(iVar2);
		GlobalFunc_8999();
		GlobalFunc_8375(iVar2);
		GlobalFunc_10857(GlobalFunc_4933(ENTITY::GET_ENTITY_COORDS(PLAYER::PLAYER_PED_ID(), 1), 145, 0));
		PLAYER::RESET_PLAYER_STAMINA(PLAYER::PLAYER_ID());
		ENTITY::SET_ENTITY_ONLY_DAMAGED_BY_PLAYER(PLAYER::PLAYER_PED_ID(), 0);
		PED::SET_PED_CAN_BE_DRAGGED_OUT(PLAYER::PLAYER_PED_ID(), 1);
		if (PLAYER::IS_PLAYER_PLAYING(PLAYER::PLAYER_ID()))
		{
			PLAYER::SET_AUTO_GIVE_PARACHUTE_WHEN_ENTER_PLANE(PLAYER::PLAYER_ID(), GlobalFunc_485(67));
		}
		if (PLAYER::IS_PLAYER_PLAYING(PLAYER::PLAYER_ID()))
		{
			PLAYER::SET_AUTO_GIVE_SCUBA_GEAR_WHEN_EXIT_VEHICLE(PLAYER::PLAYER_ID(), GlobalFunc_485(68));
		}
		GlobalFunc_6801(iVar2, &iVar22);
		if (((GlobalFunc_39(0) || GlobalFunc_39(3)) || GlobalFunc_39(2)) || GlobalFunc_39(4))
		{
			PED::SET_PED_CONFIG_FLAG(iVar22, 32, 0);
			PED::SET_PED_CONFIG_FLAG(iVar22, 250, 0);
		}
		else
		{
			PED::SET_PED_CONFIG_FLAG(iVar22, 32, 1);
			PED::SET_PED_CONFIG_FLAG(iVar22, 250, 1);
		}
		if (!GlobalFunc_579())
		{
			GlobalFunc_8382();
		}
		Global_87286 = 0;
		return 1;
	}
	else
	{
		if (PED::IS_PED_INJURED(PLAYER::PLAYER_PED_ID()))
		{
		}
		if (PED::IS_PED_INJURED((*uParam0)[uParam0->f_7]))
		{
		}
		if (PLAYER::PLAYER_PED_ID() == (*uParam0)[uParam0->f_7])
		{
		}
	}
	return 0;
}

















































int func_267(var uParam0, int iParam1, float fParam2, float fParam3)//Position - 0x14D86
{
	return func_268(uParam0, 0, 1, iParam1, fParam2, fParam3, 0, 0, 0, 6, 0, 0, 0);
	return 1;
}

int func_268(var uParam0, int iParam1, int iParam2, var uParam3, float fParam4, float fParam5, bool bParam6, bool bParam7, int iParam8, int iParam9, bool bParam10, bool bParam11, int iParam12)//Position - 0x14DA7
{
	int iVar0;
	int iVar1;
	struct<3> Var2;
	struct<3> Var5;
	float fVar8;
	float fVar9;
	int iVar10;
	int iVar11;
	
	iVar0 = uParam3;
	if (!uParam0->f_16)
	{
		if (STREAMING::_0x71E7B2E657449AAD())
		{
			if (!bParam10)
			{
				uParam0->f_13 = PLAYER::PLAYER_PED_ID();
			}
			if ((!PED::IS_PED_INJURED(uParam0->f_13) || bParam10) && !PED::IS_PED_INJURED(uParam0->f_12))
			{
				uParam0->f_27 = 0;
				Global_87286 = 1;
				if (!bParam10)
				{
					if (PED::IS_PED_SITTING_IN_ANY_VEHICLE(uParam0->f_13))
					{
						iVar1 = PED::GET_VEHICLE_PED_IS_IN(uParam0->f_13, 0);
						GlobalFunc_750(iVar1, 0);
					}
					PLAYER::SET_PLAYER_CONTROL(PLAYER::PLAYER_ID(), false, 0);
					ENTITY::SET_ENTITY_INVINCIBLE(uParam0->f_13, 1);
					ENTITY::SET_ENTITY_INVINCIBLE(uParam0->f_12, 1);
				}
				uParam0->f_21 = GlobalFunc_701();
				GlobalFunc_7632(1);
				if (bParam6)
				{
					iVar0 |= 4;
				}
				if (bParam7)
				{
					iVar0 |= 8;
				}
				if (CAM::DOES_CAM_EXIST(iParam1) || !MISC::IS_STRING_NULL_OR_EMPTY(iParam8))
				{
					iVar0 |= 2;
				}
				if (GlobalFunc_268())
				{
					iVar0 |= 1;
				}
				if (!STREAMING::IS_PLAYER_SWITCH_IN_PROGRESS())
				{
					STREAMING::START_PLAYER_SWITCH(uParam0->f_13, uParam0->f_12, iVar0, iParam2);
					if (bParam11)
					{
						STREAMING::_0x5F2013F8BC24EE69(iParam12);
					}
					switch (GlobalFunc_6674(uParam0->f_13))
					{
						case 0:
							GRAPHICS::_ANIMPOSTFX_STOP_AND_DO_UNK("SwitchHUDMichaelOut");
							break;
						
						case 1:
							GRAPHICS::_ANIMPOSTFX_STOP_AND_DO_UNK("SwitchHUDMichaelOut");
							break;
						
						case 2:
							GRAPHICS::_ANIMPOSTFX_STOP_AND_DO_UNK("SwitchHUDTrevorOut");
							break;
					}
					GRAPHICS::_ANIMPOSTFX_STOP_AND_DO_UNK("SwitchHUDOut");
				}
				else if (STREAMING::_0x933BBEEB8C61B5F4())
				{
					STREAMING::_SWITCH_IN_PLAYER(uParam0->f_12);
					GlobalFunc_749(0);
				}
				else
				{
					return 0;
				}
				if (CAM::DOES_CAM_EXIST(iParam1))
				{
					if (STREAMING::GET_IDEAL_PLAYER_SWITCH_TYPE(ENTITY::GET_ENTITY_COORDS(uParam0->f_13, 1), ENTITY::GET_ENTITY_COORDS(uParam0->f_12, 1)) != 3)
					{
						STREAMING::SET_PLAYER_SWITCH_OUTRO(CAM::GET_CAM_COORD(iParam1), CAM::GET_CAM_ROT(iParam1, iParam9), CAM::GET_CAM_FOV(iParam1), CAM::GET_CAM_FAR_CLIP(iParam1), iParam9);
					}
				}
				if (!MISC::IS_STRING_NULL_OR_EMPTY(iParam8))
				{
					STREAMING::SET_PLAYER_SWITCH_ESTABLISHING_SHOT(iParam8);
				}
				if (!Global_17098.f_111)
				{
					AUDIO::PLAY_SOUND(-1, "CHARACTER_CHANGE_UP_MASTER", 0, 0, 0, 1);
					if (STREAMING::GET_IDEAL_PLAYER_SWITCH_TYPE(ENTITY::GET_ENTITY_COORDS(uParam0->f_13, 1), ENTITY::GET_ENTITY_COORDS(uParam0->f_12, 1)) == 3)
					{
						AUDIO::PLAY_SOUND(-1, "slow", "SHORT_PLAYER_SWITCH_SOUND_SET", 0, 0, 1);
					}
					if (Global_17098.f_109 == -1)
					{
						Global_17098.f_109 = AUDIO::GET_SOUND_ID();
					}
					Global_17098.f_110 = MISC::GET_HASH_KEY(SCRIPT::GET_THIS_SCRIPT_NAME());
					AUDIO::PLAY_SOUND(Global_17098.f_109, "CHARACTER_CHANGE_SKY_MASTER", 0, 0, 0, 1);
					AUDIO::START_AUDIO_SCENE("CHARACTER_CHANGE_IN_SKY_SCENE");
					if (AUDIO::IS_AUDIO_SCENE_ACTIVE("CHARACTER_CHANGE_IN_SKY_SCENE"))
					{
					}
				}
				if (Global_17098.f_109 != -1 && Global_17098.f_110 == MISC::GET_HASH_KEY(SCRIPT::GET_THIS_SCRIPT_NAME()))
				{
					AUDIO::STOP_SOUND(Global_17098.f_109);
					AUDIO::RELEASE_SOUND_ID(Global_17098.f_109);
					Global_17098.f_109 = -1;
					Global_17098.f_110 = 0;
				}
				uParam0->f_25 = MISC::GET_GAME_TIMER();
				uParam0->f_16 = 1;
				GlobalFunc_748(1);
				HUD::SET_MINIMAP_IN_SPECTATOR_MODE(1, uParam0->f_13);
				if (CAM::GET_FOLLOW_PED_CAM_VIEW_MODE() == 3)
				{
					CAM::SET_FOLLOW_PED_CAM_VIEW_MODE(1);
				}
				if (CAM::GET_FOLLOW_VEHICLE_CAM_VIEW_MODE() == 3)
				{
					CAM::SET_FOLLOW_VEHICLE_CAM_VIEW_MODE(1);
				}
				if (!bParam10)
				{
					if (ENTITY::GET_ENTITY_MODEL(uParam0->f_12) == GlobalFunc_4917(0))
					{
						GRAPHICS::SET_NEXT_PLAYER_TCMODIFIER(GlobalFunc_707(0));
					}
					else if (ENTITY::GET_ENTITY_MODEL(uParam0->f_12) == GlobalFunc_4917(2))
					{
						GRAPHICS::SET_NEXT_PLAYER_TCMODIFIER(GlobalFunc_707(2));
					}
					else if (ENTITY::GET_ENTITY_MODEL(uParam0->f_12) == GlobalFunc_4917(1))
					{
						GRAPHICS::SET_NEXT_PLAYER_TCMODIFIER(GlobalFunc_707(1));
					}
					else
					{
						GRAPHICS::SET_NEXT_PLAYER_TCMODIFIER("");
					}
					GRAPHICS::SET_PLAYER_TCMODIFIER_TRANSITION(0f);
				}
			}
			else
			{
				uParam0->f_17 = 1;
			}
		}
		else
		{
			uParam0->f_17 = 1;
		}
	}
	if (uParam0->f_16)
	{
		if (STREAMING::IS_PLAYER_SWITCH_IN_PROGRESS())
		{
			if (!Global_17098.f_111)
			{
			}
			if (GlobalFunc_747(uParam3, 512))
			{
				if (!STREAMING::IS_SWITCH_READY_FOR_DESCENT())
				{
				}
				else if (Global_89750 == 0)
				{
					STREAMING::ALLOW_PLAYER_SWITCH_DESCENT();
				}
			}
			if (STREAMING::GET_PLAYER_SWITCH_TYPE() == 3)
			{
				if (STREAMING::GET_PLAYER_SHORT_SWITCH_STATE() >= 1)
				{
					if (!uParam0->f_18)
					{
						GlobalFunc_737();
						uParam0->f_18 = 1;
					}
					if (!uParam0->f_22)
					{
						GlobalFunc_8031(0, 1);
						uParam0->f_22 = 1;
					}
				}
			}
			else
			{
				if (STREAMING::GET_PLAYER_SWITCH_STATE() >= 8)
				{
					if (!uParam0->f_18)
					{
						GlobalFunc_737();
						uParam0->f_18 = 1;
					}
				}
				if (!uParam0->f_18)
				{
					if (STREAMING::IS_SWITCH_SKIPPING_DESCENT() && STREAMING::GET_PLAYER_SWITCH_STATE() == 3)
					{
						Var2 = { ENTITY::GET_ENTITY_COORDS(PLAYER::PLAYER_PED_ID(), 1) };
						Var5 = { CAM::GET_FINAL_RENDERED_CAM_COORD() };
						fVar8 = 20f;
						fVar9 = SYSTEM::VDIST2(Var2, Var5);
						if (fVar9 < (fVar8 * fVar8))
						{
							GlobalFunc_737();
							uParam0->f_18 = 1;
						}
					}
				}
				if (!uParam0->f_22)
				{
					if (STREAMING::GET_PLAYER_SWITCH_STATE() > 2)
					{
						GlobalFunc_8031(0, 1);
						uParam0->f_22 = 1;
					}
				}
				if (!uParam0->f_23)
				{
					if (STREAMING::GET_PLAYER_SWITCH_STATE() >= 3)
					{
						GRAPHICS::CASCADE_SHADOWS_SET_SHADOW_SAMPLE_TYPE("CSM_ST_BOX3x3");
						uParam0->f_23 = 1;
					}
				}
			}
		}
		else
		{
			if (!uParam0->f_18)
			{
				uParam0->f_18 = 1;
				GlobalFunc_737();
			}
			if (!uParam0->f_22)
			{
				GlobalFunc_8031(0, 1);
				uParam0->f_22 = 1;
			}
			uParam0->f_17 = 1;
		}
	}
	if (uParam0->f_17)
	{
		iVar10 = GlobalFunc_5187();
		if (((iVar10 != 8 && iVar10 != 9) && iVar10 != 10) && iVar10 != 55)
		{
			GlobalFunc_7632(uParam0->f_21);
		}
		if (uParam0->f_23)
		{
			GRAPHICS::_CASCADE_SHADOWS_CLEAR_SHADOW_SAMPLE_TYPE();
			uParam0->f_23 = 0;
		}
		uParam0->f_16 = 0;
		uParam0->f_17 = 0;
		uParam0->f_18 = 0;
		uParam0->f_19 = 0;
		uParam0->f_20 = 0;
		uParam0->f_24 = 0;
		uParam0->f_27 = 0;
		if (Global_17098.f_109 != -1 && Global_17098.f_110 == MISC::GET_HASH_KEY(SCRIPT::GET_THIS_SCRIPT_NAME()))
		{
			AUDIO::STOP_SOUND(Global_17098.f_109);
			AUDIO::RELEASE_SOUND_ID(Global_17098.f_109);
			Global_17098.f_109 = -1;
			Global_17098.f_110 = 0;
		}
		if (AUDIO::IS_AUDIO_SCENE_ACTIVE("CHARACTER_CHANGE_IN_SKY_SCENE"))
		{
			AUDIO::STOP_AUDIO_SCENE("CHARACTER_CHANGE_IN_SKY_SCENE");
		}
		if (Global_17098.f_107 != -1 && Global_17098.f_108 == MISC::GET_HASH_KEY(SCRIPT::GET_THIS_SCRIPT_NAME()))
		{
			AUDIO::STOP_SOUND(Global_17098.f_107);
			AUDIO::RELEASE_SOUND_ID(Global_17098.f_107);
			Global_17098.f_107 = -1;
			Global_17098.f_108 = 0;
		}
		if (fParam5 <= 360f && fParam5 >= -360f)
		{
			CAM::SET_GAMEPLAY_CAM_RELATIVE_HEADING(fParam5);
		}
		if (fParam4 <= 360f && fParam4 >= -360f)
		{
			CAM::SET_GAMEPLAY_CAM_RELATIVE_PITCH(fParam4, 1065353216);
		}
		if (!Global_35923)
		{
			CAM::STOP_GAMEPLAY_CAM_SHAKING(1);
			CAM::_0x487A82C650EB7799(0f);
			CAM::_0x0225778816FDC28C(0f);
		}
		if (!bParam10)
		{
			if (!PED::IS_PED_INJURED(uParam0->f_13))
			{
				ENTITY::SET_ENTITY_VISIBLE(uParam0->f_13, 1);
				PED::SET_PED_CAN_BE_TARGETTED(uParam0->f_13, 1);
				if (!PED::IS_PED_IN_ANY_VEHICLE(uParam0->f_13, 0))
				{
					ENTITY::SET_ENTITY_COLLISION(uParam0->f_13, 1, 0);
				}
				if (PED::IS_PED_SITTING_IN_ANY_VEHICLE(uParam0->f_13))
				{
					iVar11 = PED::GET_VEHICLE_PED_IS_IN(uParam0->f_13, 0);
					GlobalFunc_750(iVar11, 1);
				}
			}
		}
		GlobalFunc_749(0);
		if (!bParam10)
		{
			if (!PED::IS_PED_INJURED(uParam0->f_13) || bParam10)
			{
				ENTITY::SET_ENTITY_INVINCIBLE(uParam0->f_13, 0);
			}
			if (!PED::IS_PED_INJURED(uParam0->f_12))
			{
				ENTITY::SET_ENTITY_INVINCIBLE(uParam0->f_12, 0);
			}
			PLAYER::SET_PLAYER_CONTROL(PLAYER::PLAYER_ID(), true, 0);
			GRAPHICS::SET_CURRENT_PLAYER_TCMODIFIER(GlobalFunc_707(GlobalFunc_8315()));
		}
		GlobalFunc_748(0);
		HUD::SET_MINIMAP_IN_SPECTATOR_MODE(0, 0);
		return 0;
	}
	HUD::HIDE_HUD_AND_RADAR_THIS_FRAME();
	return 1;
}























void func_291()//Position - 0x1591C
{
	switch (iLocal_388)
	{
		case 0:
			iLocal_387 = MISC::GET_GAME_TIMER();
			iLocal_388++;
			break;
		
		case 1:
			if ((MISC::GET_GAME_TIMER() - iLocal_387) > 7000)
			{
				iLocal_388++;
			}
			break;
		
		case 2:
			if (!GlobalFunc_5172(&Local_261, 1))
			{
				if (func_48("BSPRP_TAKET", "BSPRP_TAKET", "BSPRP_TAKEM"))
				{
					iLocal_387 = MISC::GET_GAME_TIMER();
					iLocal_388 = 1;
				}
			}
			break;
	}
}

















void func_308()//Position - 0x16F33
{
	switch (iLocal_260)
	{
		case 0:
			if (!AUDIO::IS_AUDIO_SCENE_ACTIVE("BS_P_D_STEALTH"))
			{
				AUDIO::START_AUDIO_SCENE("BS_P_D_STEALTH");
			}
			func_136(4);
			STREAMING::NEW_LOAD_SCENE_START(2384.677f, 2237.906f, 89.19504f, GlobalFunc_107(Vector(89.19504f, 2237.906f, 2384.677f) - Vector(39.89159f, 2959.865f, 2618.868f)), 1000f, 0);
			iLocal_260++;
			break;
		
		case 1:
			if (func_126(4))
			{
				iLocal_260++;
			}
			break;
		
		case 2:
			CAM::DESTROY_ALL_CAMS(0);
			uLocal_47 = CAM::CREATE_CAM("DEFAULT_SCRIPTED_CAMERA", 0);
			uLocal_48 = CAM::CREATE_CAM("DEFAULT_SCRIPTED_CAMERA", 0);
			if (!AUDIO::IS_AUDIO_SCENE_ACTIVE("BS_P_D_TRAIN_ARRIVES"))
			{
				AUDIO::START_AUDIO_SCENE("BS_P_D_TRAIN_ARRIVES");
			}
			CAM::SET_CAM_COORD(uLocal_47, 2624.928f, 2947.425f, 39.31967f);
			CAM::SET_CAM_ROT(uLocal_47, 14.96931f, -0.237041f, -31.32605f, 2);
			CAM::SET_CAM_FOV(uLocal_47, 45f);
			CAM::SET_CAM_COORD(uLocal_48, 2624.928f, 2947.425f, 39.31967f);
			CAM::SET_CAM_ROT(uLocal_48, 18.49649f, -0.23704f, -31.32605f, 2);
			CAM::SET_CAM_FOV(uLocal_48, 45f);
			CAM::SET_CAM_ACTIVE_WITH_INTERP(uLocal_48, uLocal_47, 1000, 2, 0);
			func_579();
			if (func_23())
			{
				while (!func_312(&(uLocal_51[2]), 2, VEHICLE::GET_POSITION_OF_VEHICLE_RECORDING_AT_TIME(1, 3000f, "BsPrepHeli"), 0, 1, 0, 0))
				{
					SYSTEM::WAIT(0);
				}
				if (!ENTITY::IS_ENTITY_DEAD(iLocal_49))
				{
					PED::SET_PED_INTO_VEHICLE(uLocal_51[2], iLocal_49, -1);
					WEAPON::GIVE_WEAPON_TO_PED(uLocal_51[2], joaat("gadget_parachute"), 1, 0, 1);
				}
			}
			else
			{
				while (!func_312(&(uLocal_51[uLocal_51.f_5]), 0, VEHICLE::GET_POSITION_OF_VEHICLE_RECORDING_AT_TIME(1, 3000f, "BsPrepHeli"), 0, 1, 0, 0))
				{
					SYSTEM::WAIT(0);
				}
				if (!ENTITY::IS_ENTITY_DEAD(iLocal_49))
				{
					PED::SET_PED_INTO_VEHICLE(uLocal_51[uLocal_51.f_5], iLocal_49, -1);
					WEAPON::GIVE_WEAPON_TO_PED(uLocal_51[uLocal_51.f_5], joaat("gadget_parachute"), 1, 0, 1);
				}
			}
			RECORDING::_0x48621C9FCA3EBD28(4);
			ENTITY::SET_ENTITY_COORDS(PLAYER::PLAYER_PED_ID(), 2628.115f, 2924.567f, 39.4265f, 1, 0, 0, 1);
			ENTITY::SET_ENTITY_HEADING(PLAYER::PLAYER_PED_ID(), 154.8777f);
			MISC::CLEAR_AREA_OF_VEHICLES(2624.928f, 2947.425f, 39.31967f, 100f, 0, 0, 0, 0, 0);
			func_29(1, 0, 2000, 1);
			SYSTEM::SETTIMERA(0);
			func_45();
			iLocal_260++;
			break;
		
		case 3:
			if (SYSTEM::TIMERA() > 1000)
			{
				HUD::REMOVE_BLIP(&uLocal_371);
				VEHICLE::SET_RANDOM_TRAINS(0);
				VEHICLE::DELETE_MISSION_TRAIN(&iLocal_50);
				func_311(2617.861f, 2934.277f, 38.8511f, 1106509824);
				CAM::SET_CAM_COORD(uLocal_47, 2628.826f, 2972.153f, 44.4134f);
				CAM::SET_CAM_ROT(uLocal_47, 1.527947f, 0f, 156.913f, 2);
				CAM::SET_CAM_FOV(uLocal_47, 18.32286f);
				CAM::SET_CAM_COORD(uLocal_48, 2624.9f, 2963.6f, 46f);
				CAM::SET_CAM_ROT(uLocal_48, 0.8303f, 0f, 163.9873f, 2);
				CAM::SET_CAM_FOV(uLocal_48, 18.32286f);
				CAM::SET_CAM_ACTIVE_WITH_INTERP(uLocal_48, uLocal_47, 3000, 3, 3);
				SYSTEM::SETTIMERA(0);
				iLocal_260++;
			}
			break;
		
		case 4:
			if (SYSTEM::TIMERA() > 3000)
			{
				if (!ENTITY::IS_ENTITY_DEAD(iLocal_50))
				{
					VEHICLE::SET_TRAIN_CRUISE_SPEED(iLocal_50, 22.5f);
					VEHICLE::SET_TRAIN_SPEED(iLocal_50, 22.5f);
				}
				SYSTEM::SETTIMERA(0);
				iLocal_260++;
			}
			break;
		
		case 5:
			if (AUDIO::IS_AUDIO_SCENE_ACTIVE("BS_P_D_TRAIN_ARRIVES"))
			{
				AUDIO::STOP_AUDIO_SCENE("BS_P_D_TRAIN_ARRIVES");
			}
			if (STREAMING::IS_NEW_LOAD_SCENE_ACTIVE())
			{
				STREAMING::NEW_LOAD_SCENE_STOP();
			}
			ENTITY::SET_ENTITY_COORDS(PLAYER::PLAYER_PED_ID(), 2628.115f, 2924.567f, 39.4265f, 1, 0, 0, 1);
			ENTITY::SET_ENTITY_HEADING(PLAYER::PLAYER_PED_ID(), 154.8777f);
			PLAYER::SIMULATE_PLAYER_INPUT_GAIT(PLAYER::PLAYER_ID(), 2f, 3000, 0f, 1, 1);
			PED::FORCE_PED_MOTION_STATE(PLAYER::PLAYER_PED_ID(), -530524, 0, 1, 0);
			RECORDING::_0x81CBAE94390F9F89();
			if (func_211())
			{
				GlobalFunc_173(&uLocal_95, 0, PLAYER::PLAYER_PED_ID(), "MICHAEL", 0, 1);
				GlobalFunc_173(&uLocal_95, 2, 0, "TREVOR", 0, 1);
			}
			else if (func_49())
			{
				GlobalFunc_173(&uLocal_95, 1, PLAYER::PLAYER_PED_ID(), "FRANKLIN", 0, 1);
				GlobalFunc_173(&uLocal_95, 2, 0, "TREVOR", 0, 1);
			}
			else if (func_209())
			{
				GlobalFunc_173(&uLocal_95, 2, PLAYER::PLAYER_PED_ID(), "TREVOR", 0, 1);
				GlobalFunc_173(&uLocal_95, 0, 0, "MICHAEL", 0, 1);
			}
			func_310(0);
			func_29(0, 0, 2000, 1);
			iLocal_260 = 0;
			iLocal_286 = 5;
			func_45();
			break;
	}
	if (iLocal_260 > 3)
	{
		if (GlobalFunc_75())
		{
			RECORDING::_0x13B350B8AD0EEE10();
			CAM::DO_SCREEN_FADE_OUT(500);
			while (CAM::IS_SCREEN_FADING_OUT())
			{
				SYSTEM::WAIT(0);
			}
			iLocal_260 = 5;
		}
	}
}


void func_310(float fParam0)//Position - 0x173EA
{
	CAM::SET_GAMEPLAY_CAM_RELATIVE_HEADING(fParam0);
	CAM::SET_GAMEPLAY_CAM_RELATIVE_PITCH(fParam0, 1065353216);
}

void func_311(struct<3> Param0, int iParam3)//Position - 0x17403
{
	iLocal_50 = VEHICLE::CREATE_MISSION_TRAIN(7, Param0, 0);
	VEHICLE::SET_TRAIN_CRUISE_SPEED(iLocal_50, iParam3);
	VEHICLE::SET_TRAIN_SPEED(iLocal_50, iParam3);
	ENTITY::SET_ENTITY_LOD_DIST(iLocal_50, 3000);
	VEHICLE::SET_VEHICLE_LOD_MULTIPLIER(iLocal_50, 100f);
}

int func_312(var uParam0, int iParam1, struct<3> Param2, int iParam5, bool bParam6, bool bParam7, bool bParam8)//Position - 0x1743B
{
	int iVar0;
	
	if (GlobalFunc_42(iParam1))
	{
		iVar0 = GlobalFunc_4917(iParam1);
		STREAMING::REQUEST_MODEL(iVar0);
		if (STREAMING::HAS_MODEL_LOADED(iVar0))
		{
			if (ENTITY::DOES_ENTITY_EXIST(*uParam0))
			{
				PED::DELETE_PED(uParam0);
			}
			*uParam0 = PED::CREATE_PED(26, iVar0, Param2, iParam5, 0, 0);
			GlobalFunc_8386(*uParam0, iParam1, bParam7);
			PED::_0xE861D0B05C7662B8(*uParam0, 0, 0);
			func_571(*uParam0);
			GlobalFunc_7694(*uParam0, 1, 0);
			GlobalFunc_7693(*uParam0);
			GlobalFunc_7707(*uParam0);
			func_314(*uParam0, bParam8);
			GlobalFunc_516(*uParam0);
			if (bParam6)
			{
				STREAMING::SET_MODEL_AS_NO_LONGER_NEEDED(iVar0);
			}
			return 1;
		}
	}
	return 0;
}


int func_314(int iParam0, bool bParam1)//Position - 0x17553
{
	int iVar0;
	bool bVar1;
	
	iVar0 = GlobalFunc_6674(iParam0);
	if (GlobalFunc_5101(iVar0))
	{
		GlobalFunc_5100(iVar0, 0);
		func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
		func_404(iParam0, 1);
		return 1;
	}
	if (!bParam1)
	{
		if (GlobalFunc_7997(iParam0))
		{
			GlobalFunc_5100(iVar0, 0);
			func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
			func_404(iParam0, 1);
			return 1;
		}
	}
	bVar1 = false;
	switch (iVar0)
	{
		case 0:
			if (Global_SAVE_DATA.FLOW_STRUCT.MF_CONTROLS_STRUCT.f_58[120] && !Global_SAVE_DATA.FLOW_STRUCT.MF_CONTROLS_STRUCT.f_58[122])
			{
				func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				Global_SAVE_DATA.FLOW_STRUCT.MF_CONTROLS_STRUCT.f_58[121] = 1;
				return 1;
			}
			if (Global_SAVE_DATA.FLOW_STRUCT.MF_CONTROLS_STRUCT.f_58[123])
			{
				Global_SAVE_DATA.FLOW_STRUCT.MF_CONTROLS_STRUCT.f_58[123] = 0;
				if (!PED::IS_PED_INJURED(iParam0))
				{
					if (GlobalFunc_10997(iParam0, 3, 169))
					{
						func_546(iParam0, 3, 85, 0, -1, 0, 0, 0, -1, -1, -1, 0);
						return 1;
					}
				}
			}
			if (GlobalFunc_10997(iParam0, 12, 6))
			{
				func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				return 1;
			}
			if (GlobalFunc_10997(iParam0, 12, 17))
			{
				if (!GlobalFunc_10917(ENTITY::GET_ENTITY_MODEL(iParam0), 12, 17))
				{
					func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
					return 1;
				}
			}
			if (GlobalFunc_10997(iParam0, 12, 20))
			{
				if (!GlobalFunc_10917(ENTITY::GET_ENTITY_MODEL(iParam0), 12, 20))
				{
					func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
					return 1;
				}
			}
			if (GlobalFunc_10997(iParam0, 12, 21))
			{
				if (!GlobalFunc_10917(ENTITY::GET_ENTITY_MODEL(iParam0), 12, 21))
				{
					func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
					return 1;
				}
			}
			if (GlobalFunc_10997(iParam0, 12, 22))
			{
				if (!GlobalFunc_10917(ENTITY::GET_ENTITY_MODEL(iParam0), 12, 22))
				{
					func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
					return 1;
				}
			}
			if (GlobalFunc_10997(iParam0, 12, 11))
			{
				func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				return 1;
			}
			if (GlobalFunc_10997(iParam0, 12, 10))
			{
				func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				return 1;
			}
			if (GlobalFunc_10997(iParam0, 12, 50))
			{
				func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				return 1;
			}
			if (GlobalFunc_10997(iParam0, 14, 59))
			{
				func_546(iParam0, 14, 1, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				bVar1 = true;
			}
			if (GlobalFunc_10997(iParam0, 8, 22))
			{
				func_546(iParam0, 8, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				bVar1 = true;
			}
			if (bVar1)
			{
				return 1;
			}
			if (GlobalFunc_10997(iParam0, 12, 14))
			{
				func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				return 1;
			}
			break;
		
		case 1:
			if (GlobalFunc_10997(iParam0, 12, 13))
			{
				if (!GlobalFunc_10917(ENTITY::GET_ENTITY_MODEL(iParam0), 12, 13))
				{
					func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
					return 1;
				}
			}
			if (GlobalFunc_10997(iParam0, 12, 14))
			{
				if (!GlobalFunc_10917(ENTITY::GET_ENTITY_MODEL(iParam0), 12, 14))
				{
					func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
					return 1;
				}
			}
			if (GlobalFunc_10997(iParam0, 12, 15))
			{
				if (!GlobalFunc_10917(ENTITY::GET_ENTITY_MODEL(iParam0), 12, 15))
				{
					func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
					return 1;
				}
			}
			if (GlobalFunc_10997(iParam0, 12, 4))
			{
				func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				return 1;
			}
			if (GlobalFunc_10997(iParam0, 12, 3))
			{
				func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				return 1;
			}
			if (GlobalFunc_10997(iParam0, 14, 82))
			{
				func_546(iParam0, 14, 1, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				bVar1 = true;
			}
			if (GlobalFunc_10997(iParam0, 8, 76))
			{
				func_546(iParam0, 8, 26, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				bVar1 = true;
			}
			if (bVar1)
			{
				return 1;
			}
			if (GlobalFunc_10997(iParam0, 12, 1))
			{
				func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				return 1;
			}
			break;
		
		case 2:
			if (GlobalFunc_10997(iParam0, 12, 12))
			{
				func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				return 1;
			}
			if (GlobalFunc_10997(iParam0, 12, 15))
			{
				func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				return 1;
			}
			if (!bParam1)
			{
				if (GlobalFunc_10997(iParam0, 3, 71))
				{
					func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
					return 1;
				}
			}
			if (GlobalFunc_10997(iParam0, 12, 17))
			{
				if (!GlobalFunc_10917(ENTITY::GET_ENTITY_MODEL(iParam0), 12, 17))
				{
					func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
					return 1;
				}
			}
			if (GlobalFunc_10997(iParam0, 12, 18))
			{
				if (!GlobalFunc_10917(ENTITY::GET_ENTITY_MODEL(iParam0), 12, 18))
				{
					func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
					return 1;
				}
			}
			if (GlobalFunc_10997(iParam0, 12, 19))
			{
				if (!GlobalFunc_10917(ENTITY::GET_ENTITY_MODEL(iParam0), 12, 19))
				{
					func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
					return 1;
				}
			}
			if (GlobalFunc_10997(iParam0, 12, 7))
			{
				func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				return 1;
			}
			if (GlobalFunc_10997(iParam0, 12, 6))
			{
				func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				return 1;
			}
			if (GlobalFunc_10997(iParam0, 14, 88))
			{
				func_546(iParam0, 14, 1, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				bVar1 = true;
			}
			if (GlobalFunc_10997(iParam0, 8, 17))
			{
				func_546(iParam0, 8, 15, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				bVar1 = true;
			}
			if (bVar1)
			{
				return 1;
			}
			if (GlobalFunc_10997(iParam0, 12, 11))
			{
				func_546(iParam0, 12, 0, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				return 1;
			}
			break;
	}
	return 0;
}


























































































void func_404(int iParam0, int iParam1)//Position - 0x31324
{
	int iVar0;
	int iVar1;
	struct<65> Var2;
	int iVar67;
	
	if (!PED::IS_PED_INJURED(iParam0))
	{
		iVar0 = GlobalFunc_6674(iParam0);
		if (GlobalFunc_42(iVar0))
		{
			if (iVar0 == 2)
			{
				iVar1 = GlobalFunc_11122(iParam0, 4, -1);
				if (iVar1 == 93)
				{
					GlobalFunc_521(iVar0);
					func_406(iParam0, &(Global_SAVE_DATA.COMPONENTS_ARRAY.PP_INFO_STRUCT[iVar0 /*65*/]), 0);
				}
			}
			Var2 = 12;
			Var2.f_13 = 12;
			Var2.f_26 = 12;
			Var2.f_39 = 9;
			Var2.f_49 = 9;
			GlobalFunc_8358(iParam0, &Var2, 1);
			Global_89752[iVar0 /*65*/] = { Var2 };
			if (iParam0 == PLAYER::PLAYER_PED_ID())
			{
				GlobalFunc_8999();
			}
			if (MISC::GET_HASH_KEY(SCRIPT::GET_THIS_SCRIPT_NAME()) != MISC::GET_HASH_KEY("clothes_shop_sp") || (SCRIPT::_GET_NUMBER_OF_REFERENCES_OF_SCRIPT_WITH_NAME_HASH(joaat("lester1")) == 0 && SCRIPT::_GET_NUMBER_OF_REFERENCES_OF_SCRIPT_WITH_NAME_HASH(joaat("michael4")) == 0))
			{
				if (iParam1 || ((((((!GlobalFunc_39(0) && !GlobalFunc_39(1)) && !GlobalFunc_39(2)) && !GlobalFunc_39(3)) && !GlobalFunc_39(4)) && !GlobalFunc_39(9)) && !GlobalFunc_39(10)))
				{
					Global_SAVE_DATA.COMPONENTS_ARRAY.PP_INFO_STRUCT[iVar0 /*65*/] = { Var2 };
					Global_SAVE_DATA.COMPONENTS_ARRAY.PP_INFO_STRUCT.f_1619[iVar0] = GlobalFunc_518(iParam0);
					iVar67 = 0;
					while (iVar67 < 12)
					{
						Global_SAVE_DATA.COMPONENTS_ARRAY.PP_INFO_STRUCT.f_204[iVar67 /*4*/][iVar0] = GlobalFunc_7150(iParam0, GlobalFunc_33(iVar67));
						iVar67++;
					}
					iVar67 = 0;
					while (iVar67 < 12)
					{
						Global_SAVE_DATA.COMPONENTS_ARRAY.PP_INFO_STRUCT.f_204[iVar67 /*4*/][iVar0] = GlobalFunc_7150(iParam0, GlobalFunc_33(iVar67));
						iVar67++;
					}
					if (iVar0 == 0)
					{
						if (Global_SAVE_DATA.FLOW_STRUCT.MF_CONTROLS_STRUCT.f_58[121])
						{
							Global_SAVE_DATA.FLOW_STRUCT.MF_CONTROLS_STRUCT.f_58[122] = 1;
						}
					}
				}
			}
		}
	}
}


void func_406(int iParam0, var uParam1, bool bParam2)//Position - 0x3159B
{
	int iVar0;
	int iVar1;
	int iVar2;
	int iVar3;
	int iVar4;
	int iVar5;
	
	if (!PED::IS_PED_INJURED(iParam0))
	{
		iVar0 = GlobalFunc_6674(iParam0);
		iVar1 = ENTITY::GET_ENTITY_MODEL(iParam0);
		iVar3 = 0;
		while (iVar3 < 12)
		{
			if (iVar3 != 1 || (iVar3 == 1 && !bParam2))
			{
				PED::SET_PED_COMPONENT_VARIATION(iParam0, iVar3, uParam1->f_13[iVar3], (*uParam1)[iVar3], uParam1->f_26[iVar3]);
			}
			iVar3++;
		}
		iVar3 = 0;
		while (iVar3 < 9)
		{
			if (uParam1->f_39[iVar3] != -1 && uParam1->f_39[iVar3] != 255)
			{
				PED::SET_PED_PROP_INDEX(iParam0, iVar3, uParam1->f_39[iVar3], uParam1->f_49[iVar3], false);
			}
			else
			{
				PED::CLEAR_PED_PROP(iParam0, iVar3);
			}
			iVar3++;
		}
		if (GlobalFunc_42(iVar0))
		{
			Global_SAVE_DATA.COMPONENTS_ARRAY.PP_INFO_STRUCT[iVar0 /*65*/].f_59 = uParam1->f_59;
			Global_SAVE_DATA.COMPONENTS_ARRAY.PP_INFO_STRUCT[iVar0 /*65*/].f_60 = uParam1->f_60;
			Global_SAVE_DATA.COMPONENTS_ARRAY.PP_INFO_STRUCT[iVar0 /*65*/].f_61 = uParam1->f_61;
			if (GlobalFunc_11121(iParam0, iVar1, &iVar2, 0))
			{
				func_546(iParam0, 2, iVar2, 0, -1, 0, 0, 0, -1, -1, -1, 0);
			}
			Global_SAVE_DATA.COMPONENTS_ARRAY.PP_INFO_STRUCT[iVar0 /*65*/].f_62 = uParam1->f_62;
			Global_SAVE_DATA.COMPONENTS_ARRAY.PP_INFO_STRUCT[iVar0 /*65*/].f_63 = uParam1->f_63;
			Global_SAVE_DATA.COMPONENTS_ARRAY.PP_INFO_STRUCT[iVar0 /*65*/].f_64 = uParam1->f_64;
			if (GlobalFunc_11120(iParam0, iVar1, &iVar2))
			{
				func_546(iParam0, 1, iVar2, 0, -1, 0, 0, 0, -1, -1, -1, 0);
			}
		}
		else if (NETWORK::NETWORK_IS_GAME_IN_PROGRESS() && ENTITY::GET_ENTITY_MODEL(iParam0) == ENTITY::GET_ENTITY_MODEL(PLAYER::PLAYER_PED_ID()))
		{
			GlobalFunc_6784(741, uParam1->f_60, Global_68104, 1);
			GlobalFunc_6784(742, uParam1->f_61, Global_68104, 1);
			iVar4 = GlobalFunc_5668(iParam0, uParam1->f_13[2], (*uParam1)[2], 2);
			func_409(iParam0, 2, iVar4, 0, -1, 0, 0, 0, -1, -1, Global_68104, 0);
			if (!bParam2)
			{
				iVar5 = GlobalFunc_5668(iParam0, uParam1->f_13[1], (*uParam1)[1], 1);
				func_409(iParam0, 1, iVar5, 0, -1, 0, 0, 0, -1, -1, Global_68104, 0);
			}
		}
		if (NETWORK::NETWORK_IS_GAME_IN_PROGRESS() && iParam0 == PLAYER::PLAYER_PED_ID())
		{
			GlobalFunc_6784(740, uParam1->f_59, Global_68104, 1);
			GlobalFunc_6784(2035, uParam1->f_59, Global_68104, 1);
			GlobalFunc_6785(161, 1, -1, 1);
		}
	}
}



int func_409(int iParam0, int iParam1, int iParam2, int iParam3, int iParam4, int iParam5, int iParam6, int iParam7, int iParam8, int iParam9, int iParam10, bool bParam11)//Position - 0x31832
{
	int iVar0;
	int iVar1;
	int iVar2;
	int iVar3;
	var uVar4;
	int iVar5;
	int iVar6;
	int iVar7;
	int iVar8;
	int iVar9;
	int iVar10;
	int iVar11;
	int iVar12;
	var uVar13;
	var uVar14;
	var uVar15;
	var uVar31;
	var uVar41;
	int iVar57;
	var uVar58;
	int iVar68;
	int iVar69;
	int iVar70;
	int iVar71;
	int iVar72;
	int iVar73;
	int iVar74;
	int iVar75;
	int iVar76;
	int iVar77;
	int iVar78;
	int iVar79;
	int iVar80;
	int iVar81;
	int iVar82;
	int iVar83;
	int iVar84;
	int iVar85;
	int iVar86;
	int iVar87;
	int iVar88;
	int iVar89;
	var uVar90;
	int iVar91;
	int iVar92;
	int iVar93;
	int iVar94;
	int iVar95;
	int iVar96;
	int iVar97;
	int iVar98;
	int iVar99;
	int iVar100;
	var uVar101;
	int iVar102;
	int iVar103;
	int iVar104;
	int iVar105;
	
	if (!NETWORK::NETWORK_IS_GAME_IN_PROGRESS())
	{
		if ((Global_1315831 != 4 && Global_1315831 != 5) && Global_1315831 != 7)
		{
			return 0;
		}
	}
	if (PED::IS_PED_INJURED(iParam0) || iParam2 == -99)
	{
		return 0;
	}
	if (iParam0 == PLAYER::PLAYER_PED_ID() && Global_2414009[PLAYER::PLAYER_ID() /*254*/].f_219 == 2)
	{
		return 0;
	}
	Global_68105++;
	iVar5 = ENTITY::GET_ENTITY_MODEL(iParam0);
	iVar6 = -99;
	iVar7 = -99;
	iVar8 = -1;
	iVar9 = -99;
	iVar10 = -99;
	iVar11 = -1;
	iVar12 = -1;
	if (iParam5 == 0)
	{
		Global_68106[1 /*14*/] = { GlobalFunc_10837(iVar5, iParam1, iParam2) };
		if (!GlobalFunc_32(iParam3))
		{
			Global_68105 = (Global_68105 - 1);
			return 0;
		}
		GlobalFunc_10920(iVar5, iParam1, iParam2, 1);
	}
	if (iParam1 == 12)
	{
		uVar13 = Global_2621444;
		uVar14 = Global_2621445;
		PED::CLEAR_ALL_PED_PROPS(iParam0);
		uVar15 = 15;
		if (iParam5 == 1)
		{
			uVar15 = { Global_68149 };
		}
		else
		{
			uVar15 = { GlobalFunc_7617(iVar5, iParam2) };
		}
		iVar0 = 0;
		while (iVar0 <= 14)
		{
			if (uVar15[iVar0] != -99)
			{
				if (iVar0 == 10)
				{
					Global_68106[1 /*14*/] = { GlobalFunc_10837(iVar5, 10, 0) };
					if (iParam4 == -1)
					{
						PED::SET_PED_COMPONENT_VARIATION(iParam0, GlobalFunc_33(iVar0), Global_68106[1 /*14*/].f_3, Global_68106[1 /*14*/].f_4, PED::GET_PED_PALETTE_VARIATION(iParam0, GlobalFunc_33(iVar0)));
					}
					else
					{
						PED::SET_PED_COMPONENT_VARIATION(iParam0, GlobalFunc_33(iVar0), Global_68106[1 /*14*/].f_3, Global_68106[1 /*14*/].f_4, iParam4);
					}
					if (MISC::IS_BIT_SET(Global_68106[1 /*14*/].f_6, 1))
					{
						GlobalFunc_10920(iVar5, 10, 0, 1);
					}
				}
				else
				{
					Global_68106[1 /*14*/] = { GlobalFunc_10837(iVar5, iVar0, uVar15[iVar0]) };
					if (MISC::IS_BIT_SET(Global_68106[1 /*14*/].f_6, 0) || iVar0 == 13)
					{
						if (iVar0 == 13)
						{
							uVar31 = 9;
							if (iParam5 == 1)
							{
								uVar31 = { Global_68165 };
							}
							else
							{
								uVar31 = { GlobalFunc_7616(iVar5, uVar15[iVar0]) };
							}
							iVar1 = 0;
							while (iVar1 <= 8)
							{
								Global_68106[1 /*14*/] = { GlobalFunc_10837(iVar5, 14, uVar31[iVar1]) };
								GlobalFunc_309(iParam0, Global_68106[1 /*14*/].f_12, Global_68106[1 /*14*/].f_3, Global_68106[1 /*14*/].f_4);
								if (MISC::IS_BIT_SET(Global_68106[1 /*14*/].f_6, 1))
								{
									GlobalFunc_10920(iVar5, iVar0, uVar15[iVar0], 1);
								}
								iVar1++;
							}
						}
						else if (iVar0 != 14 && iVar0 != 12)
						{
							if (iParam4 == -1)
							{
								PED::SET_PED_COMPONENT_VARIATION(iParam0, GlobalFunc_33(iVar0), Global_68106[1 /*14*/].f_3, Global_68106[1 /*14*/].f_4, PED::GET_PED_PALETTE_VARIATION(iParam0, GlobalFunc_33(iVar0)));
							}
							else
							{
								PED::SET_PED_COMPONENT_VARIATION(iParam0, GlobalFunc_33(iVar0), Global_68106[1 /*14*/].f_3, Global_68106[1 /*14*/].f_4, iParam4);
							}
							if (MISC::IS_BIT_SET(Global_68106[1 /*14*/].f_6, 1))
							{
								GlobalFunc_10920(iVar5, iVar0, uVar15[iVar0], 1);
							}
						}
					}
				}
			}
			else if (iVar0 != 12 && iVar0 != 14)
			{
				Global_68106[1 /*14*/] = { GlobalFunc_10837(iVar5, iVar0, GlobalFunc_11124(iParam0, iVar0, -1)) };
				if (MISC::IS_BIT_SET(Global_68106[1 /*14*/].f_6, 3))
				{
					uVar41 = { GlobalFunc_7617(iVar5, 0) };
					func_409(iParam0, iVar0, uVar41[iVar0], 0, -1, 0, 0, 0, -1, -1, -1, 0);
				}
			}
			iVar0++;
		}
		Global_2621444 = uVar13;
		Global_2621445 = uVar14;
		if (iParam5 == 0)
		{
			iVar57 = GlobalFunc_9005();
			if (iVar57 != -1)
			{
				GlobalFunc_9004(iVar57, 0, Global_68104);
			}
			GlobalFunc_10761(iParam0, 11, uVar15[11], iParam6, 0);
		}
	}
	else if (iParam1 == 13)
	{
		uVar58 = { GlobalFunc_7616(iVar5, iParam2) };
		iVar1 = 0;
		while (iVar1 <= 8)
		{
			Global_68106[1 /*14*/] = { GlobalFunc_10837(iVar5, 14, uVar58[iVar1]) };
			GlobalFunc_309(iParam0, Global_68106[1 /*14*/].f_12, Global_68106[1 /*14*/].f_3, Global_68106[1 /*14*/].f_4);
			if (MISC::IS_BIT_SET(Global_68106[1 /*14*/].f_6, 1))
			{
				GlobalFunc_10920(iVar5, 14, uVar58[iVar1], 1);
			}
			if (iParam5 == 0)
			{
				if (Global_68105 == 1)
				{
					iVar2 = 0;
					while (iVar2 < 15)
					{
						iVar3 = GlobalFunc_11123(iParam0, iVar5, 14, uVar58[iVar1], iVar2, 0);
						if (iVar3 != -99)
						{
							func_409(iParam0, iVar2, iVar3, 0, -1, 0, 0, 0, -1, -1, -1, 0);
						}
						iVar2++;
					}
				}
			}
			iVar1++;
		}
	}
	else if (iParam1 == 14)
	{
		iVar68 = FILES::GET_HASH_NAME_FOR_COMPONENT(iParam0, 1, PED::GET_PED_DRAWABLE_VARIATION(iParam0, 1), PED::GET_PED_TEXTURE_VARIATION(iParam0, 1));
		if (FILES::DOES_SHOP_PED_APPAREL_HAVE_RESTRICTION_TAG(iVar68, joaat("FORCE_PROP"), 0))
		{
			iVar69 = GlobalFunc_7150(iParam0, 1);
			iVar3 = GlobalFunc_11123(iParam0, iVar5, 1, iVar69, 14, Global_68106[1 /*14*/].f_12);
			if (iVar3 != -99 && iVar3 != iParam2)
			{
				iVar7 = GlobalFunc_5013(iVar5, 1, -1);
			}
		}
		GlobalFunc_309(iParam0, Global_68106[1 /*14*/].f_12, Global_68106[1 /*14*/].f_3, Global_68106[1 /*14*/].f_4);
		if (MISC::IS_BIT_SET(Global_68106[1 /*14*/].f_6, 1))
		{
			GlobalFunc_10920(iVar5, iParam1, iParam2, 1);
		}
		if (iParam5 == 0)
		{
			if (Global_68105 == 1)
			{
				iVar2 = 0;
				while (iVar2 < 15)
				{
					iVar3 = GlobalFunc_11123(iParam0, iVar5, iParam1, iParam2, iVar2, 0);
					if (iVar3 != -99)
					{
						func_409(iParam0, iVar2, iVar3, 0, -1, 0, 0, 0, -1, -1, -1, 0);
					}
					iVar2++;
				}
			}
		}
	}
	else
	{
		if (iParam1 == 11)
		{
			if (iParam5 == 0)
			{
				iVar70 = GlobalFunc_7150(iParam0, 11);
				iVar71 = GlobalFunc_7150(iParam0, 8);
				iVar8 = FILES::GET_HASH_NAME_FOR_COMPONENT(iParam0, 8, PED::GET_PED_DRAWABLE_VARIATION(iParam0, 8), PED::GET_PED_TEXTURE_VARIATION(iParam0, 8));
				if (FILES::DOES_SHOP_PED_APPAREL_HAVE_RESTRICTION_TAG(iVar8, joaat("OVER_JACKET"), 8))
				{
					iVar9 = GlobalFunc_7150(iParam0, 8);
				}
				iVar72 = FILES::GET_HASH_NAME_FOR_COMPONENT(iParam0, 3, PED::GET_PED_DRAWABLE_VARIATION(iParam0, 3), 0);
				if (FILES::DOES_SHOP_PED_APPAREL_HAVE_RESTRICTION_TAG(iVar72, joaat("GLOVES"), 3))
				{
					iVar73 = GlobalFunc_6739(iVar5, iVar71, iVar70);
					if (iVar73 == -99)
					{
						iVar73 = GlobalFunc_11123(iParam0, iVar5, 11, iVar70, 3, 0);
					}
					if (iVar73 != -99)
					{
						iVar74 = iVar73;
						iVar75 = 0;
						while (iVar75 < 9)
						{
							if (GlobalFunc_308(iVar5, iVar74, iVar75) == iVar72)
							{
								iVar11 = iVar75;
								iVar12 = PED::GET_PED_TEXTURE_VARIATION(iParam0, 3);
							}
							iVar75++;
						}
					}
				}
				iVar76 = -1;
				if ((iVar5 == joaat("mp_f_freemode_01") && iParam2 >= 256) && FILES::DOES_SHOP_PED_APPAREL_HAVE_RESTRICTION_TAG(GlobalFunc_4913(iVar5, iParam2, 11, 4), joaat("VEST"), 0))
				{
					iVar70 = GlobalFunc_7150(iParam0, 11);
					if (iVar70 >= 256)
					{
						iVar76 = GlobalFunc_4913(iVar5, iVar70, 11, 4);
					}
					if (iVar70 >= 256 && FILES::DOES_SHOP_PED_APPAREL_HAVE_RESTRICTION_TAG(iVar76, joaat("VEST_SHIRT"), 0))
					{
						iVar77 = GlobalFunc_6738(iVar5, iVar70, iParam2, PED::GET_PED_TEXTURE_VARIATION(iParam0, 11));
						if (iVar77 != -99)
						{
							func_409(iParam0, 8, iVar77, 0, iParam4, 0, 0, 0, -1, -1, -1, 0);
							Global_68106[1 /*14*/] = { GlobalFunc_10837(iVar5, iParam1, iParam2) };
						}
					}
				}
				else if (GlobalFunc_6737(iVar5, iParam2))
				{
					if (iVar70 >= 256)
					{
						iVar76 = GlobalFunc_4913(iVar5, iVar70, 11, 4);
					}
					if (!GlobalFunc_6737(iVar5, iVar70))
					{
						if ((iVar5 == joaat("mp_f_freemode_01") && iVar70 >= 256) && (FILES::DOES_SHOP_PED_APPAREL_HAVE_RESTRICTION_TAG(iVar76, joaat("VEST"), 0) || FILES::DOES_SHOP_PED_APPAREL_HAVE_RESTRICTION_TAG(iVar76, joaat("VEST_SHIRT"), 0)))
						{
						}
						else if ((iVar5 == joaat("mp_f_freemode_01") && iVar70 >= 256) && ((((FILES::DOES_SHOP_PED_APPAREL_HAVE_RESTRICTION_TAG(iVar76, joaat("HEIST_DRAW_5"), 0) || FILES::DOES_SHOP_PED_APPAREL_HAVE_RESTRICTION_TAG(iVar76, joaat("HEIST_DRAW_6"), 0)) || FILES::DOES_SHOP_PED_APPAREL_HAVE_RESTRICTION_TAG(iVar76, joaat("HEIST_DRAW_7"), 0)) || FILES::DOES_SHOP_PED_APPAREL_HAVE_RESTRICTION_TAG(iVar76, joaat("HEIST_DRAW_11"), 0)) || FILES::DOES_SHOP_PED_APPAREL_HAVE_RESTRICTION_TAG(iVar76, joaat("HEIST_DRAW_12"), 0)))
						{
						}
						else
						{
							iVar78 = GlobalFunc_6738(iVar5, iVar70, iParam2, PED::GET_PED_TEXTURE_VARIATION(iParam0, 11));
							if (iVar78 != -99)
							{
								func_409(iParam0, 8, iVar78, 0, iParam4, 0, 0, 0, -1, -1, -1, 0);
								Global_68106[1 /*14*/] = { GlobalFunc_10837(iVar5, iParam1, iParam2) };
								iVar9 = -99;
							}
							else
							{
								if (iVar5 == joaat("mp_m_freemode_01"))
								{
								}
								else if (iVar5 == joaat("mp_f_freemode_01"))
								{
									func_409(iParam0, 8, 48, 0, iParam4, 0, 0, 0, -1, -1, -1, 0);
								}
								Global_68106[1 /*14*/] = { GlobalFunc_10837(iVar5, iParam1, iParam2) };
							}
						}
					}
					else
					{
						Global_68106[1 /*14*/] = { GlobalFunc_10837(iVar5, 11, iVar70) };
						iVar79 = Global_68106[1 /*14*/].f_3;
						Global_68106[1 /*14*/] = { GlobalFunc_10837(iVar5, 11, iParam2) };
						iVar80 = Global_68106[1 /*14*/].f_3;
						if (iVar79 != iVar80)
						{
							Global_68106[1 /*14*/] = { GlobalFunc_10837(iVar5, 8, iVar71) };
							iVar81 = Global_68106[1 /*14*/].f_4;
							iVar82 = GlobalFunc_6736(iVar5, iVar71, iVar81);
							if (iVar82 == -99)
							{
								iVar83 = iVar71;
								if (iVar5 == joaat("mp_m_freemode_01"))
								{
									if ((iParam2 >= 96 && iParam2 <= 107) || GlobalFunc_306(GlobalFunc_4913(iVar5, iParam2, 11, 3)) == 6)
									{
										iVar82 = GlobalFunc_5013(iVar5, 11, -1);
										Global_68106[1 /*14*/] = { GlobalFunc_10837(iVar5, 11, iVar82) };
										iVar83 = GlobalFunc_6738(iVar5, iVar82, iParam2, Global_68106[1 /*14*/].f_4);
									}
								}
							}
							else
							{
								iVar83 = GlobalFunc_6738(iVar5, iVar82, iParam2, iVar81);
							}
							if (iVar83 != -99)
							{
								func_409(iParam0, 8, iVar83, 0, iParam4, 0, 0, 0, -1, -1, -1, 0);
							}
							else if (iVar5 == joaat("mp_m_freemode_01"))
							{
							}
							else if (iVar5 == joaat("mp_f_freemode_01"))
							{
								func_409(iParam0, 8, 48, 0, iParam4, 0, 0, 0, -1, -1, -1, 0);
							}
							Global_68106[1 /*14*/] = { GlobalFunc_10837(iVar5, iParam1, iParam2) };
						}
					}
				}
				else
				{
					GlobalFunc_10622(iVar5, iParam2);
					PED::SET_PED_COMPONENT_VARIATION(iParam0, 10, 0, 0, PED::GET_PED_PALETTE_VARIATION(iParam0, 10));
				}
			}
			GlobalFunc_10761(iParam0, iParam1, iParam2, iParam6, 0);
			if (iParam5 == 0)
			{
				iVar6 = GlobalFunc_6739(iVar5, GlobalFunc_11124(iParam0, 8, -1), iParam2);
			}
		}
		else if (iParam1 == 2)
		{
			if (iParam5 == 0)
			{
				if (iParam8 == -1)
				{
					iParam8 = GlobalFunc_6671(2135, iParam10, 0);
				}
				if (iParam9 == -1)
				{
					iParam9 = GlobalFunc_6671(2142, iParam10, 0);
				}
				PED::_SET_PED_HAIR_COLOR(iParam0, iParam8, iParam9);
			}
			if (iParam7 == 0)
			{
				GlobalFunc_11275(iParam0, iParam2, bParam11);
			}
		}
		else if (iParam1 == 8)
		{
			GlobalFunc_10761(iParam0, iParam1, iParam2, iParam6, 0);
			iVar84 = GlobalFunc_7150(iParam0, 11);
			if (GlobalFunc_6737(iVar5, iVar84))
			{
				iVar85 = GlobalFunc_6736(iVar5, iParam2, Global_68106[1 /*14*/].f_4);
				GlobalFunc_10622(iVar5, iVar85);
			}
			if (iParam5 == 0)
			{
				iVar6 = GlobalFunc_6739(iVar5, iParam2, GlobalFunc_7150(iParam0, 11));
			}
		}
		else if (iParam1 == 9)
		{
			if (iParam2 >= 1 && iParam2 <= 41)
			{
				iVar86 = GlobalFunc_7150(iParam0, 7);
				if (!GlobalFunc_8583(iVar5, iVar86, 9, -99, -99, -99, iParam0, 0, iParam2, -99, -99))
				{
					PED::SET_PED_COMPONENT_VARIATION(iParam0, GlobalFunc_33(7), 0, 0, 0);
				}
			}
		}
		else if (iParam1 == 1)
		{
			if (((iVar5 == joaat("mp_m_freemode_01") && iParam2 >= 26) && FILES::DOES_SHOP_PED_APPAREL_HAVE_RESTRICTION_TAG(Global_2621444, joaat("SHRINK_HEAD"), 0)) || ((iVar5 == joaat("mp_f_freemode_01") && iParam2 >= 26) && FILES::DOES_SHOP_PED_APPAREL_HAVE_RESTRICTION_TAG(Global_2621444, joaat("SHRINK_HEAD"), 0)))
			{
				iVar87 = GlobalFunc_6671(2082, iParam10, 0);
				iVar88 = GlobalFunc_6671(2083, iParam10, 0);
				iVar89 = GlobalFunc_6671(2084, iParam10, 0);
				uVar90 = GlobalFunc_6788(135, iParam10);
				if (iVar5 == joaat("mp_m_freemode_01"))
				{
					PED::SET_PED_HEAD_BLEND_DATA(iParam0, 0, 0, 0, iVar87, iVar88, iVar89, 0f, uVar90, 0f, 0);
				}
				else if (iVar5 == joaat("mp_f_freemode_01"))
				{
					PED::SET_PED_HEAD_BLEND_DATA(iParam0, 21, 0, 0, iVar87, iVar88, iVar89, 0f, fVar90, 0f, 0);
				}
				iVar91 = 0;
				while (iVar91 < 20)
				{
					PED::_SET_PED_FACE_FEATURE(iParam0, iVar91, 0f);
					iVar91++;
				}
			}
			else
			{
				GlobalFunc_9021(iParam0, Global_68104);
			}
			iVar92 = FILES::GET_HASH_NAME_FOR_COMPONENT(iParam0, 1, PED::GET_PED_DRAWABLE_VARIATION(iParam0, 1), PED::GET_PED_TEXTURE_VARIATION(iParam0, 1));
			iVar93 = FILES::GET_HASH_NAME_FOR_COMPONENT(iParam0, 1, Global_68106[1 /*14*/].f_3, Global_68106[1 /*14*/].f_4);
			if (FILES::DOES_SHOP_PED_APPAREL_HAVE_RESTRICTION_TAG(iVar92, joaat("FORCE_PROP"), 0))
			{
				if (!FILES::DOES_SHOP_PED_APPAREL_HAVE_RESTRICTION_TAG(iVar93, joaat("FORCE_PROP"), 0))
				{
					iVar94 = GlobalFunc_7150(iParam0, 1);
					iVar95 = 0;
					while (iVar95 < 9)
					{
						iVar3 = GlobalFunc_11123(iParam0, iVar5, iParam1, iVar94, 14, iVar95);
						iVar96 = GlobalFunc_7953(iParam0, iVar95);
						if (iVar3 == iVar96)
						{
							PED::CLEAR_PED_PROP(iParam0, iVar95);
						}
						iVar95++;
					}
				}
			}
		}
		if (iParam4 == -1)
		{
			PED::SET_PED_COMPONENT_VARIATION(iParam0, GlobalFunc_33(iParam1), Global_68106[1 /*14*/].f_3, Global_68106[1 /*14*/].f_4, PED::GET_PED_PALETTE_VARIATION(iParam0, GlobalFunc_33(iParam1)));
		}
		else
		{
			PED::SET_PED_COMPONENT_VARIATION(iParam0, GlobalFunc_33(iParam1), Global_68106[1 /*14*/].f_3, Global_68106[1 /*14*/].f_4, iParam4);
		}
		if (iParam5 == 0)
		{
			if (Global_68105 == 1)
			{
				iVar2 = 0;
				while (iVar2 < 15)
				{
					iVar3 = GlobalFunc_11123(iParam0, iVar5, iParam1, iParam2, iVar2, 0);
					if (iVar3 != -99)
					{
						func_409(iParam0, iVar2, iVar3, 0, -1, 0, 0, 0, -1, -1, -1, 0);
					}
					iVar2++;
				}
			}
			if (iParam1 == 11 || iParam1 == 8)
			{
				if (GlobalFunc_7998(iParam0))
				{
					iVar97 = -99;
					iVar97 = GlobalFunc_6730(iVar5, iParam2);
					if (iVar97 > 0)
					{
						iVar97 = (iVar97 + PED::GET_PED_TEXTURE_VARIATION(iParam0, 9));
						if (!GlobalFunc_10998(iParam0, 9, iVar97))
						{
							func_409(iParam0, 9, iVar97, 0, iParam4, 0, 0, 0, -1, -1, -1, 0);
						}
					}
					else
					{
						func_409(iParam0, 9, 0, 0, iParam4, 0, 0, 0, -1, -1, -1, 0);
					}
					iVar8 = FILES::GET_HASH_NAME_FOR_COMPONENT(iParam0, 8, PED::GET_PED_DRAWABLE_VARIATION(iParam0, 8), PED::GET_PED_TEXTURE_VARIATION(iParam0, 8));
					if (FILES::DOES_SHOP_PED_APPAREL_HAVE_RESTRICTION_TAG(iVar8, joaat("OVER_JACKET"), 8))
					{
						func_409(iParam0, 9, 0, 0, iParam4, 0, 0, 0, -1, -1, -1, 0);
					}
				}
				iVar98 = GlobalFunc_6671(2024, -1, 0);
				if (PED::GET_PED_DRAWABLE_VARIATION(iParam0, 5) != 0)
				{
					PED::SET_PED_COMPONENT_VARIATION(iParam0, 5, GlobalFunc_5005(iParam0, iVar98), GlobalFunc_282(iParam0, iVar98), GlobalFunc_81(iParam0, iVar98));
				}
				if (iParam0 == PLAYER::PLAYER_PED_ID())
				{
					PLAYER::SET_PLAYER_PARACHUTE_VARIATION_OVERRIDE(PLAYER::PLAYER_ID(), 5, GlobalFunc_5005(PLAYER::PLAYER_PED_ID(), iVar98), GlobalFunc_282(PLAYER::PLAYER_PED_ID(), iVar98), 0);
					PLAYER::SET_PLAYER_PARACHUTE_PACK_TINT_INDEX(PLAYER::PLAYER_ID(), GlobalFunc_81(PLAYER::PLAYER_PED_ID(), iVar98));
					GlobalFunc_5004(PLAYER::PLAYER_ID(), iVar98);
				}
			}
			if (iVar5 == joaat("mp_f_freemode_01") && (iParam1 == 11 || iParam1 == 4))
			{
				if (iParam1 == 11)
				{
					iVar99 = GlobalFunc_11124(iParam0, 4, -1);
					iVar100 = iParam2;
				}
				else
				{
					iVar99 = iParam2;
					iVar100 = GlobalFunc_11124(iParam0, 11, -1);
				}
				if (GlobalFunc_6729(iVar5, 11, iVar100))
				{
					if (!GlobalFunc_6728(iVar5, 4, iVar99))
					{
						if (GlobalFunc_6727(iVar5, 4, iVar99, &uVar101))
						{
							func_409(iParam0, 4, uVar101, 0, iParam4, 0, 0, 0, -1, -1, -1, 0);
						}
					}
				}
				else if (GlobalFunc_6728(iVar5, 4, iVar99))
				{
					if (GlobalFunc_6726(iVar5, 4, iVar99, &uVar101))
					{
						func_409(iParam0, 4, uVar101, 0, iParam4, 0, 0, 0, -1, -1, -1, 0);
					}
				}
			}
			if (iParam1 == 11 || iParam1 == 1)
			{
				GlobalFunc_5003(iParam0);
				iVar102 = PED::GET_PED_DRAWABLE_VARIATION(iParam0, 1);
				iVar103 = PED::GET_PED_TEXTURE_VARIATION(iParam0, 1);
				iVar104 = FILES::GET_HASH_NAME_FOR_COMPONENT(iParam0, 1, iVar102, iVar103);
				if (FILES::DOES_SHOP_PED_APPAREL_HAVE_RESTRICTION_TAG(iVar104, joaat("FORCE_PROP"), 0))
				{
					iVar3 = GlobalFunc_11123(iParam0, iVar5, iParam1, iParam2, 14, 0);
					if (iVar3 != -99)
					{
						func_409(iParam0, 14, iVar3, 0, -1, 0, 0, 0, -1, -1, -1, 0);
					}
					iVar3 = GlobalFunc_11123(iParam0, iVar5, iParam1, iParam2, 14, 1);
					if (iVar3 != -99)
					{
						func_409(iParam0, 14, iVar3, 0, -1, 0, 0, 0, -1, -1, -1, 0);
					}
				}
			}
		}
	}
	if (iParam1 != 2)
	{
		if (GlobalFunc_11202(iParam0, &uVar4))
		{
			func_409(iParam0, 2, uVar4, 0, -1, 0, 0, 0, -1, -1, -1, 0);
		}
	}
	if (iVar6 != -99)
	{
		func_409(iParam0, 3, iVar6, 0, iParam4, 0, 0, 0, -1, -1, -1, 0);
	}
	if (iVar9 != -99)
	{
		func_409(iParam0, 8, iVar9, 0, iParam4, 0, 0, 0, -1, -1, -1, 0);
	}
	if (iVar7 != -99)
	{
		func_409(iParam0, 1, iVar7, 0, -1, 0, 0, 0, -1, -1, -1, 0);
	}
	if (iVar11 != -1)
	{
		iVar105 = GlobalFunc_308(iVar5, PED::GET_PED_DRAWABLE_VARIATION(iParam0, 3), iVar11);
		if (iVar105 != -1)
		{
			if (iVar5 == joaat("mp_m_freemode_01"))
			{
				iVar10 = GlobalFunc_4914(iVar5, iVar105, 3, 3);
			}
			else if (iVar5 == joaat("mp_f_freemode_01"))
			{
				iVar10 = GlobalFunc_4914(iVar5, iVar105, 3, 4);
			}
			if (iVar10 != -99)
			{
				iVar10 = (iVar10 + iVar12);
				func_409(iParam0, 3, iVar10, 0, iParam4, 0, 0, 0, -1, -1, -1, 0);
			}
		}
	}
	Global_68105 = (Global_68105 - 1);
	return 1;
}









































































































































int func_546(int iParam0, int iParam1, int iParam2, int iParam3, int iParam4, int iParam5, int iParam6, int iParam7, int iParam8, int iParam9, int iParam10, int iParam11)//Position - 0x5C75C
{
	int iVar0;
	int iVar1;
	int iVar2;
	int iVar3;
	int iVar4;
	int iVar5;
	int iVar6;
	int iVar7;
	int iVar8;
	int iVar9;
	int iVar10;
	var uVar11;
	var uVar27;
	var uVar37;
	struct<14> Var53;
	var uVar67;
	
	if (PED::IS_PED_INJURED(iParam0) || iParam2 == -99)
	{
		return 0;
	}
	Global_68105++;
	iVar5 = -99;
	iVar6 = -99;
	iVar7 = -99;
	iVar8 = -99;
	iVar9 = -99;
	iVar10 = ENTITY::GET_ENTITY_MODEL(iParam0);
	if (iParam5 == 0)
	{
		Global_68106[1 /*14*/] = { GlobalFunc_10836(iVar10, iParam1, iParam2) };
		if (!GlobalFunc_32(iParam3))
		{
			Global_68105 = (Global_68105 - 1);
			return 0;
		}
		GlobalFunc_8357(iParam1);
	}
	if (iParam1 == 12)
	{
		if (iParam7 == 1)
		{
			if (iVar10 == joaat("player_one"))
			{
				iVar5 = GlobalFunc_7150(iParam0, 8);
				if (iVar5 != 9)
				{
					iVar5 = -99;
				}
			}
			iVar6 = GlobalFunc_7150(iParam0, 9);
			if (iVar10 == joaat("player_zero"))
			{
				if (iVar6 >= 9 && iVar6 <= 14)
				{
				}
				else
				{
					iVar6 = -99;
				}
			}
			else if (iVar10 == joaat("player_one"))
			{
				if (iVar6 >= 5 && iVar6 <= 10)
				{
				}
				else
				{
					iVar6 = -99;
				}
			}
			else if (iVar10 == joaat("player_two"))
			{
				if ((iVar6 >= 9 && iVar6 <= 14) || (iVar6 >= 15 && iVar6 <= 16))
				{
				}
				else
				{
					iVar6 = -99;
				}
			}
			iVar7 = GlobalFunc_7953(iParam0, 1);
			if (!GlobalFunc_6667(iVar10, 14, iVar7))
			{
				iVar7 = -99;
			}
			iVar8 = GlobalFunc_7953(iParam0, 0);
			if (!GlobalFunc_6666(iVar10, 14, iVar8) && !GlobalFunc_6665(iVar10, 14, iVar8))
			{
				iVar8 = -99;
			}
			if (iVar10 == joaat("player_one"))
			{
				iVar9 = GlobalFunc_7953(iParam0, 2);
			}
		}
		PED::CLEAR_ALL_PED_PROPS(iParam0);
		uVar11 = 15;
		if (iParam5 == 1)
		{
			uVar11 = { Global_68149 };
		}
		else
		{
			uVar11 = { GlobalFunc_7617(iVar10, iParam2) };
		}
		iVar0 = 0;
		while (iVar0 <= 14)
		{
			if (uVar11[iVar0] != -99)
			{
				Global_68106[1 /*14*/] = { GlobalFunc_10836(iVar10, iVar0, uVar11[iVar0]) };
				if (MISC::IS_BIT_SET(Global_68106[1 /*14*/].f_6, 0))
				{
					if (iVar0 == 13)
					{
						uVar27 = 9;
						if (iParam5 == 1)
						{
							uVar27 = { Global_68165 };
						}
						else
						{
							uVar27 = { GlobalFunc_7616(iVar10, uVar11[iVar0]) };
						}
						iVar1 = 0;
						while (iVar1 <= 8)
						{
							Global_68106[1 /*14*/] = { GlobalFunc_10836(iVar10, 14, uVar27[iVar1]) };
							GlobalFunc_309(iParam0, Global_68106[1 /*14*/].f_12, Global_68106[1 /*14*/].f_3, Global_68106[1 /*14*/].f_4);
							GlobalFunc_8357(14);
							if (Global_68105 == 1)
							{
								iVar2 = 0;
								while (iVar2 < 15)
								{
									iVar3 = GlobalFunc_11243(iParam0, iVar10, 14, uVar27[iVar1], iVar2, 0);
									if (iVar3 != -99)
									{
										func_546(iParam0, iVar2, iVar3, 0, -1, 0, 0, 0, -1, -1, -1, 0);
									}
									iVar2++;
								}
							}
							iVar1++;
						}
					}
					else if (iVar0 != 14 && iVar0 != 12)
					{
						if ((iVar10 == joaat("player_one") && iVar0 == 2) && uVar11[iVar0] == 20)
						{
							GlobalFunc_4911(iVar10, 2, 20, &iVar4);
						}
						if (iParam4 == -1)
						{
							PED::SET_PED_COMPONENT_VARIATION(iParam0, GlobalFunc_33(iVar0), Global_68106[1 /*14*/].f_3, Global_68106[1 /*14*/].f_4, PED::GET_PED_PALETTE_VARIATION(iParam0, GlobalFunc_33(iVar0)));
						}
						else
						{
							PED::SET_PED_COMPONENT_VARIATION(iParam0, GlobalFunc_33(iVar0), Global_68106[1 /*14*/].f_3, Global_68106[1 /*14*/].f_4, iParam4);
						}
						GlobalFunc_8357(iVar0);
						if (Global_68105 == 1)
						{
							iVar2 = 0;
							while (iVar2 < 15)
							{
								iVar3 = GlobalFunc_11243(iParam0, iVar10, iVar0, uVar11[iVar0], iVar2, 0);
								if (iVar3 != -99)
								{
									func_546(iParam0, iVar2, iVar3, 0, -1, 0, 0, 0, -1, -1, -1, 0);
								}
								iVar2++;
							}
						}
					}
				}
			}
			else if (iVar0 != 12 && iVar0 != 14)
			{
				Global_68106[1 /*14*/] = { GlobalFunc_10836(iVar10, iVar0, GlobalFunc_11122(iParam0, iVar0, -1)) };
				if (MISC::IS_BIT_SET(Global_68106[1 /*14*/].f_6, 3))
				{
					if (iVar0 == 2)
					{
						if (iVar10 == joaat("player_one"))
						{
							if (GlobalFunc_11121(iParam0, iVar10, &iVar4, 1))
							{
								func_546(iParam0, 2, iVar4, 0, -1, 0, 0, 0, -1, -1, -1, 0);
							}
						}
					}
					else
					{
						uVar37 = { GlobalFunc_7617(iVar10, 0) };
						func_546(iParam0, iVar0, uVar37[iVar0], 0, -1, 0, 0, 0, -1, -1, -1, 0);
					}
				}
			}
			iVar0++;
		}
		if (iParam7 == 1)
		{
			Var53 = { GlobalFunc_10836(iVar10, 8, iVar5) };
			if (iVar5 != -99)
			{
				if (GlobalFunc_8307(iVar10, iParam2, 8, iVar5, &uVar11, &Var53))
				{
					func_546(iParam0, 8, iVar5, iParam3, iParam4, iParam5, iParam6, iParam7, -1, -1, -1, 0);
				}
			}
			Var53 = { GlobalFunc_10836(iVar10, 9, iVar6) };
			if (iVar6 != -99)
			{
				if (GlobalFunc_8307(iVar10, iParam2, 9, iVar6, &uVar11, &Var53))
				{
					func_546(iParam0, 9, iVar6, iParam3, iParam4, iParam5, iParam6, iParam7, -1, -1, -1, 0);
				}
			}
			Var53 = { GlobalFunc_10836(iVar10, 14, iVar7) };
			if (iVar7 != -99)
			{
				if (GlobalFunc_8307(iVar10, iParam2, 14, iVar7, &uVar11, &Var53))
				{
					func_546(iParam0, 14, iVar7, iParam3, iParam4, iParam5, iParam6, iParam7, -1, -1, -1, 0);
				}
			}
			Var53 = { GlobalFunc_10836(iVar10, 14, iVar8) };
			if (iVar8 != -99)
			{
				if (GlobalFunc_8307(iVar10, iParam2, 14, iVar8, &uVar11, &Var53))
				{
					func_546(iParam0, 14, iVar8, iParam3, iParam4, iParam5, iParam6, iParam7, -1, -1, -1, 0);
				}
			}
			Var53 = { GlobalFunc_10836(iVar10, 14, iVar9) };
			if (iVar9 != -99)
			{
				if (GlobalFunc_8307(iVar10, iParam2, 14, iVar9, &uVar11, &Var53))
				{
					func_546(iParam0, 14, iVar9, iParam3, iParam4, iParam5, iParam6, iParam7, -1, -1, -1, 0);
				}
			}
		}
	}
	else if (iParam1 == 13)
	{
		uVar67 = { GlobalFunc_7616(iVar10, iParam2) };
		iVar1 = 0;
		while (iVar1 <= 8)
		{
			Global_68106[1 /*14*/] = { GlobalFunc_10836(iVar10, 14, uVar67[iVar1]) };
			GlobalFunc_309(iParam0, Global_68106[1 /*14*/].f_12, Global_68106[1 /*14*/].f_3, Global_68106[1 /*14*/].f_4);
			GlobalFunc_8357(14);
			if (Global_68105 == 1)
			{
				iVar2 = 0;
				while (iVar2 < 15)
				{
					iVar3 = GlobalFunc_11243(iParam0, iVar10, 14, uVar67[iVar1], iVar2, 0);
					if (iVar3 != -99)
					{
						func_546(iParam0, iVar2, iVar3, 0, -1, 0, 0, 0, -1, -1, -1, 0);
					}
					iVar2++;
				}
			}
			iVar1++;
		}
	}
	else if (iParam1 == 14)
	{
		GlobalFunc_309(iParam0, Global_68106[1 /*14*/].f_12, Global_68106[1 /*14*/].f_3, Global_68106[1 /*14*/].f_4);
		GlobalFunc_8357(iParam1);
		if (Global_68105 == 1)
		{
			iVar2 = 0;
			while (iVar2 < 15)
			{
				iVar3 = GlobalFunc_11243(iParam0, iVar10, iParam1, iParam2, iVar2, 0);
				if (iVar3 != -99)
				{
					func_546(iParam0, iVar2, iVar3, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				}
				iVar2++;
			}
		}
	}
	else
	{
		if (iParam4 == -1)
		{
			PED::SET_PED_COMPONENT_VARIATION(iParam0, GlobalFunc_33(iParam1), Global_68106[1 /*14*/].f_3, Global_68106[1 /*14*/].f_4, PED::GET_PED_PALETTE_VARIATION(iParam0, GlobalFunc_33(iParam1)));
		}
		else
		{
			PED::SET_PED_COMPONENT_VARIATION(iParam0, GlobalFunc_33(iParam1), Global_68106[1 /*14*/].f_3, Global_68106[1 /*14*/].f_4, iParam4);
		}
		if (Global_68105 == 1)
		{
			iVar2 = 0;
			while (iVar2 < 15)
			{
				iVar3 = GlobalFunc_11243(iParam0, iVar10, iParam1, iParam2, iVar2, 0);
				if (iVar3 != -99)
				{
					func_546(iParam0, iVar2, iVar3, 0, -1, 0, 0, 0, -1, -1, -1, 0);
				}
				iVar2++;
			}
		}
		if (iParam6 == 0)
		{
			GlobalFunc_11036(iVar10, iParam1, iParam2);
		}
	}
	if (Global_68105 == 1)
	{
		if (GlobalFunc_11121(iParam0, iVar10, &iVar4, 0))
		{
			func_546(iParam0, 2, iVar4, 0, -1, 0, 0, 0, -1, -1, -1, 0);
		}
		if (GlobalFunc_11120(iParam0, iVar10, &iVar4))
		{
			func_546(iParam0, 1, iVar4, 0, -1, 0, 0, 0, -1, -1, -1, 0);
		}
	}
	Global_68105 = (Global_68105 - 1);
	return 1;
}

























void func_571(int iParam0)//Position - 0x5F782
{
	int iVar0;
	int iVar1;
	bool bVar2;
	
	iVar0 = GlobalFunc_6674(iParam0);
	if (GlobalFunc_42(iVar0))
	{
		if (!Global_89948[iVar0])
		{
			if (Global_SAVE_DATA.COMPONENTS_ARRAY.PP_INFO_STRUCT.f_1619[iVar0] != 0)
			{
				if (GlobalFunc_518(iParam0) != Global_SAVE_DATA.COMPONENTS_ARRAY.PP_INFO_STRUCT.f_1619[iVar0])
				{
					GlobalFunc_521(iVar0);
					Global_SAVE_DATA.COMPONENTS_ARRAY.PP_INFO_STRUCT.f_1619[iVar0] = GlobalFunc_518(iParam0);
				}
			}
		}
		func_406(iParam0, &(Global_SAVE_DATA.COMPONENTS_ARRAY.PP_INFO_STRUCT[iVar0 /*65*/]), 0);
		if (!Global_89948[iVar0])
		{
			bVar2 = false;
			if (iVar0 == 0)
			{
				if (!GlobalFunc_526(49))
				{
					iVar1 = GlobalFunc_11122(iParam0, 12, -1);
					if (iVar1 == 16)
					{
						bVar2 = true;
					}
					GlobalFunc_11162(GlobalFunc_4917(0), 12, 16, 0, 0, 0, 0);
				}
				if (!GlobalFunc_526(44))
				{
					iVar1 = GlobalFunc_11122(iParam0, 3, -1);
					if (((((iVar1 == 70 || iVar1 == 71) || iVar1 == 72) || iVar1 == 73) || iVar1 == 74) || iVar1 == 75)
					{
						bVar2 = true;
					}
					iVar1 = GlobalFunc_11122(iParam0, 4, -1);
					if ((((iVar1 == 41 || iVar1 == 42) || iVar1 == 43) || iVar1 == 44) || iVar1 == 45)
					{
						bVar2 = true;
					}
					GlobalFunc_11162(GlobalFunc_4917(0), 3, 70, 1, 0, 0, 0);
					GlobalFunc_11162(GlobalFunc_4917(0), 3, 71, 1, 0, 0, 0);
					GlobalFunc_11162(GlobalFunc_4917(0), 3, 72, 1, 0, 0, 0);
					GlobalFunc_11162(GlobalFunc_4917(0), 3, 73, 1, 0, 0, 0);
					GlobalFunc_11162(GlobalFunc_4917(0), 3, 74, 1, 0, 0, 0);
					GlobalFunc_11162(GlobalFunc_4917(0), 3, 75, 1, 0, 0, 0);
					GlobalFunc_11162(GlobalFunc_4917(0), 4, 41, 1, 0, 0, 0);
					GlobalFunc_11162(GlobalFunc_4917(0), 4, 42, 1, 0, 0, 0);
					GlobalFunc_11162(GlobalFunc_4917(0), 4, 43, 1, 0, 0, 0);
					GlobalFunc_11162(GlobalFunc_4917(0), 4, 44, 1, 0, 0, 0);
					GlobalFunc_11162(GlobalFunc_4917(0), 4, 45, 1, 0, 0, 0);
				}
			}
			else if (iVar0 == 2)
			{
				iVar1 = GlobalFunc_11122(iParam0, 4, -1);
				if (iVar1 == 93)
				{
					bVar2 = true;
				}
			}
			if (bVar2)
			{
				GlobalFunc_521(iVar0);
				func_406(iParam0, &(Global_SAVE_DATA.COMPONENTS_ARRAY.PP_INFO_STRUCT[iVar0 /*65*/]), 0);
			}
		}
		Global_89948[iVar0] = 1;
	}
}








void func_579()//Position - 0x60192
{
	STREAMING::REQUEST_COLLISION_AT_COORD(1770.446f, 3240.695f, 41.1108f);
	iLocal_49 = VEHICLE::CREATE_VEHICLE(joaat("skylift"), 1770.446f, 3240.695f, 41.1108f, 281.6867f, 1, 1);
	VEHICLE::SET_VEHICLE_ENGINE_ON(iLocal_49, 1, 1);
	VEHICLE::SET_HELI_BLADES_FULL_SPEED(iLocal_49);
	VEHICLE::SET_PLAYBACK_SPEED(iLocal_49, 0.6f);
	VEHICLE::SET_VEHICLE_STRONG(iLocal_49, 1);
	ENTITY::SET_ENTITY_HEALTH(iLocal_49, 3000);
	VEHICLE::SET_VEHICLE_ENGINE_CAN_DEGRADE(iLocal_49, 0);
	ENTITY::_SET_ENTITY_CLEANUP_BY_ENGINE(iLocal_49, 1);
	ENTITY::SET_ENTITY_LOD_DIST(iLocal_49, 3000);
	VEHICLE::SET_VEHICLE_LOD_MULTIPLIER(iLocal_49, 100f);
	ENTITY::SET_ENTITY_LOAD_COLLISION_FLAG(iLocal_49, 1);
	func_583(iLocal_49);
	func_109(0);
	func_105(0);
	func_108(0);
	GlobalFunc_743(iLocal_49, 0);
	GlobalFunc_504(iLocal_49, -1);
	GlobalFunc_503(iLocal_49, -1);
}




int func_583(int iParam0)//Position - 0x602DC
{
	if (!DECORATOR::DECOR_EXIST_ON(uParam0, "IgnoredByQuickSave"))
	{
		if (DECORATOR::DECOR_SET_BOOL(iParam0, "IgnoredByQuickSave", 1))
		{
			return 1;
		}
	}
	else
	{
		return 1;
	}
	return 0;
}


void func_585()//Position - 0x6034B
{
	switch (iLocal_260)
	{
		case 0:
			if (iLocal_367 == 0 && iLocal_368 == 0)
			{
				GlobalFunc_565(900, 1, 0);
			}
			GlobalFunc_Checkpoint3(1, "STAGE_WAIT_FOR_TRAIN", 0, 0, 0, 1);
			if (func_211())
			{
				Global_Mission_Fail_State.f_12[0] = 0;
			}
			else if (func_49())
			{
				Global_Mission_Fail_State.f_12[0] = 1;
			}
			else if (func_209())
			{
				Global_Mission_Fail_State.f_12[0] = 2;
			}
			if (func_211())
			{
				GlobalFunc_173(&uLocal_95, 0, PLAYER::PLAYER_PED_ID(), "MICHAEL", 0, 1);
				GlobalFunc_173(&uLocal_95, 2, 0, "TREVOR", 0, 1);
			}
			else if (func_49())
			{
				GlobalFunc_173(&uLocal_95, 1, PLAYER::PLAYER_PED_ID(), "FRANKLIN", 0, 1);
				GlobalFunc_173(&uLocal_95, 2, 0, "TREVOR", 0, 1);
			}
			else if (func_209())
			{
				GlobalFunc_173(&uLocal_95, 2, PLAYER::PLAYER_PED_ID(), "TREVOR", 0, 1);
				GlobalFunc_173(&uLocal_95, 0, 0, "MICHAEL", 0, 1);
			}
			if (!AUDIO::IS_AUDIO_SCENE_ACTIVE("BS_P_D_STEALTH"))
			{
				AUDIO::START_AUDIO_SCENE("BS_P_D_STEALTH");
			}
			iLocal_374 = 0;
			func_136(3);
			iLocal_373 = 0;
			iLocal_372 = 0;
			iLocal_260++;
			break;
		
		case 1:
			if (func_126(3))
			{
				Local_377 = { 2632.059f, 2934.051f, 43.7052f };
				Local_380 = { 0f, 0f, 58.53f };
				uLocal_384 = PED::CREATE_SYNCHRONIZED_SCENE(Local_377, Local_380, 2);
				PED::SET_SYNCHRONIZED_SCENE_LOOPED(uLocal_384, 0);
				PED::SET_SYNCHRONIZED_SCENE_PHASE(uLocal_384, 0f);
				PED::SET_SYNCHRONIZED_SCENE_RATE(uLocal_384, 0f);
				ENTITY::PLAY_SYNCHRONIZED_MAP_ENTITY_ANIM(2632.059f, 2934.051f, 43.7052f, 1f, joaat("p_rail_controller_s"), uLocal_384, "pull_level_panel", "missbigscoreprepd", 1000f, -1056964608, 0, 1148846080);
				func_45();
				iLocal_260++;
			}
			break;
		
		case 2:
			if (func_48("BSPRP_DEAD", "BSPRP_DEADF", "BSPRP_DEADT"))
			{
				iLocal_260++;
			}
			break;
		
		case 3:
			if (!GlobalFunc_5172(&Local_261, 1))
			{
				iLocal_260++;
			}
			break;
		
		case 4:
			if (func_593(&Local_261, 2631.93f, 2934.081f, 45.7436f, 1.5f, 1.5f, 2.5f, 0, "GOTOBOX", 0, 1, -1, 1))
			{
				iLocal_260++;
			}
			break;
		
		case 5:
		case 6:
			if (((((!GlobalFunc_5172(&Local_261, 1) && SYSTEM::TIMERA() > iLocal_386) && !func_592(2742.81f, 3121.873f, 44.8242f, 1094713344, 1047233823, 1055957975)) && MISC::GET_DISTANCE_BETWEEN_COORDS(2742.81f, 3121.873f, 44.8242f, ENTITY::GET_ENTITY_COORDS(PLAYER::PLAYER_PED_ID(), 1), 1) > 80f) && iLocal_372) && iLocal_260 == 5)
			{
				func_136(4);
				iLocal_386 = MISC::GET_RANDOM_INT_IN_RANGE(30000, 40000);
				VEHICLE::SET_RANDOM_TRAINS(0);
				VEHICLE::DELETE_MISSION_TRAIN(&iLocal_50);
				iLocal_50 = VEHICLE::CREATE_MISSION_TRAIN(7, 2928.826f, 3572.775f, 54.0699f, 1);
				VEHICLE::SET_TRAIN_CRUISE_SPEED(iLocal_50, 27f);
				VEHICLE::SET_TRAIN_SPEED(iLocal_50, 27f);
				ENTITY::SET_ENTITY_LOD_DIST(iLocal_50, 3000);
				VEHICLE::SET_VEHICLE_LOD_MULTIPLIER(iLocal_50, 100f);
				uLocal_371 = GlobalFunc_6783(iLocal_50, 0, 0);
				TASK::TASK_LOOK_AT_ENTITY(PLAYER::PLAYER_PED_ID(), iLocal_50, -1, 2048, 2);
				iLocal_260 = 6;
			}
			if (!ENTITY::IS_ENTITY_DEAD(iLocal_50))
			{
				if (ENTITY::IS_ENTITY_AT_COORD(iLocal_50, 2644.029f, 2974.48f, 39.5441f, 10f, 10f, 10f, 0, 1, 0) && iLocal_260 == 6)
				{
					if (iLocal_372)
					{
						iLocal_260 = 7;
					}
					else
					{
						HUD::REMOVE_BLIP(&uLocal_371);
						SYSTEM::SETTIMERA(0);
						iLocal_260 = 5;
					}
				}
			}
			break;
		
		case 7:
			if (!GlobalFunc_5172(&Local_261, 1))
			{
				iLocal_260 = 0;
				iLocal_286 = 4;
			}
			break;
	}
	if (iLocal_260 >= 3)
	{
		if (iLocal_372 == 0)
		{
			if (func_593(&Local_261, 2631.93f, 2935.081f, 45.7436f, 0.1f, 0.1f, 1.1f, 0, "GOTOBOX", 0, 1, -1, 1) || (HUD::DOES_BLIP_EXIST(Local_261.f_5) && ENTITY::IS_ENTITY_IN_ANGLED_AREA(PLAYER::PLAYER_PED_ID(), 2632.733f, 2934.568f, 43.71917f, 2631.923f, 2933.235f, 45.46917f, 1.9f, 0, 1, 0)))
			{
				if (GlobalFunc_552(1, 0, 1) && !FIRE::IS_ENTITY_ON_FIRE(PLAYER::PLAYER_PED_ID()))
				{
					if (HUD::IS_MESSAGE_BEING_DISPLAYED() && !AUDIO::IS_SCRIPTED_CONVERSATION_ONGOING())
					{
						HUD::CLEAR_PRINTS();
					}
					if (!HUD::IS_HELP_MESSAGE_BEING_DISPLAYED())
					{
						GlobalFunc_159("FLIPSWITCH", -1);
					}
					if (PAD::IS_CONTROL_JUST_PRESSED(0, 51))
					{
						if (func_591())
						{
							if (!HUD::IS_HELP_MESSAGE_BEING_DISPLAYED())
							{
								GlobalFunc_159("NOFLIP", -1);
							}
						}
						else
						{
							GlobalFunc_7139(&Local_261, 0);
							PAD::SET_PAD_SHAKE(0, 500, 200);
							iLocal_372 = 1;
						}
					}
				}
				else if (HUD::IS_HELP_MESSAGE_BEING_DISPLAYED())
				{
					HUD::CLEAR_HELP(1);
				}
			}
			else if (HUD::IS_HELP_MESSAGE_BEING_DISPLAYED())
			{
				HUD::CLEAR_HELP(1);
			}
		}
		switch (iLocal_374)
		{
			case 0:
				RECORDING::_0x293220DA1B46CEBC(5f, 0f, 4);
				RECORDING::_0x48621C9FCA3EBD28(3);
				WEAPON::SET_CURRENT_PED_WEAPON(PLAYER::PLAYER_PED_ID(), joaat("weapon_unarmed"), 1);
				iLocal_374++;
				break;
			
			case 1:
				if (iLocal_372 == 1)
				{
					CAM::DESTROY_ALL_CAMS(0);
					uLocal_47 = CAM::CREATE_CAM("DEFAULT_SCRIPTED_CAMERA", 0);
					uLocal_48 = CAM::CREATE_CAM("DEFAULT_SCRIPTED_CAMERA", 0);
					CAM::SET_CAM_COORD(uLocal_47, 2632.582f, 2935.789f, 44.80594f);
					CAM::SET_CAM_ROT(uLocal_47, 8.405854f, -1.19316f, 174.7029f, 2);
					CAM::SET_CAM_FOV(uLocal_47, 26.77819f);
					CAM::SET_CAM_COORD(uLocal_48, 2632.622f, 2936.221f, 44.74183f);
					CAM::SET_CAM_ROT(uLocal_48, 8.405854f, -1.19316f, 174.7029f, 2);
					CAM::SET_CAM_FOV(uLocal_48, 26.77819f);
					CAM::SET_CAM_ACTIVE_WITH_INTERP(uLocal_48, uLocal_47, 4000, 2, 0);
					WEAPON::SET_CURRENT_PED_WEAPON(PLAYER::PLAYER_PED_ID(), joaat("weapon_unarmed"), 1);
					MISC::CLEAR_AREA_OF_VEHICLES(2631.992f, 2934.091f, 43.69f, 5f, 0, 0, 0, 0, 0);
					MISC::CLEAR_AREA_OF_PROJECTILES(2631.992f, 2934.091f, 43.69f, 5f, 0);
					FIRE::STOP_FIRE_IN_RANGE(2631.992f, 2934.091f, 43.69f, 8f);
					func_29(1, 0, 2000, 1);
					Local_377 = { 2632.059f, 2934.051f, 43.7052f };
					Local_380 = { 0f, 0f, 58.53f };
					uLocal_383 = PED::CREATE_SYNCHRONIZED_SCENE(Local_377, Local_380, 2);
					TASK::TASK_SYNCHRONIZED_SCENE(PLAYER::PLAYER_PED_ID(), uLocal_383, "missbigscoreprepd", "pull_level_michael", 1000f, -1000f, 0, 0, 1148846080, 0);
					PED::SET_SYNCHRONIZED_SCENE_LOOPED(uLocal_383, 0);
					PED::FORCE_PED_AI_AND_ANIMATION_UPDATE(PLAYER::PLAYER_PED_ID(), 0, 0);
					PED::SET_SYNCHRONIZED_SCENE_RATE(uLocal_384, 1f);
					iLocal_374++;
				}
				break;
			
			case 2:
				if (PED::GET_SYNCHRONIZED_SCENE_PHASE(uLocal_383) >= 0.8f)
				{
					uLocal_384 = PED::CREATE_SYNCHRONIZED_SCENE(Local_377, Local_380, 2);
					PED::SET_SYNCHRONIZED_SCENE_LOOPED(uLocal_384, 1);
					ENTITY::PLAY_SYNCHRONIZED_MAP_ENTITY_ANIM(2632.059f, 2934.051f, 43.705f, 1f, joaat("p_rail_controller_s"), uLocal_384, "control_panel_loop_panel", "missbigscoreprepd", 1000f, -1056964608, 0, 1148846080);
					TASK::CLEAR_PED_TASKS(PLAYER::PLAYER_PED_ID());
					iLocal_374++;
				}
				break;
			
			case 3:
				if (iLocal_372 == 1)
				{
					GlobalFunc_7621(92, 1, 0, 1, 0);
					GlobalFunc_7621(93, 1, 0, 1, 0);
					iLocal_375 = OBJECT::CREATE_OBJECT_NO_OFFSET(joaat("prop_ld_rail_01"), 2626.249f, 2948.616f, 39.25363f, 1, 1, 0);
					iLocal_376 = OBJECT::CREATE_OBJECT_NO_OFFSET(joaat("prop_ld_rail_02"), 2625.446f, 2949.194f, 39.25363f, 1, 1, 0);
					ENTITY::FREEZE_ENTITY_POSITION(iLocal_375, 1);
					ENTITY::FREEZE_ENTITY_POSITION(iLocal_376, 1);
					if (!AUDIO::IS_AUDIO_SCENE_ACTIVE("BS_P_D_SWITCH_TRACKS"))
					{
						AUDIO::START_AUDIO_SCENE("BS_P_D_SWITCH_TRACKS");
					}
					CAM::SET_CAM_COORD(uLocal_47, 2622.918f, 2948.421f, 40.63168f);
					CAM::SET_CAM_ROT(uLocal_47, -19.42715f, 0f, -64.46409f, 2);
					CAM::SET_CAM_FOV(uLocal_47, 41.75505f);
					CAM::SET_CAM_COORD(uLocal_48, 2623.317f, 2948.612f, 40.47582f);
					CAM::SET_CAM_ROT(uLocal_48, -19.42715f, 0f, -64.46409f, 2);
					CAM::SET_CAM_FOV(uLocal_48, 41.75505f);
					CAM::SET_CAM_ACTIVE_WITH_INTERP(uLocal_48, uLocal_47, 4000, 2, 0);
					SYSTEM::SETTIMERA(0);
					SYSTEM::SETTIMERB(0);
					AUDIO::PLAY_SOUND_FROM_ENTITY(-1, "TRAIN_SWITCH_TRACKS_MASTER", iLocal_375, 0, 0, 0);
					FIRE::STOP_FIRE_IN_RANGE(2622.918f, 2948.421f, 40.63168f, 100f);
					iLocal_374++;
				}
				break;
			
			case 4:
			case 5:
				if (SYSTEM::TIMERB() > 500)
				{
					if (fLocal_385 < 3f)
					{
						fLocal_385 = (fLocal_385 + (1.375f * SYSTEM::TIMESTEP()));
					}
				}
				if (ENTITY::DOES_ENTITY_EXIST(iLocal_375))
				{
					ENTITY::SET_ENTITY_HEADING(iLocal_375, fLocal_385);
				}
				if (ENTITY::DOES_ENTITY_EXIST(iLocal_376))
				{
					ENTITY::SET_ENTITY_HEADING(iLocal_376, fLocal_385);
				}
				if (iLocal_374 == 4)
				{
					if (AUDIO::PREPARE_MUSIC_EVENT("FHPRD_SIDINGS"))
					{
						AUDIO::TRIGGER_MUSIC_EVENT("FHPRD_SIDINGS");
						iLocal_374 = 5;
					}
				}
				if (SYSTEM::TIMERB() > 4000)
				{
					iLocal_374 = 6;
				}
				break;
			
			case 6:
				if (AUDIO::IS_AUDIO_SCENE_ACTIVE("BS_P_D_SWITCH_TRACKS"))
				{
					AUDIO::STOP_AUDIO_SCENE("BS_P_D_SWITCH_TRACKS");
				}
				func_29(0, 0, 2000, 1);
				RECORDING::_0x81CBAE94390F9F89();
				iLocal_374++;
				break;
			
			case 7:
				if (!GlobalFunc_5172(&Local_261, 2) && iLocal_373 == 1)
				{
					GlobalFunc_164("BSPD_WAIT", 7500, 1);
					iLocal_374++;
				}
				break;
		}
		if (iLocal_372 == 1 && iLocal_373 == 0)
		{
			if (func_48("BSPRP_FLIPED", "BSPRP_FLIPF", "BSPRP_FLIPT"))
			{
				iLocal_373 = 1;
			}
		}
	}
}






int func_591()//Position - 0x6501B
{
	if (ENTITY::DOES_ENTITY_EXIST(iLocal_50))
	{
		if ((((ENTITY::DOES_ENTITY_EXIST(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 0)) && ENTITY::DOES_ENTITY_EXIST(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 1))) && ENTITY::DOES_ENTITY_EXIST(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 2))) && ENTITY::DOES_ENTITY_EXIST(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 3))) && ENTITY::DOES_ENTITY_EXIST(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 4)))
		{
			if (((((ENTITY::IS_ENTITY_AT_COORD(iLocal_50, 2644.029f, 2974.48f, 39.5441f, 10f, 10f, 10f, 0, 1, 0) || ENTITY::IS_ENTITY_AT_COORD(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 0), 2644.029f, 2974.48f, 39.5441f, 20f, 20f, 10f, 0, 1, 0)) || ENTITY::IS_ENTITY_AT_COORD(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 1), 2644.029f, 2974.48f, 39.5441f, 20f, 20f, 10f, 0, 1, 0)) || ENTITY::IS_ENTITY_AT_COORD(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 2), 2644.029f, 2974.48f, 39.5441f, 20f, 20f, 10f, 0, 1, 0)) || ENTITY::IS_ENTITY_AT_COORD(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 3), 2644.029f, 2974.48f, 39.5441f, 20f, 20f, 10f, 0, 1, 0)) || ENTITY::IS_ENTITY_AT_COORD(VEHICLE::GET_TRAIN_CARRIAGE(iLocal_50, 4), 2644.029f, 2974.48f, 39.5441f, 50f, 50f, 10f, 0, 1, 0))
			{
				return 1;
			}
		}
	}
	return 0;
}

int func_592(struct<3> Param0, float fParam3, float fParam4, float fParam5)//Position - 0x651A3
{
	int iVar0;
	float fVar1;
	float fVar2;
	
	if (PLAYER::IS_PLAYER_PLAYING(PLAYER::PLAYER_ID()))
	{
		if (PLAYER::IS_PLAYER_FREE_AIMING(PLAYER::PLAYER_ID()))
		{
			if (!PED::IS_PED_INJURED(PLAYER::PLAYER_PED_ID()))
			{
				if (WEAPON::GET_CURRENT_PED_WEAPON(PLAYER::PLAYER_PED_ID(), &iVar0, 1))
				{
					if (iVar0 == joaat("weapon_sniperrifle") || iVar0 == joaat("weapon_heavysniper"))
					{
						if (CAM::IS_SPHERE_VISIBLE(Param0, 0.001f))
						{
							if (CAM::GET_GAMEPLAY_CAM_FOV() < fParam3)
							{
								GRAPHICS::GET_SCREEN_COORD_FROM_WORLD_COORD(Param0, &fVar1, &fVar2);
								if (((fVar1 > (0.5f - fParam4) && fVar1 < (0.5f + fParam4)) && fVar2 > (0.5f - fParam5)) && fVar2 < (0.5f + fParam5))
								{
									return 1;
								}
							}
						}
					}
				}
			}
		}
	}
	return 0;
}

bool func_593(var uParam0, struct<3> Param1, struct<3> Param4, int iParam7, char* sParam8, bool bParam9, bool bParam10, int iParam11, bool bParam12)//Position - 0x6525E
{
	return GlobalFunc_8568(uParam0, Param1, Param4, GlobalFunc_649(), GlobalFunc_649(), iParam7, 3, 0, 0, 0, 0, sParam8, GlobalFunc_648(), GlobalFunc_648(), GlobalFunc_648(), GlobalFunc_648(), GlobalFunc_648(), 0, bParam9, GlobalFunc_648(), 0, 0, bParam10, iParam11, GlobalFunc_648(), GlobalFunc_648(), GlobalFunc_648(), bParam12, 1065353216);
}


void func_595()//Position - 0x65363
{
	switch (iLocal_260)
	{
		case 0:
			if (func_211())
			{
				Global_Mission_Fail_State.f_12[0] = 0;
			}
			else if (func_49())
			{
				Global_Mission_Fail_State.f_12[0] = 1;
			}
			else if (func_209())
			{
				Global_Mission_Fail_State.f_12[0] = 2;
			}
			if (func_211())
			{
				GlobalFunc_173(&uLocal_95, 0, PLAYER::PLAYER_PED_ID(), "MICHAEL", 0, 1);
				GlobalFunc_173(&uLocal_95, 2, 0, "TREVOR", 0, 1);
			}
			else if (func_49())
			{
				GlobalFunc_173(&uLocal_95, 1, PLAYER::PLAYER_PED_ID(), "FRANKLIN", 0, 1);
				GlobalFunc_173(&uLocal_95, 2, 0, "TREVOR", 0, 1);
			}
			else if (func_209())
			{
				GlobalFunc_173(&uLocal_95, 2, PLAYER::PLAYER_PED_ID(), "TREVOR", 0, 1);
				GlobalFunc_173(&uLocal_95, 0, 0, "MICHAEL", 0, 1);
			}
			func_136(2);
			VEHICLE::SET_RANDOM_TRAINS(0);
			iLocal_260++;
			break;
		
		case 1:
			if (func_126(2))
			{
				if (!AUDIO::IS_AUDIO_SCENE_ACTIVE("BS_P_D_STEALTH"))
				{
					AUDIO::START_AUDIO_SCENE("BS_P_D_STEALTH");
				}
				if (!ENTITY::DOES_ENTITY_EXIST(Global_86864.f_9[0]))
				{
					iLocal_365 = PED::CREATE_PED(26, joaat("s_m_y_construct_01"), 2628.908f, 2947.625f, 40.428f, 338.9562f, 1, 1);
				}
				else
				{
					iLocal_365 = Global_86864.f_9[0];
					ENTITY::SET_ENTITY_AS_MISSION_ENTITY(iLocal_365, 1, 1);
				}
				if (!ENTITY::DOES_ENTITY_EXIST(Global_86864.f_9[1]))
				{
					iLocal_366 = PED::CREATE_PED(26, joaat("s_m_y_construct_01"), 2632.814f, 2933.482f, 43.7436f, 53.5715f, 1, 1);
				}
				else
				{
					iLocal_366 = Global_86864.f_9[1];
					ENTITY::SET_ENTITY_AS_MISSION_ENTITY(iLocal_366, 1, 1);
				}
				GlobalFunc_562(83);
				if (!ENTITY::IS_ENTITY_DEAD(iLocal_365))
				{
					ENTITY::SET_ENTITY_HEALTH(iLocal_365, 150);
					PED::SET_PED_RELATIONSHIP_GROUP_HASH(iLocal_365, iLocal_361);
					GlobalFunc_173(&uLocal_95, 4, iLocal_365, "CONSTRUCTION1", 0, 1);
					TASK::TASK_START_SCENARIO_AT_POSITION(iLocal_365, "WORLD_HUMAN_SMOKING", 2628.908f, 2947.625f, 40.428f, 347.0879f, 0, 0, 1);
					PED::SET_PED_SHOULD_PLAY_IMMEDIATE_SCENARIO_EXIT(iLocal_365);
					PED::SET_BLOCKING_OF_NON_TEMPORARY_EVENTS(iLocal_365, 1);
					uLocal_363 = GlobalFunc_6797(iLocal_365, 1, 145);
				}
				if (!ENTITY::IS_ENTITY_DEAD(iLocal_366))
				{
					ENTITY::SET_ENTITY_HEALTH(iLocal_366, 150);
					PED::SET_PED_RELATIONSHIP_GROUP_HASH(iLocal_366, iLocal_361);
					GlobalFunc_173(&uLocal_95, 3, iLocal_366, "CONSTRUCTION2", 0, 1);
					TASK::TASK_PLAY_ANIM(iLocal_366, "missbigscoreprep", "idle_a", 8f, -8f, -1, 1, 0, 0, 0, 0);
					PED::SET_BLOCKING_OF_NON_TEMPORARY_EVENTS(iLocal_366, 1);
					uLocal_364 = GlobalFunc_6797(iLocal_366, 1, 145);
				}
				iLocal_367 = 0;
				iLocal_368 = 0;
				func_45();
				iLocal_260++;
			}
			break;
		
		case 2:
			if (!GlobalFunc_Is_Mission_Retry())
			{
				if (func_211())
				{
					if (GlobalFunc_10638(&uLocal_95, 2, "BSPRP", "BSPRP_KILLG", 9, 1, 0, 0, 0))
					{
						RECORDING::_0x293220DA1B46CEBC(2f, 12f, 4);
						iLocal_260++;
					}
				}
				else if (func_49())
				{
					if (GlobalFunc_10638(&uLocal_95, 2, "BSPRP", "BSPRP_KILLGF", 9, 1, 0, 0, 0))
					{
						RECORDING::_0x293220DA1B46CEBC(2f, 12f, 4);
						iLocal_260++;
					}
				}
				else if (func_209())
				{
					if (GlobalFunc_10638(&uLocal_95, 0, "BSPRP", "BSPRP_KILLGT", 9, 1, 0, 0, 0))
					{
						RECORDING::_0x293220DA1B46CEBC(2f, 12f, 4);
						iLocal_260++;
					}
				}
			}
			else
			{
				iLocal_260++;
			}
			break;
		
		case 3:
		case 4:
			if (iLocal_260 == 3)
			{
				if (!GlobalFunc_5172(&Local_261, 1))
				{
					AUDIO::TRIGGER_MUSIC_EVENT("FHPRD_START");
					GlobalFunc_164("KILLGUARDS", 7500, 1);
					iLocal_260 = 4;
				}
			}
			if (PED::IS_PED_INJURED(iLocal_365) || func_600(iLocal_365, PLAYER::PLAYER_PED_ID()))
			{
				if (HUD::DOES_BLIP_EXIST(uLocal_363))
				{
					GlobalFunc_703(&uLocal_363);
					GlobalFunc_5105();
					if (!PED::IS_PED_INJURED(iLocal_365))
					{
						PED::APPLY_DAMAGE_TO_PED(iLocal_365, 100, 1);
					}
					else
					{
						GlobalFunc_565(901, 1, 0);
						if (PED::WAS_PED_KILLED_BY_STEALTH(iLocal_365) || func_600(iLocal_365, PLAYER::PLAYER_PED_ID()))
						{
							if (iLocal_369 == 0)
							{
								RECORDING::_0x293220DA1B46CEBC(2f, 12f, 4);
								iLocal_369 = 1;
							}
							GlobalFunc_565(902, 1, 0);
						}
					}
				}
			}
			else
			{
				switch (iLocal_367)
				{
					case 0:
						if (PED::HAS_PED_RECEIVED_EVENT(iLocal_365, 122))
						{
							iLocal_367 = 101;
						}
						if (PED::CAN_PED_SEE_HATED_PED(iLocal_365, PLAYER::PLAYER_PED_ID()) || (GlobalFunc_156(iLocal_365, PLAYER::PLAYER_PED_ID(), 1) < 10.5f && PED::IS_PED_IN_ANY_VEHICLE(PLAYER::PLAYER_PED_ID(), 0)))
						{
							if (GlobalFunc_10618(&uLocal_95, "SOL1AUD", "SOL1_HEY", 9, 0, 0, 0))
							{
								SYSTEM::SETTIMERB(0);
								TASK::CLEAR_PED_TASKS(iLocal_365);
								TASK::TASK_LOOK_AT_ENTITY(iLocal_365, PLAYER::PLAYER_PED_ID(), -1, 2048, 2);
								TASK::TASK_TURN_PED_TO_FACE_ENTITY(iLocal_365, PLAYER::PLAYER_PED_ID(), 0);
								iLocal_367 = 1;
							}
						}
						break;
					
					case 1:
						if (PED::HAS_PED_RECEIVED_EVENT(iLocal_365, 122))
						{
							iLocal_367 = 101;
						}
						if (SYSTEM::TIMERB() > 5000 && PED::CAN_PED_SEE_HATED_PED(iLocal_365, PLAYER::PLAYER_PED_ID()))
						{
							TASK::TASK_USE_MOBILE_PHONE(iLocal_365, 1, 1);
							iLocal_367++;
						}
						break;
					
					case 2:
						if (GlobalFunc_10618(&uLocal_95, "SOL1AUD", "SOL1_COPS1", 9, 0, 0, 0))
						{
							iLocal_367++;
						}
						break;
					
					case 3:
						if (!AUDIO::IS_SCRIPTED_CONVERSATION_ONGOING())
						{
							SYSTEM::SETTIMERB(0);
							iLocal_367++;
						}
						break;
					
					case 4:
						if (SYSTEM::TIMERB() > 2000)
						{
							GlobalFunc_509("FAILGUARD");
							func_1();
						}
						break;
					
					case 101:
						TASK::CLEAR_PED_TASKS(iLocal_365);
						TASK::TASK_SMART_FLEE_PED(iLocal_365, PLAYER::PLAYER_PED_ID(), 50f, -1, 0, 0);
						iLocal_367++;
						break;
					
					case 102:
						if (GlobalFunc_10618(&uLocal_95, "SOL1AUD", "SOL1_COPSIN1", 9, 0, 0, 0))
						{
							iLocal_367++;
						}
						break;
					
					case 103:
						if (!ENTITY::IS_ENTITY_AT_ENTITY(iLocal_365, PLAYER::PLAYER_PED_ID(), 30f, 30f, 30f, 0, 1, 0))
						{
							PLAYER::SET_PLAYER_WANTED_LEVEL(PLAYER::PLAYER_ID(), 2, 0);
							PLAYER::SET_PLAYER_WANTED_LEVEL_NOW(PLAYER::PLAYER_ID(), 0);
							SYSTEM::WAIT(2000);
							GlobalFunc_509("FAILGUARD");
							func_1();
						}
						break;
						break;
					}
			}
			if (PED::IS_PED_INJURED(iLocal_366) || func_600(iLocal_366, PLAYER::PLAYER_PED_ID()))
			{
				if (HUD::DOES_BLIP_EXIST(uLocal_364))
				{
					GlobalFunc_703(&uLocal_364);
					if (!PED::IS_PED_INJURED(iLocal_366))
					{
						GlobalFunc_4956();
						PED::APPLY_DAMAGE_TO_PED(iLocal_366, 100, 1);
					}
					else
					{
						if (iLocal_370 == 0)
						{
							RECORDING::_0x293220DA1B46CEBC(2f, 12f, 4);
							iLocal_370 = 1;
						}
						GlobalFunc_565(901, 1, 0);
						if (PED::WAS_PED_KILLED_BY_STEALTH(iLocal_366) || func_600(iLocal_366, PLAYER::PLAYER_PED_ID()))
						{
							GlobalFunc_565(902, 1, 0);
						}
					}
				}
			}
			else
			{
				switch (iLocal_368)
				{
					case 0:
						if (PED::HAS_PED_RECEIVED_EVENT(iLocal_366, 122))
						{
							iLocal_368 = 101;
						}
						if ((PED::CAN_PED_SEE_HATED_PED(iLocal_366, PLAYER::PLAYER_PED_ID()) || PLAYER::CAN_PED_HEAR_PLAYER(PLAYER::PLAYER_ID(), iLocal_366)) && ENTITY::IS_ENTITY_IN_ANGLED_AREA(PLAYER::PLAYER_PED_ID(), 2629.506f, 2935.471f, 43.47091f, 2635.962f, 2931.99f, 47.00308f, 4.5f, 0, 1, 0))
						{
							if (GlobalFunc_10618(&uLocal_95, "SOL1AUD", "SOL1_CALL2", 9, 0, 0, 0))
							{
								SYSTEM::SETTIMERB(0);
								TASK::CLEAR_PED_TASKS(iLocal_366);
								TASK::TASK_LOOK_AT_ENTITY(iLocal_366, PLAYER::PLAYER_PED_ID(), -1, 2048, 2);
								TASK::TASK_TURN_PED_TO_FACE_ENTITY(iLocal_366, PLAYER::PLAYER_PED_ID(), 0);
								TASK::TASK_USE_MOBILE_PHONE(iLocal_366, 1, 1);
								iLocal_368 = 1;
							}
						}
						break;
					
					case 1:
						if (SYSTEM::TIMERB() > 1000)
						{
							iLocal_368 = 2;
						}
						break;
					
					case 2:
						if (PED::HAS_PED_RECEIVED_EVENT(iLocal_366, 122))
						{
							iLocal_368 = 101;
						}
						if (!AUDIO::IS_SCRIPTED_CONVERSATION_ONGOING() && SYSTEM::TIMERB() > 3000)
						{
							GlobalFunc_509("FAILGUARD");
							func_1();
						}
						break;
					
					case 101:
						TASK::CLEAR_PED_TASKS(iLocal_366);
						TASK::TASK_SMART_FLEE_PED(iLocal_366, PLAYER::PLAYER_PED_ID(), 50f, -1, 0, 0);
						iLocal_368++;
						break;
					
					case 102:
						if (GlobalFunc_10618(&uLocal_95, "SOL1AUD", "SOL1_COPSIN2", 9, 0, 0, 0))
						{
							iLocal_368++;
						}
						break;
					
					case 103:
						if (!ENTITY::IS_ENTITY_AT_ENTITY(iLocal_366, PLAYER::PLAYER_PED_ID(), 30f, 30f, 30f, 0, 1, 0))
						{
							PLAYER::SET_PLAYER_WANTED_LEVEL(PLAYER::PLAYER_ID(), 2, 0);
							PLAYER::SET_PLAYER_WANTED_LEVEL_NOW(PLAYER::PLAYER_ID(), 0);
							SYSTEM::WAIT(2000);
							GlobalFunc_509("FAILGUARD");
							func_1();
						}
						break;
					}
			}
			if ((PED::IS_PED_INJURED(iLocal_365) || func_600(iLocal_365, PLAYER::PLAYER_PED_ID())) && (PED::IS_PED_INJURED(iLocal_366) || func_600(iLocal_366, PLAYER::PLAYER_PED_ID())))
			{
				HUD::REMOVE_BLIP(&uLocal_363);
				HUD::REMOVE_BLIP(&uLocal_364);
				STREAMING::REMOVE_ANIM_DICT("missbigscoreprep");
				STREAMING::SET_MODEL_AS_NO_LONGER_NEEDED(joaat("s_m_y_construct_01"));
				ENTITY::SET_PED_AS_NO_LONGER_NEEDED(&iLocal_365);
				ENTITY::SET_PED_AS_NO_LONGER_NEEDED(&iLocal_366);
				RECORDING::_0x293220DA1B46CEBC(5f, 5f, 4);
				iLocal_260 = 0;
				iLocal_286 = 3;
			}
			break;
	}
}





int func_600(int iParam0, int iParam1)//Position - 0x65C73
{
	int iVar0;
	
	if (!ENTITY::IS_ENTITY_DEAD(iParam0))
	{
		if (!ENTITY::IS_ENTITY_DEAD(iParam1))
		{
			if (WEAPON::GET_CURRENT_PED_WEAPON(iParam1, &iVar0, 1))
			{
				if (iVar0 == joaat("weapon_stungun"))
				{
					if (WEAPON::HAS_ENTITY_BEEN_DAMAGED_BY_WEAPON(iParam0, joaat("weapon_stungun"), 0) && ENTITY::HAS_ENTITY_BEEN_DAMAGED_BY_ENTITY(iParam0, iParam1, 1))
					{
						return 1;
					}
				}
			}
		}
	}
	return 0;
}





void func_605()//Position - 0x65DC0
{
	int iVar0;
	
	if (GlobalFunc_Is_Mission_Repeat_Or_Benchmark(0))
	{
		GlobalFunc_3026(11, 9);
		Global_SAVE_DATA.HEIST_DATA_STRUCT.HEIST_SELECTED_CREW_ARRAY[9 /*6*/][0] = 9;
		Global_SAVE_DATA.HEIST_DATA_STRUCT.HEIST_SELECTED_CREW_ARRAY[9 /*6*/][1] = 8;
	}
	GlobalFunc_574(899, 0);
	GlobalFunc_5671(0, 1);
	GlobalFunc_5671(1, 1);
	GlobalFunc_5671(2, 1);
	GlobalFunc_585(115, 1);
	GlobalFunc_585(116, 1);
	GlobalFunc_585(117, 1);
	GlobalFunc_8032(20, 1702.948f, 3272.022f, 40.1539f, 247.3247f);
	GlobalFunc_7695(20);
	GlobalFunc_76(20);
	PED::ADD_SCENARIO_BLOCKING_AREA(2595.124f, 2807.558f, 30.7274f, 2649.778f, 2988.829f, 53.4642f, 0, 1, 1, 1);
	PED::SET_PED_NON_CREATION_AREA(2595.124f, 2807.558f, 30.7274f, 2649.778f, 2988.829f, 53.4642f);
	MISC::CLEAR_AREA_OF_PEDS(2627.966f, 2941.1f, 39.4282f, 30f, 0);
	if (func_23())
	{
		func_546(PLAYER::PLAYER_PED_ID(), 14, 112, 1, -1, 0, 0, 0, -1, -1, -1, 0);
	}
	else
	{
		func_546(PLAYER::PLAYER_PED_ID(), 14, 154, 1, -1, 0, 0, 0, -1, -1, -1, 0);
	}
	GlobalFunc_7621(91, 1, 0, 1, 0);
	VEHICLE::SET_RANDOM_TRAINS(0);
	PED::REMOVE_RELATIONSHIP_GROUP(iLocal_361);
	PED::ADD_RELATIONSHIP_GROUP("RAILWAY", &iLocal_361);
	PED::SET_PED_RELATIONSHIP_GROUP_HASH(PLAYER::PLAYER_PED_ID(), 1862763509);
	PED::SET_RELATIONSHIP_BETWEEN_GROUPS(5, 1862763509, iLocal_361);
	PED::SET_RELATIONSHIP_BETWEEN_GROUPS(5, iLocal_361, 1862763509);
	PLAYER::SET_WANTED_LEVEL_MULTIPLIER(0.35f);
	GlobalFunc_563(1);
	HUD::REQUEST_ADDITIONAL_TEXT("BSPREP", 0);
	HUD::REQUEST_ADDITIONAL_TEXT("BSPRP", 6);
	GlobalFunc_2224(1);
	MISC::ENABLE_DISPATCH_SERVICE(3, 0);
	MISC::ENABLE_DISPATCH_SERVICE(5, 0);
	GlobalFunc_563(1);
	if (func_211())
	{
		GlobalFunc_173(&uLocal_95, 0, PLAYER::PLAYER_PED_ID(), "MICHAEL", 0, 1);
		GlobalFunc_173(&uLocal_95, 2, 0, "TREVOR", 0, 1);
	}
	else if (func_49())
	{
		GlobalFunc_173(&uLocal_95, 1, PLAYER::PLAYER_PED_ID(), "FRANKLIN", 0, 1);
		GlobalFunc_173(&uLocal_95, 2, 0, "TREVOR", 0, 1);
	}
	else if (func_209())
	{
		GlobalFunc_173(&uLocal_95, 2, PLAYER::PLAYER_PED_ID(), "TREVOR", 0, 1);
		GlobalFunc_173(&uLocal_95, 0, 0, "MICHAEL", 0, 1);
	}
	GlobalFunc_504(PLAYER::PLAYER_PED_ID(), -1);
	iLocal_286 = 2;
	if (GlobalFunc_Is_Mission_Retry())
	{
		GlobalFunc_562(83);
		iVar0 = GlobalFunc_Get_Mission_Fail_Checkpoint();
		switch (iVar0)
		{
			case 0:
				iLocal_360 = 2;
				break;
			
			case 1:
				iLocal_360 = 3;
				break;
			
			case 2:
				iLocal_360 = 5;
				break;
			
			case 3:
				iLocal_360 = 6;
				break;
		}
		if (Global_84544 == 1)
		{
			if (iLocal_360 == 2)
			{
				iLocal_360 = 3;
			}
			else if (iLocal_360 == 3)
			{
				iLocal_360 = 5;
			}
			else if (iLocal_360 == 5)
			{
				iLocal_360 = 6;
			}
			else if (iLocal_360 == 6)
			{
				func_26();
			}
		}
		func_606(iLocal_360, 1);
		iLocal_286 = iLocal_360;
		CAM::DO_SCREEN_FADE_IN(500);
	}
	else if (func_211())
	{
		Global_Mission_Fail_State.f_12[0] = 0;
	}
	else if (func_49())
	{
		Global_Mission_Fail_State.f_12[0] = 1;
	}
	else if (func_209())
	{
		Global_Mission_Fail_State.f_12[0] = 2;
	}
}

void func_606(int iParam0, bool bParam1)//Position - 0x660C1
{
	GlobalFunc_4956();
	switch (iParam0)
	{
		case 2:
			if (bParam1)
			{
				GlobalFunc_4972(2610.269f, 2912.185f, 39.4156f, 322.0601f, 1, 0);
			}
			else
			{
				ENTITY::SET_ENTITY_COORDS(PLAYER::PLAYER_PED_ID(), 2610.269f, 2912.185f, 39.4156f, 1, 0, 0, 1);
				ENTITY::SET_ENTITY_HEADING(PLAYER::PLAYER_PED_ID(), 322.0601f);
			}
			AUDIO::TRIGGER_MUSIC_EVENT("FHPRD_RESTART_1");
			GlobalFunc_4967(0, -1, 1);
			break;
		
		case 3:
			if (bParam1)
			{
				GlobalFunc_4972(2632.803f, 2933.427f, 43.7442f, 52.5638f, 1, 0);
			}
			else
			{
				ENTITY::SET_ENTITY_COORDS(PLAYER::PLAYER_PED_ID(), 2632.803f, 2933.427f, 43.7442f, 1, 0, 0, 1);
				ENTITY::SET_ENTITY_HEADING(PLAYER::PLAYER_PED_ID(), 52.5638f);
			}
			AUDIO::TRIGGER_MUSIC_EVENT("FHPRD_RESTART_2");
			GlobalFunc_4967(0, -1, 1);
			break;
		
		case 4:
			if (bParam1)
			{
				GlobalFunc_4972(2632.803f, 2933.427f, 43.7442f, 52.5638f, 1, 0);
			}
			else
			{
				ENTITY::SET_ENTITY_COORDS(PLAYER::PLAYER_PED_ID(), 2632.803f, 2933.427f, 43.7442f, 1, 0, 0, 1);
				ENTITY::SET_ENTITY_HEADING(PLAYER::PLAYER_PED_ID(), 52.5638f);
			}
			GlobalFunc_4967(0, -1, 1);
			AUDIO::TRIGGER_MUSIC_EVENT("FHPRD_RESTART_2");
			break;
		
		case 5:
			if (bParam1)
			{
				GlobalFunc_4972(2628.115f, 2924.567f, 39.4265f, 154.8777f, 1, 0);
			}
			else
			{
				ENTITY::SET_ENTITY_COORDS(PLAYER::PLAYER_PED_ID(), 2628.115f, 2924.567f, 39.4265f, 1, 0, 0, 1);
				ENTITY::SET_ENTITY_HEADING(PLAYER::PLAYER_PED_ID(), 154.8777f);
			}
			func_136(5);
			while (!func_126(5))
			{
				SYSTEM::WAIT(0);
			}
			func_579();
			func_311(2617.861f, 2934.277f, 38.8511f, 1106509824);
			if (func_23())
			{
				while (!func_312(&(uLocal_51[2]), 2, VEHICLE::GET_POSITION_OF_VEHICLE_RECORDING_AT_TIME(1, 3000f, "BsPrepHeli"), 0, 1, 0, 0))
				{
					SYSTEM::WAIT(0);
				}
				if (!ENTITY::IS_ENTITY_DEAD(iLocal_49))
				{
					PED::SET_PED_INTO_VEHICLE(uLocal_51[2], iLocal_49, -1);
				}
			}
			else
			{
				while (!func_312(&(uLocal_51[uLocal_51.f_5]), 0, VEHICLE::GET_POSITION_OF_VEHICLE_RECORDING_AT_TIME(1, 3000f, "BsPrepHeli"), 0, 1, 0, 0))
				{
					SYSTEM::WAIT(0);
				}
				if (!ENTITY::IS_ENTITY_DEAD(iLocal_49))
				{
					PED::SET_PED_INTO_VEHICLE(uLocal_51[uLocal_51.f_5], iLocal_49, -1);
				}
			}
			GlobalFunc_4967(0, -1, 1);
			PLAYER::SIMULATE_PLAYER_INPUT_GAIT(PLAYER::PLAYER_ID(), 2f, 3000, 0f, 1, 1);
			PED::FORCE_PED_MOTION_STATE(PLAYER::PLAYER_PED_ID(), -530524, 0, 1, 0);
			AUDIO::TRIGGER_MUSIC_EVENT("FHPRD_RESTART_2");
			break;
		
		case 6:
			if (Global_Mission_Fail_State.f_12[0] == 0)
			{
				while (!func_607(2, 1))
				{
					SYSTEM::WAIT(0);
				}
			}
			else if (Global_Mission_Fail_State.f_12[0] == 1)
			{
				while (!func_607(2, 1))
				{
					SYSTEM::WAIT(0);
				}
			}
			else if (Global_Mission_Fail_State.f_12[0] == 2)
			{
				while (!func_607(0, 1))
				{
					SYSTEM::WAIT(0);
				}
			}
			if (bParam1)
			{
				GlobalFunc_4972(1773.333f, 3243.568f, 41.1441f, 282.4375f, 1, 0);
			}
			else
			{
				ENTITY::SET_ENTITY_COORDS(PLAYER::PLAYER_PED_ID(), 1773.333f, 3243.568f, 41.1441f, 1, 0, 0, 1);
				ENTITY::SET_ENTITY_HEADING(PLAYER::PLAYER_PED_ID(), 282.4375f);
			}
			MISC::CLEAR_AREA(1773.333f, 3243.568f, 41.1441f, 40f, 1, 0, 0, 0);
			func_136(5);
			while (!func_126(5))
			{
				SYSTEM::WAIT(0);
			}
			func_579();
			func_311(2761.54f, 2821.762f, 35.518f, 0f);
			VEHICLE::SET_TRAIN_CRUISE_SPEED(iLocal_50, 0f);
			VEHICLE::SET_TRAIN_SPEED(iLocal_50, 0f);
			if (func_23())
			{
				while (!func_312(&(uLocal_51[2]), 2, VEHICLE::GET_POSITION_OF_VEHICLE_RECORDING_AT_TIME(1, 3000f, "BsPrepHeli"), 0, 1, 0, 0))
				{
					SYSTEM::WAIT(0);
				}
			}
			else
			{
				while (!func_312(&(uLocal_51[uLocal_51.f_5]), 0, VEHICLE::GET_POSITION_OF_VEHICLE_RECORDING_AT_TIME(1, 3000f, "BsPrepHeli"), 0, 1, 0, 0))
				{
					SYSTEM::WAIT(0);
				}
			}
			if (!ENTITY::IS_ENTITY_DEAD(iLocal_49))
			{
				PED::SET_PED_INTO_VEHICLE(PLAYER::PLAYER_PED_ID(), iLocal_49, -1);
			}
			func_216();
			AUDIO::TRIGGER_MUSIC_EVENT("FHPRD_RESTART_3");
			GlobalFunc_4967(iLocal_49, -1, 1);
			break;
		
		default:
			break;
	}
	func_310(0);
}

int func_607(int iParam0, bool bParam1)//Position - 0x664E0
{
	int iVar0;
	int iVar1;
	int iVar2;
	int iVar3;
	struct<3> Var4;
	
	Global_17098.f_13 = 0;
	if (PED::IS_PED_INJURED(PLAYER::PLAYER_PED_ID()))
	{
		return 1;
	}
	iVar0 = GlobalFunc_584(iParam0);
	iVar1 = GlobalFunc_4917(iVar0);
	if (iVar1 == 0)
	{
		return 1;
	}
	if (PED::IS_PED_MODEL(PLAYER::PLAYER_PED_ID(), iVar1))
	{
		return 1;
	}
	STREAMING::REQUEST_MODEL(iVar1);
	if (!STREAMING::HAS_MODEL_LOADED(iVar1))
	{
		return 0;
	}
	if (PED::IS_PED_IN_ANY_VEHICLE(PLAYER::PLAYER_PED_ID(), 0))
	{
		iVar2 = PED::GET_VEHICLE_PED_IS_IN(PLAYER::PLAYER_PED_ID(), 0);
		if (PLAYER::PLAYER_PED_ID() == VEHICLE::GET_PED_IN_VEHICLE_SEAT(iVar2, -1))
		{
			iVar3 = -1;
		}
		else if (PLAYER::PLAYER_PED_ID() == VEHICLE::GET_PED_IN_VEHICLE_SEAT(iVar2, 0))
		{
			iVar3 = 0;
		}
		else if (PLAYER::PLAYER_PED_ID() == VEHICLE::GET_PED_IN_VEHICLE_SEAT(iVar2, 1))
		{
			iVar3 = 1;
		}
		else if (PLAYER::PLAYER_PED_ID() == VEHICLE::GET_PED_IN_VEHICLE_SEAT(iVar2, 2))
		{
			iVar3 = 2;
		}
		else
		{
			iVar3 = -1;
		}
	}
	else
	{
		iVar2 = 0;
	}
	if (ENTITY::DOES_ENTITY_EXIST(iVar2) && VEHICLE::IS_VEHICLE_DRIVEABLE(iVar2, 0))
	{
		TASK::CLEAR_PED_TASKS_IMMEDIATELY(PLAYER::PLAYER_PED_ID());
		func_610(&(Global_17052[iParam0]), iVar0, iVar2, iVar3, bParam1, 0, 0);
	}
	else
	{
		Var4 = { ENTITY::GET_ENTITY_COORDS(PLAYER::PLAYER_PED_ID(), 1) };
		MISC::GET_GROUND_Z_FOR_3D_COORD(Var4, &(Var4.f_2));
		func_312(&(Global_17052[iParam0]), iVar0, Var4, ENTITY::GET_ENTITY_HEADING(PLAYER::PLAYER_PED_ID()), bParam1, 0, 0);
	}
	Global_17052.f_7 = iParam0;
	Global_17052.f_39 = 1;
	func_218(&Global_17052, 0, 0, 0);
	GlobalFunc_5124(iParam0);
	return 1;
}



int func_610(var uParam0, int iParam1, int iParam2, int iParam3, bool bParam4, bool bParam5, bool bParam6)//Position - 0x66698
{
	int iVar0;
	
	if (GlobalFunc_42(iParam1))
	{
		iVar0 = GlobalFunc_4917(iParam1);
		STREAMING::REQUEST_MODEL(iVar0);
		if (STREAMING::HAS_MODEL_LOADED(iVar0))
		{
			if (ENTITY::DOES_ENTITY_EXIST(*uParam0))
			{
				PED::DELETE_PED(uParam0);
			}
			if (ENTITY::DOES_ENTITY_EXIST(iParam2) && VEHICLE::IS_VEHICLE_DRIVEABLE(iParam2, 0))
			{
				*uParam0 = PED::CREATE_PED_INSIDE_VEHICLE(iParam2, 26, iVar0, iParam3, 1, 1);
				GlobalFunc_8386(*uParam0, iParam1, bParam5);
				PED::_0xE861D0B05C7662B8(*uParam0, 0, 0);
				func_571(*uParam0);
				GlobalFunc_7694(*uParam0, 1, 0);
				GlobalFunc_7693(*uParam0);
				GlobalFunc_7707(*uParam0);
				func_314(*uParam0, bParam6);
				GlobalFunc_516(*uParam0);
				if (bParam4)
				{
					STREAMING::SET_MODEL_AS_NO_LONGER_NEEDED(iVar0);
				}
			}
			return 1;
		}
	}
	return 0;
}

























void func_635()//Position - 0x6872C
{
	if (!GlobalFunc_Is_Mission_Retry())
	{
		if (func_636(49, &uLocal_293, 0, 0, 0, 0, 0))
		{
			iLocal_286 = 1;
			if (iLocal_305 == 0)
			{
				iLocal_305 = 1;
			}
		}
	}
	else
	{
		iLocal_286 = 1;
	}
}

bool func_636(int iParam0, var uParam1, bool bParam2, bool bParam3, bool bParam4, bool bParam5, bool bParam6)//Position - 0x68763
{
	struct<2> Var0;
	
	GlobalFunc_9026(iParam0, &Var0);
	GlobalFunc_741(iParam0, &Var0, &(Var0.f_1));
	return func_637(uParam1, &Var0, bParam2, bParam3, bParam4, bParam5, bParam6);
}

int func_637(var uParam0, var uParam1, bool bParam2, bool bParam3, bool bParam4, bool bParam5, bool bParam6)//Position - 0x68791
{
	var uVar0;
	var uVar1;
	var uVar2;
	var uVar3;
	var uVar4;
	var uVar5;
	
	uParam0->f_7 = *uParam1;
	uParam0->f_8 = uParam1->f_1;
	if ((GlobalFunc_Is_Mission_Repeat_Or_Benchmark(0) && !bParam2) && !bParam4)
	{
		if (uParam0->f_5)
		{
			CLOCK::SET_CLOCK_TIME(uParam0->f_7, 0, 0);
		}
		else
		{
			CLOCK::SET_CLOCK_TIME(uParam0->f_8, 0, 0);
		}
		return 1;
	}
	if (uParam0->f_2 == 0)
	{
		if (uParam0->f_7 != -1 && uParam0->f_8 != -1)
		{
			if (bParam2 || !GlobalFunc_5183(uParam0->f_8, uParam0->f_7))
			{
				if (AUDIO::REQUEST_AMBIENT_AUDIO_BANK("TIME_LAPSE", 0))
				{
					uParam0->f_6 = 0;
					uParam0->f_2 = 1;
				}
			}
			else
			{
				uParam0->f_2 = -1;
				return 1;
			}
		}
		else
		{
			uParam0->f_2 = -1;
			return 1;
		}
	}
	HUD::HIDE_HUD_AND_RADAR_THIS_FRAME();
	HUD::HIDE_HUD_COMPONENT_THIS_FRAME(7);
	PED::SET_PED_DENSITY_MULTIPLIER_THIS_FRAME(0f);
	if (uParam0->f_2 == 1)
	{
		if (bParam2)
		{
			CAM::DESTROY_CAM(uParam0->f_4, 0);
			uParam0->f_4 = CAM::CREATE_CAM("DEFAULT_SPLINE_CAMERA", 0);
			CAM::ADD_CAM_SPLINE_NODE(uParam0->f_4, uParam1->f_2, uParam1->f_5, uParam1->f_15, 3, 2);
			if (uParam1->f_17 < 0)
			{
				CAM::ADD_CAM_SPLINE_NODE(uParam0->f_4, uParam1->f_8, uParam1->f_11, uParam1->f_15, 3, 2);
			}
			else
			{
				CAM::ADD_CAM_SPLINE_NODE(uParam0->f_4, uParam1->f_2, uParam1->f_5, uParam1->f_15, 3, 2);
			}
			CAM::SET_CAM_FOV(uParam0->f_4, uParam1->f_14);
			CAM::SET_CAM_ACTIVE(uParam0->f_4, 1);
			if (!bParam6)
			{
				if (!ENTITY::IS_ENTITY_DEAD(PLAYER::PLAYER_PED_ID()))
				{
					ENTITY::SET_ENTITY_VISIBLE(PLAYER::PLAYER_PED_ID(), 0);
				}
				uVar0 = PLAYER::GET_PLAYERS_LAST_VEHICLE();
				if (ENTITY::DOES_ENTITY_EXIST(uVar0))
				{
					if (!ENTITY::IS_ENTITY_A_MISSION_ENTITY(iVar0))
					{
						ENTITY::SET_ENTITY_AS_MISSION_ENTITY(iVar0, 1, 0);
					}
					ENTITY::SET_ENTITY_VISIBLE(iVar0, 0);
				}
			}
			uVar1 = CAM::GET_CAM_FAR_CLIP(uParam0->f_4);
			INTERIOR::CLEAR_ROOM_FOR_GAME_VIEWPORT();
			MISC::CLEAR_AREA_OF_COPS(uParam1->f_2, uVar1, 0);
			GRAPHICS::REMOVE_PARTICLE_FX_IN_RANGE(uParam1->f_2, uVar1);
			GRAPHICS::REMOVE_DECALS_IN_RANGE(uParam1->f_2, uVar1);
			if (bParam3)
			{
				MISC::CLEAR_AREA(uParam1->f_2, 5000f, 1, 1, 0, 0);
			}
			GlobalFunc_7641(&(uParam0->f_1), 0, 0, 0, CLOCK::GET_CLOCK_DAY_OF_MONTH(), CLOCK::GET_CLOCK_MONTH(), CLOCK::GET_CLOCK_YEAR());
			func_659(uParam0, 1, 0, 2000, 1, 1, 0, 1);
			uParam0->f_2 = 2;
		}
		else if (!GlobalFunc_5183(uParam0->f_7, uParam0->f_8))
		{
			if (uParam0->f_5)
			{
				CAM::DESTROY_CAM(uParam0->f_4, 0);
				uParam0->f_4 = CAM::CREATE_CAM("DEFAULT_SPLINE_CAMERA", 0);
				CAM::ADD_CAM_SPLINE_NODE(uParam0->f_4, uParam1->f_2, uParam1->f_5, uParam1->f_15, 3, 2);
				if (uParam1->f_17 < 0)
				{
					CAM::ADD_CAM_SPLINE_NODE(uParam0->f_4, uParam1->f_8, uParam1->f_11, uParam1->f_15, 3, 2);
				}
				else
				{
					CAM::ADD_CAM_SPLINE_NODE(uParam0->f_4, uParam1->f_2, uParam1->f_5, uParam1->f_15, 3, 2);
				}
				CAM::SET_CAM_FOV(uParam0->f_4, uParam1->f_14);
				CAM::SET_CAM_ACTIVE(uParam0->f_4, 1);
				if (!bParam6)
				{
					if (!ENTITY::IS_ENTITY_DEAD(PLAYER::PLAYER_PED_ID()))
					{
						ENTITY::SET_ENTITY_VISIBLE(PLAYER::PLAYER_PED_ID(), 0);
					}
					uVar2 = PLAYER::GET_PLAYERS_LAST_VEHICLE();
					if (ENTITY::DOES_ENTITY_EXIST(uVar2))
					{
						if (!ENTITY::IS_ENTITY_A_MISSION_ENTITY(iVar2))
						{
							ENTITY::SET_ENTITY_AS_MISSION_ENTITY(iVar2, 1, 0);
						}
						ENTITY::SET_ENTITY_VISIBLE(iVar2, 0);
					}
				}
				uVar3 = CAM::GET_CAM_FAR_CLIP(uParam0->f_4);
				INTERIOR::CLEAR_ROOM_FOR_GAME_VIEWPORT();
				MISC::CLEAR_AREA_OF_COPS(uParam1->f_2, uVar3, 0);
				GRAPHICS::REMOVE_PARTICLE_FX_IN_RANGE(uParam1->f_2, uVar3);
				GRAPHICS::REMOVE_DECALS_IN_RANGE(uParam1->f_2, uVar3);
				if (bParam3)
				{
					MISC::CLEAR_AREA(uParam1->f_2, 5000f, 1, 1, 0, 0);
				}
				GlobalFunc_7641(&(uParam0->f_1), 0, 0, 8, CLOCK::GET_CLOCK_DAY_OF_MONTH(), CLOCK::GET_CLOCK_MONTH(), CLOCK::GET_CLOCK_YEAR());
				func_659(uParam0, 1, 0, 2000, 1, 1, 0, 1);
				uParam0->f_2 = 2;
			}
			else
			{
				AUDIO::RELEASE_NAMED_SCRIPT_AUDIO_BANK("TIME_LAPSE");
				uParam0->f_2 = -1;
				return 1;
			}
		}
		else if (!uParam0->f_5)
		{
			CAM::DESTROY_CAM(uParam0->f_4, 0);
			uParam0->f_4 = CAM::CREATE_CAM("DEFAULT_SPLINE_CAMERA", 0);
			CAM::ADD_CAM_SPLINE_NODE(uParam0->f_4, uParam1->f_2, uParam1->f_5, uParam1->f_15, 3, 2);
			if (uParam1->f_17 < 0)
			{
				CAM::ADD_CAM_SPLINE_NODE(uParam0->f_4, uParam1->f_8, uParam1->f_11, uParam1->f_15, 3, 2);
			}
			else
			{
				CAM::ADD_CAM_SPLINE_NODE(uParam0->f_4, uParam1->f_2, uParam1->f_5, uParam1->f_15, 3, 2);
			}
			CAM::SET_CAM_FOV(uParam0->f_4, uParam1->f_14);
			CAM::SET_CAM_SPLINE_SMOOTHING_STYLE(uParam0->f_4, 3);
			CAM::SET_CAM_ACTIVE(uParam0->f_4, 1);
			if (!bParam6)
			{
				if (!ENTITY::IS_ENTITY_DEAD(PLAYER::PLAYER_PED_ID()))
				{
					ENTITY::SET_ENTITY_VISIBLE(PLAYER::PLAYER_PED_ID(), 0);
				}
				uVar4 = PLAYER::GET_PLAYERS_LAST_VEHICLE();
				if (ENTITY::DOES_ENTITY_EXIST(uVar4))
				{
					if (!ENTITY::IS_ENTITY_A_MISSION_ENTITY(iVar4))
					{
						ENTITY::SET_ENTITY_AS_MISSION_ENTITY(iVar4, 1, 0);
					}
					ENTITY::SET_ENTITY_VISIBLE(iVar4, 0);
				}
			}
			uVar5 = CAM::GET_CAM_FAR_CLIP(uParam0->f_4);
			INTERIOR::CLEAR_ROOM_FOR_GAME_VIEWPORT();
			MISC::CLEAR_AREA_OF_COPS(uParam1->f_2, uVar5, 0);
			GRAPHICS::REMOVE_PARTICLE_FX_IN_RANGE(uParam1->f_2, uVar5);
			GRAPHICS::REMOVE_DECALS_IN_RANGE(uParam1->f_2, uVar5);
			if (bParam3)
			{
				MISC::CLEAR_AREA(uParam1->f_2, 5000f, 0, 1, 0, 0);
			}
			GlobalFunc_7641(&(uParam0->f_1), 0, 0, 0, CLOCK::GET_CLOCK_DAY_OF_MONTH(), CLOCK::GET_CLOCK_MONTH(), CLOCK::GET_CLOCK_YEAR());
			func_659(uParam0, 1, 0, 2000, 1, 1, 0, 1);
			uParam0->f_2 = 2;
		}
		else
		{
			AUDIO::RELEASE_NAMED_SCRIPT_AUDIO_BANK("TIME_LAPSE");
			uParam0->f_2 = -1;
			return 1;
		}
	}
	if (uParam0->f_2 == 2)
	{
		if (bParam3)
		{
			MISC::CLEAR_AREA(uParam1->f_2, 5000f, 0, 1, 0, 0);
		}
		if (!uParam0->f_5)
		{
			if (func_639(uParam0->f_8, 0, &(uParam1->f_18), &(uParam1->f_22), uParam0, -1082130432, 0, 1, 1065353216))
			{
				if (uParam1->f_17 < 0)
				{
					uParam0->f_9 = MISC::GET_GAME_TIMER();
					uParam0->f_2 = 3;
				}
				else
				{
					uParam0->f_4 = CAM::CREATE_CAM("DEFAULT_SPLINE_CAMERA", 0);
					CAM::ADD_CAM_SPLINE_NODE(uParam0->f_4, uParam1->f_2, uParam1->f_5, uParam1->f_15, 3, 2);
					CAM::ADD_CAM_SPLINE_NODE(uParam0->f_4, uParam1->f_8, uParam1->f_11, uParam1->f_15, 3, 2);
					CAM::SET_CAM_FOV(uParam0->f_4, uParam1->f_14);
					CAM::SET_CAM_SPLINE_SMOOTHING_STYLE(uParam0->f_4, 3);
					CAM::SET_CAM_ACTIVE(uParam0->f_4, 1);
					uParam0->f_9 = MISC::GET_GAME_TIMER();
					uParam0->f_2 = 22;
				}
			}
		}
		else if (func_639(uParam0->f_7, 0, &(uParam1->f_18), &(uParam1->f_22), uParam0, -1082130432, 0, 1, 1065353216))
		{
			if (uParam1->f_17 < 0)
			{
				uParam0->f_9 = MISC::GET_GAME_TIMER();
				uParam0->f_2 = 3;
			}
			else
			{
				uParam0->f_4 = CAM::CREATE_CAM("DEFAULT_SPLINE_CAMERA", 0);
				CAM::ADD_CAM_SPLINE_NODE(uParam0->f_4, uParam1->f_2, uParam1->f_5, uParam1->f_15, 3, 2);
				CAM::ADD_CAM_SPLINE_NODE(uParam0->f_4, uParam1->f_8, uParam1->f_11, uParam1->f_15, 3, 2);
				CAM::SET_CAM_FOV(uParam0->f_4, uParam1->f_14);
				CAM::SET_CAM_SPLINE_SMOOTHING_STYLE(uParam0->f_4, 3);
				CAM::SET_CAM_ACTIVE(uParam0->f_4, 1);
				uParam0->f_9 = MISC::GET_GAME_TIMER();
				uParam0->f_2 = 22;
			}
		}
		if (!bParam5)
		{
			if (GlobalFunc_4926(1000) || uParam0->f_6)
			{
				uParam0->f_6 = 1;
				if (!CAM::IS_SCREEN_FADING_OUT())
				{
					CAM::DO_SCREEN_FADE_OUT(250);
				}
				if (!CAM::IS_SCREEN_FADED_OUT())
				{
					HUD::HIDE_HUD_AND_RADAR_THIS_FRAME();
					HUD::HIDE_HUD_COMPONENT_THIS_FRAME(7);
					return 0;
				}
				if (uParam0->f_3 != 0)
				{
					func_639(uParam0->f_7, 0, &(uParam1->f_18), &(uParam1->f_22), uParam0, 1f, 0, 1, 1065353216);
				}
				uParam0->f_2 = 4;
			}
		}
	}
	if (uParam0->f_2 == 22)
	{
		if (bParam3)
		{
			MISC::CLEAR_AREA(uParam1->f_2, 5000f, 0, 1, 0, 0);
		}
		if (CAM::DOES_CAM_EXIST(uParam0->f_4) && CAM::IS_CAM_INTERPOLATING(uParam0->f_4))
		{
		}
		else
		{
			uParam0->f_9 = MISC::GET_GAME_TIMER();
			uParam0->f_2 = 3;
		}
		if (!bParam5)
		{
			if (GlobalFunc_4926(1000) || uParam0->f_6)
			{
				uParam0->f_6 = 1;
				if (!CAM::IS_SCREEN_FADING_OUT())
				{
					CAM::DO_SCREEN_FADE_OUT(250);
				}
				if (!CAM::IS_SCREEN_FADED_OUT())
				{
					HUD::HIDE_HUD_AND_RADAR_THIS_FRAME();
					HUD::HIDE_HUD_COMPONENT_THIS_FRAME(7);
					return 0;
				}
				uParam0->f_2 = 4;
			}
		}
	}
	if (uParam0->f_2 == 3)
	{
		if (bParam3)
		{
			MISC::CLEAR_AREA(uParam1->f_2, 5000f, 0, 1, 0, 0);
		}
		if (uParam0->f_9 + 1000 > MISC::GET_GAME_TIMER())
		{
			uParam0->f_2 = 4;
		}
	}
	if (uParam0->f_2 == 4)
	{
		uParam0->f_6 = 0;
		uParam0->f_2 = -1;
		return 1;
	}
	if (uParam0->f_2 == -1)
	{
		return 1;
	}
	return 0;
}


int func_639(int iParam0, int iParam1, char* sParam2, char* sParam3, var uParam4, float fParam5, int iParam6, bool bParam7, int iParam8)//Position - 0x68F8C
{
	float fVar0;
	int iVar1;
	int iVar2;
	int iVar3;
	int iVar4;
	int iVar5;
	var uVar6;
	var uVar7;
	var uVar8;
	float fVar9;
	float fVar10;
	float fVar11;
	float fVar12;
	
	fVar0 = -1f;
	switch (uParam4->f_3)
	{
		case 0:
			*uParam4 = GlobalFunc_7719();
			iVar5 = GlobalFunc_7719();
			GlobalFunc_94(&iVar5, iParam0);
			GlobalFunc_95(&iVar5, iParam1);
			GlobalFunc_96(&iVar5, 0);
			if (GlobalFunc_7640(*uParam4, iVar5))
			{
				GlobalFunc_8385(&iVar5, 0, 0, 0, 1, 0, 0);
			}
			GlobalFunc_8384(*uParam4, iVar5, &iVar1, &iVar2, &iVar3, &uVar6, &uVar7, &uVar8);
			uParam4->f_11 = ((iVar1 + iVar2 * 60) + (iVar3 + iParam6) * 3600);
			GlobalFunc_8057((SYSTEM::TO_FLOAT(uParam4->f_11) / 3600f));
			if (bParam7)
			{
				GRAPHICS::CASCADE_SHADOWS_SET_CASCADE_BOUNDS_SCALE(0.6f);
				GRAPHICS::CASCADE_SHADOWS_ENABLE_ENTITY_TRACKER(0);
				GRAPHICS::_0x0AE73D8DF3A762B2(0);
			}
			GlobalFunc_3042();
			uParam4->f_10 = AUDIO::GET_SOUND_ID();
			AUDIO::PLAY_SOUND_FRONTEND(uParam4->f_10, "TIME_LAPSE_MASTER", 0, 1);
			AUDIO::START_AUDIO_SCENE("TOD_SHIFT_SCENE");
			GlobalFunc_737();
			uParam4->f_3++;
			break;
		
		case 1:
		case 2:
			if ((CAM::DOES_CAM_EXIST(uParam4->f_4) && CAM::IS_CAM_INTERPOLATING(uParam4->f_4)) || !(fParam5 >= 0.99f || fParam5 == -1f))
			{
				if (CAM::DOES_CAM_EXIST(uParam4->f_4) && CAM::IS_CAM_INTERPOLATING(uParam4->f_4))
				{
					fVar0 = CAM::GET_CAM_SPLINE_PHASE(uParam4->f_4);
				}
				else if (!(fParam5 >= 0.99f || fParam5 == -1f))
				{
					fVar0 = fParam5;
				}
				else
				{
					fVar0 = -1f;
				}
				if (fVar0 >= 0.5f)
				{
					if (uParam4->f_3 == 1)
					{
						if (MISC::GET_HASH_KEY(sParam2) != 0)
						{
							MISC::SET_WEATHER_TYPE_OVERTIME_PERSIST(sParam2, iParam8);
						}
						if (MISC::GET_HASH_KEY(sParam3) != 0)
						{
							MISC::_CLEAR_CLOUD_HAT();
							MISC::LOAD_CLOUD_HAT(sParam3, 0);
						}
						uParam4->f_3 = 2;
					}
				}
			}
			if (fVar0 >= 0.99f || fVar0 == -1f)
			{
				iVar5 = *uParam4;
				GlobalFunc_8385(&iVar5, uParam4->f_11, 0, 0, 0, 0, 0);
				CLOCK::SET_CLOCK_TIME(GlobalFunc_208(iVar5), GlobalFunc_207(iVar5), GlobalFunc_206(iVar5));
				if (bParam7)
				{
					GRAPHICS::CASCADE_SHADOWS_INIT_SESSION();
				}
				AUDIO::STOP_SOUND(uParam4->f_10);
				AUDIO::RELEASE_NAMED_SCRIPT_AUDIO_BANK("TIME_LAPSE");
				if (bParam7)
				{
					GRAPHICS::_0x0AE73D8DF3A762B2(1);
					GRAPHICS::CASCADE_SHADOWS_ENABLE_ENTITY_TRACKER(1);
				}
				return 1;
			}
			fVar11 = fVar0;
			fVar9 = 0.1f;
			fVar10 = 0.9f;
			fVar12 = GlobalFunc_253(((fVar11 - fVar9) / (fVar10 - fVar9)), 0f, 1f);
			iVar4 = SYSTEM::ROUND((IntToFloat(uParam4->f_11) * fVar12));
			iVar5 = *uParam4;
			GlobalFunc_8385(&iVar5, iVar4, 0, 0, 0, 0, 0);
			CLOCK::SET_CLOCK_TIME(GlobalFunc_208(iVar5), GlobalFunc_207(iVar5), GlobalFunc_206(iVar5));
			if (GlobalFunc_209(iVar5) != CLOCK::GET_CLOCK_DAY_OF_MONTH())
			{
				CLOCK::SET_CLOCK_DATE(GlobalFunc_209(iVar5), GlobalFunc_210(iVar5), GlobalFunc_4975(iVar5));
			}
			GlobalFunc_5077();
			GRAPHICS::_0xE3E2C1B4C59DBC77(6);
			break;
	}
	return 0;
}




















void func_659(var uParam0, bool bParam1, bool bParam2, int iParam3, int iParam4, int iParam5, int iParam6, bool bParam7)//Position - 0x69A24
{
	var uVar0;
	
	if (iParam4 == 1)
	{
		PLAYER::SET_PLAYER_CONTROL(PLAYER::PLAYER_ID(), PLAYER::IS_PLAYER_CONTROL_ON(PLAYER::PLAYER_ID()), 64);
	}
	if (!CUTSCENE::IS_CUTSCENE_PLAYING())
	{
		PLAYER::SET_PLAYER_CONTROL(PLAYER::PLAYER_ID(), !bParam1, 0);
	}
	if (bParam7)
	{
		if (!ENTITY::IS_ENTITY_DEAD(PLAYER::PLAYER_PED_ID()))
		{
			PED::REMOVE_PED_HELMET(PLAYER::PLAYER_PED_ID(), 1);
		}
	}
	if (!bParam1 && iParam6)
	{
		CAM::STOP_RENDERING_SCRIPT_CAMS_USING_CATCH_UP(0, 0, 3, 0);
	}
	else
	{
		CAM::RENDER_SCRIPT_CAMS(bParam1, bParam2, iParam3, 1, 0, 0);
	}
	if (bParam1)
	{
		HUD::CLEAR_HELP(1);
	}
	else
	{
		if (CAM::DOES_CAM_EXIST(uParam0->f_4))
		{
			if (CAM::IS_CAM_ACTIVE(uParam0->f_4))
			{
				CAM::SET_CAM_ACTIVE(uParam0->f_4, 0);
			}
			CAM::DESTROY_CAM(uParam0->f_4, 1);
		}
		if (!ENTITY::IS_ENTITY_DEAD(PLAYER::PLAYER_PED_ID()))
		{
			ENTITY::SET_ENTITY_VISIBLE(PLAYER::PLAYER_PED_ID(), 1);
		}
		uVar0 = PLAYER::GET_PLAYERS_LAST_VEHICLE();
		if (ENTITY::DOES_ENTITY_EXIST(uVar0))
		{
			ENTITY::SET_ENTITY_VISIBLE(iVar0, 1);
		}
		AUDIO::RELEASE_NAMED_SCRIPT_AUDIO_BANK("TIME_LAPSE");
		if (AUDIO::IS_AUDIO_SCENE_ACTIVE("TOD_SHIFT_SCENE"))
		{
			AUDIO::STOP_SOUND(uParam0->f_10);
			AUDIO::RELEASE_NAMED_SCRIPT_AUDIO_BANK("TIME_LAPSE");
			AUDIO::STOP_AUDIO_SCENE("TOD_SHIFT_SCENE");
		}
	}
	GlobalFunc_8316(bParam1, 1, 0, 0);
	GlobalFunc_737();
	if (!bParam1 && iParam5)
	{
		if (uParam0->f_5)
		{
			CLOCK::SET_CLOCK_TIME(uParam0->f_7, 0, 0);
		}
		else
		{
			CLOCK::SET_CLOCK_TIME(uParam0->f_8, 0, 0);
		}
	}
	if (!bParam1)
	{
		if (CAM::IS_SCREEN_FADED_OUT())
		{
			CAM::DO_SCREEN_FADE_IN(250);
		}
	}
	if (!bParam1)
	{
		if (Global_SAVE_DATA.VEHICLE_GEN_SAVED_DATA_STRUCT.f_4249 != -15)
		{
			Global_SAVE_DATA.VEHICLE_GEN_SAVED_DATA_STRUCT.f_4249 = GlobalFunc_7719();
		}
	}
}






void func_665()//Position - 0x6ABDE
{
	AUDIO::TRIGGER_MUSIC_EVENT("FHPRD_FAIL");
	GlobalFunc_8032(20, 0f, 0f, 0f, 0f);
	func_29(0, 0, 2000, 1);
	GlobalFunc_6685(0);
	if (!ENTITY::IS_ENTITY_DEAD(PLAYER::PLAYER_PED_ID()))
	{
		PED::SET_PED_USING_ACTION_MODE(PLAYER::PLAYER_PED_ID(), 0, -1, 0);
	}
	GlobalFunc_7621(92, 0, 0, 1, 0);
	GlobalFunc_7621(93, 0, 0, 1, 0);
	if (!ENTITY::IS_ENTITY_DEAD(iLocal_288))
	{
		ENTITY::SET_ENTITY_PROOFS(iLocal_288, 0, 0, 0, 0, 0, 0, 0, 0);
	}
	if (!ENTITY::IS_ENTITY_DEAD(iLocal_291))
	{
		ENTITY::SET_ENTITY_PROOFS(iLocal_291, 0, 0, 0, 0, 0, 0, 0, 0);
	}
	if (!ENTITY::IS_ENTITY_DEAD(iLocal_289))
	{
		ENTITY::SET_ENTITY_PROOFS(iLocal_289, 0, 0, 0, 0, 0, 0, 0, 0);
	}
	if (!ENTITY::IS_ENTITY_DEAD(iLocal_292))
	{
		ENTITY::SET_ENTITY_PROOFS(iLocal_292, 0, 0, 0, 0, 0, 0, 0, 0);
	}
	STREAMING::SET_REDUCE_VEHICLE_MODEL_BUDGET(0);
	STREAMING::SET_REDUCE_PED_MODEL_BUDGET(0);
	GlobalFunc_2224(0);
	GlobalFunc_7621(91, 0, 1, 1, 0);
	STREAMING::SET_VEHICLE_POPULATION_BUDGET(3);
	PLAYER::SET_MAX_WANTED_LEVEL(5);
	GRAPHICS::CLEAR_TIMECYCLE_MODIFIER();
	MISC::SET_TIME_SCALE(1f);
}



